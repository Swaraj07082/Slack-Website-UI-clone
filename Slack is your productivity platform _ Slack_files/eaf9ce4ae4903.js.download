var CS_CONF={"projectId":5540,"status":1,"hostnames":["slack.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":20,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"apiErrors":{"validCustomHeaders":[],"validUrls":[],"collectStandardHeaders":0,"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0},"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net"};
var CS_INTEGRATIONS_CONF = {"demandbase":{"settings":["enableAccessType","enableAnnualSales","enableAudience","enableAudienceSegment","enableB2B","enableB2C","enableCity","enableCompanyName","enableCountryName","enableEmployeeCount","enableEmployeeRange","enableFortune1000","enableForbes2000","enableIndustry","enableInformationLevel","enableMarketingAlias","enableNAICS","enableSIC","enableRevenueRange","enableSubIndustry","enableState","enableStockTicker","enableTraffic","enableWatchListAccountStatus","enableWatchListAccountType","enableWebsite"]},"optimizely":{}};
/* integration-demandbase 2.7.0 */
!function(e){var n={};function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(a,i,function(n){return e[n]}.bind(null,i));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-demandbase-contentsquare","version":"2.7.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function a(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function i(e){return"object"==typeof e&&null!==e}function r(e,n){if(i(window.CS_INTEGRATIONS_CONF)&&i(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}function o(e,n,t){if((t=t||window)&&n&&e){var a=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,a||(a=!0,n())}})}}t.r(n);var u,c=t(0),s=c.name,l=c.version,f=function(e){var n,t,i,r;if(a((function(){var a=e.name;i=e.version;var o=a.replace("@contentsquare/integration-","");n=o+"-"+i;var u="-contentsquare";r=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:n,parameterName:t,snippetVersion:i}}(c);f&&(u=f.parameterName,s=f.snippetBuildName,l=f.snippetVersion),a((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Demandbase - v"+l);function e(e,n){e="ABM_DB_"+e,_uxa.push(["trackDynamicVariable",{key:e,value:n}])}var n=r(u,"settings"),t=!1,i=!1,c=!1,f=!1,p=!1,b=!1,d=!1,_=!1,y=!1,m=!1,g=!1,O=!1,x=!1,S=!1,v=!1,w=!1,N=!1,C=!1,A=!1,I=!1,h=!1,T=!1,k=!1,F=!1,P=!1,R=!1;n&&(n.indexOf("enableAccessType")>-1&&(t=!0),n.indexOf("enableAnnualSales")>-1&&(i=!0),n.indexOf("enableAudience")>-1&&(c=!0),n.indexOf("enableAudienceSegment")>-1&&(f=!0),n.indexOf("enableB2B")>-1&&(p=!0),n.indexOf("enableB2C")>-1&&(b=!0),n.indexOf("enableCity")>-1&&(d=!0),n.indexOf("enableCompanyName")>-1&&(_=!0),n.indexOf("enableCountryName")>-1&&(y=!0),n.indexOf("enableEmployeeCount")>-1&&(m=!0),n.indexOf("enableEmployeeRange")>-1&&(g=!0),n.indexOf("enableFortune1000")>-1&&(O=!0),n.indexOf("enableForbes2000")>-1&&(x=!0),n.indexOf("enableIndustry")>-1&&(S=!0),n.indexOf("enableInformationLevel")>-1&&(v=!0),n.indexOf("enableMarketingAlias")>-1&&(w=!0),n.indexOf("enableNAICS")>-1&&(N=!0),n.indexOf("enableSIC")>-1&&(C=!0),n.indexOf("enableRevenueRange")>-1&&(A=!0),n.indexOf("enableSubIndustry")>-1&&(I=!0),n.indexOf("enableState")>-1&&(h=!0),n.indexOf("enableStockTicker")>-1&&(T=!0),n.indexOf("enableTraffic")>-1&&(k=!0),n.indexOf("enableWatchListAccountStatus")>-1&&(F=!0),n.indexOf("enableWatchListAccountType")>-1&&(P=!0),n.indexOf("enableWebsite")>-1&&(R=!0));var j=r(u,"customObjectName");j=j?j.trim():"Demandbase.IpApi.CompanyProfile";function B(n){!function(e,n,t){t=t||window;var a=e.split(".");if(1==a.length)o(e,n,t);else{var i=t,r=0;const e=function(){i=r>0?i[a[r-1]]:window,++r>=a.length?o(a[r-1],n,i):o(a[r-1],e,i)};e()}}(j,(function(){setTimeout((function(){a((function(){var n=function(e,n){for(var t=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),a=0,i=t.length;a<i;++a){var r=t[a];if(!(r in e))return;e=e[r]}return e}(window,j);n&&(t&&n.access_type&&e("Access Type",n.access_type),i&&n.annual_sales&&!isNaN(n.annual_sales)&&e("Annual Sales",parseInt(n.annual_sales)),c&&n.audience&&e("Audience",n.audience),f&&n.audience_segment&&e("Audience Segment",n.audience_segment),p&&("boolean"!=typeof n.b2b&&"true"!==n.b2b&&"false"!==n.b2b||e("B2B",n.b2b.toString())),b&&("boolean"!=typeof n.b2c&&"true"!==n.b2c&&"false"!==n.b2c||e("B2C",n.b2c.toString())),d&&n.city&&e("City",n.city),_&&n.company_name&&e("Company Name",n.company_name),y&&n.country_name&&e("Country Name",n.country_name),m&&n.employee_count&&!isNaN(n.employee_count)&&e("Employee Count",parseInt(n.employee_count)),g&&n.employee_range&&e("Employee Range",n.employee_range),O&&("boolean"!=typeof n.fortune_1000&&"true"!==n.fortune_1000&&"false"!==n.fortune_1000||e("Fortune 1000",n.fortune_1000.toString())),x&&("boolean"!=typeof n.forbes_2000&&"true"!==n.forbes_2000&&"false"!==n.forbes_2000||e("Forbes 2000",n.forbes_2000.toString())),S&&n.industry&&e("Industry",n.industry),v&&n.information_level&&e("Information Level",n.information_level),w&&n.marketing_alias&&e("Marketing Alias",n.marketing_alias),N&&n.primary_naics&&e("Primary NAICS",n.primary_naics.toString()),C&&n.primary_sic&&e("Primary SIC",n.primary_sic.toString()),A&&n.revenue_range&&e("Revenue Range",n.revenue_range),I&&n.sub_industry&&e("Sub Industry",n.sub_industry),h&&n.state&&e("State",n.state),T&&n.stock_ticker&&e("Stock Ticker",n.stock_ticker),k&&n.traffic&&e("Traffic",n.traffic),F&&n.watch_list_account_status&&e("Watch List Account Status",n.watch_list_account_status),P&&n.watch_list_account_type&&e("Watch List Account Type",n.watch_list_account_type),R&&n.web_site&&e("Website",n.web_site))}),s)}),500)}))}var E=!1;_uxa.push(["afterPageView",function(e){a((function(){E||(E=!0,B())}),s)}])}),s)}]);/* integration-optimizely 2.6.3 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-optimizely-contentsquare","version":"2.6.3","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function a(e,n,t){if((t=t||window)&&n&&e){var i=!1,a=t[e];a?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,i||(i=!0,n())}})}}t.r(n);var r=t(0),o=r.name,u=r.version,p=function(e){var n,t,a,r;if(i((function(){var i=e.name;a=e.version;var o=i.replace("@contentsquare/integration-","");n=o+"-"+a;var u="-contentsquare";r=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:n,parameterName:t,snippetVersion:a}}(r);p&&(p.parameterName,o=p.snippetBuildName,u=p.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Optimizely - v"+u);var e=!1;function n(n){var t=[];!function(e,n,t){t=t||window;var i=e.split(".");if(1==i.length)a(e,n,t);else{var r=t,o=0;const e=function(){r=o>0?r[i[o-1]]:window,++o>=i.length?a(i[o-1],n,r):a(i[o-1],e,r)};e()}}("optimizely",(function(){setTimeout((function(){i((function(){function n(){i((function(){var e,n,i=optimizely.get&&optimizely.get("state");if(i&&i.getCampaignStates&&"function"==typeof i.getCampaignStates&&"object"==typeof i.getCampaignStates())for(var a=i.getCampaignStates({isActive:!0}),r=Object.keys(a),o=0;o<r.length;o++)if(-1===t.indexOf(r[o])){t.push(r[o]);var u=a[r[o]];if(u.experiment){var p="",c="";p=u.experiment.name?u.campaignName:u.experiment.id,c=u.experiment.campaignName&&u.experiment.name?u.experiment.name+" - "+u.variation.name:u.variation.name?u.variation.name:u.variation.id,u.isInCampaignHoldback&&(c+=" [Holdback]"),p&&c&&(n=c,e="AB_OP_"+(e=p),_uxa.push(["trackDynamicVariable",{key:e,value:n}]))}}}),o)}n(),e||(e=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))}),o)}),500)}))}_uxa.push(["afterPageView",function(e){i((function(){n()}),o)}])}),o)}]);/*! For license information please see tracking-tag-13.5.0.min.js.LICENSE.txt */
!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{get:function(){return lt},getRequestParameters:function(){return dt}});var i={};t.r(i),t.d(i,{getRequestParameters:function(){return Ue}});var r="cs-native-frame",s={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function e(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(s.constructors).forEach((function(n){window[s.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),o("csNode",s.nodeProperties,t.Node.prototype,"get"),o("csElement",s.elementProperties,t.Element.prototype,"get"),o("csElement",s.elementPropertiesValues,t.Element.prototype,"value",!1),o("csHTMLImageElement",s.imageProperties,t.HTMLImageElement.prototype,"set"),o("csEvent",s.eventProperties,t.Event.prototype,"get"),o("csNavigator",s.navigatorProperties,t.navigator,"value")}function o(t,n,i,r,s){void 0===s&&(s=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,o=u?n.propertyName:n;(s||o in i)&&(window["".concat(t+o)]=e(i,o,r),u&&(window["".concat(t+o)]=window["".concat(t+o)].bind(n.binding)))}))}function h(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Element.prototype.attachShadow){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return h("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(zs){h("Critical","failed to copy references from window: ".concat(zs.message))}function c(t){return a(csString.prototype.toLowerCase.call(t.localName))}function a(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function f(t){return t.nodeType===Node.ELEMENT_NODE}function v(t){return t.nodeType===Node.TEXT_NODE}function l(t){return f(t)&&"a"===t.localName}function d(t){return function(t){return f(t)&&"link"===t.localName}(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function w(t){return f(t)&&"img"===t.localName}function y(t){return f(t)&&"style"===t.localName}function p(t){return f(t)&&"input"===t.localName}function m(t){return f(t)&&"textarea"===t.localName}function g(t){return f(t)&&"script"===t.localName}function A(t){switch(t.nodeType){case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return!0;default:return!1}}function S(t){return t.nodeType===Node.DOCUMENT_NODE}function E(t){return A(t)&&"host"in t&&"mode"in t}var b=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var N="detached";function T(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return R(n)&&csArray.prototype.push.call(i,N),{ancestors:i,selectionRoot:n}}function R(t){return D.isValidElement(t)}var O=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector;function k(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return O.call(t,n)}))}var I=[/\d{4}/,/^ember\d+$/],C="data-cs-override-id",x="data-cs-dynamic-id";function _(t,n,i,r){var s=r.dynamicIdRegex||null,e=r.dynamicElementNameRegex,u=c(t);e&&(e.test(t.localName)&&(u=csString.prototype.replace.call(u,e,"$1".concat("@"))));if(function(t,n){var i=L(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&P(C,i,n)}(t,i)){var o=L(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"[").concat(C,'="').concat(o,'"]')}}var h=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,s=i.uniqueAttributes;r<s.length;r++){var e=s[r],u=t.getAttribute(e);if(null!==u)if(P(e,u,n))return{attributeName:e,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,s=i.uniqueCssSelectors;r<s.length;r++){var e=s[r];if(O.call(t,e)&&M(e,n))return e}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UCS[").concat(f,"]")};var v=function(t){var n=t.getAttribute("id");return n?a(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==L(t)}(t)&&!function(t,n,i){return t.hasAttribute(x)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(I,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&P("id",t,n)}(n,i)}(t,v,i,s))return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#").concat(v)};var l=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var s=r[i];if(O.call(t,s))return s}return}(t,r);if(l){var d=function(t,n,i){if(t===N||9===t.nodeType)return 0;for(var r=0,s=n.previousElementSibling;s;)O.call(s,i)&&(r+=1),s=s.previousElementSibling;return r}(n,t,l);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,"[").concat(l,"](").concat(d,")")}}var w=function(t,n,i){if(t===N||9===t.nodeType)return 0;for(var r=i.dynamicElementNameRegex,s=!!(null==r?void 0:r.test(n.localName)),e=c(n),u=0,o=n.previousElementSibling;o;)(c(o)===e||s&&(null==r?void 0:r.test(o.localName)))&&!k(o,i.reliableSelectors)&&(u+=1),o=o.previousElementSibling;return u}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,":eq(").concat(w,")")}}function L(t){return t.getAttribute(C)}function P(t,n,i){try{return 1===i.querySelectorAll("[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function M(t,n){try{return 1===n.querySelectorAll(t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var D;function U(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return j(r,i);var s=_(r,t[0],n,i),e=s.elementSelector,u=s.hasUniqueIdentifier;if(!i.fullPath&&u){var o=t[t.length-1];return"".concat(j(o,i)).concat(e)}var h=U(t,n,i);return"".concat(h?"".concat(h,">"):"").concat(e)}function j(t,n){if(t===N)return"|detached|";if(t.host){var i=T(t.host),r=i.ancestors,s=i.selectionRoot;return"".concat(U(r,s,n),"|shadow-root|")}return 11===t.nodeType?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return"";if(!n(e))return t.INVALID_ELEMENT;var u=T(e);return U(u.ancestors,u.selectionRoot,s)},t.getElementPathAndFirstAnchorParent=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return{path:"",firstAnchorParent:null};if(!n(e))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&l(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return R(n)&&csArray.prototype.push.call(i,N),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(e),o=u.firstAnchorParent;return{path:U(u.ancestors,u.selectionRoot,s),firstAnchorParent:o}}}(D||(D={})),window.CSPathComputation=window.CSPathComputation||D;var q=function(t,n){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},q(t,n)};function H(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}q(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var F=function(){return F=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},F.apply(this,arguments)};function z(t,n,i,r){var s,e=arguments.length,u=e<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(u=(e<3?s(u):e>3?s(n,i,u):s(n,i))||u);return e>3&&u&&Object.defineProperty(n,i,u),u}function V(t,n,i,r){return new(i||(i=Promise))((function(s,e){function u(t){try{h(r.next(t))}catch(t){e(t)}}function o(t){try{h(r.throw(t))}catch(t){e(t)}}function h(t){var n;t.done?s(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}h((r=r.apply(t,n||[])).next())}))}function B(t,n){var i,r,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function o(e){return function(o){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==e[0]&&2!==e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(t,u)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}}Object.create;function J(t,n,i){if(i||2===arguments.length)for(var r,s=0,e=n.length;s<e;s++)!r&&s in n||(r||(r=Array.prototype.slice.call(n,0,s)),r[s]=n[s]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var G=Number.MAX_SAFE_INTEGER||9007199254740991;function W(){}function K(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Y(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var X=34164e6,$={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=G),Math.floor(Math.random()*t)}},Z="function"==typeof Symbol?Symbol("json"):null;var Q,tt,nt=Z?function(t){if(t[Z])return t[Z];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+nt(t[0]),i=1;i<t.length;i++)n+=","+nt(t[i]);return n+"]"}return t[Z]=csJSON.stringify(t)}:csJSON.stringify,it=function(){function t(t){var n;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||X,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=t.recordingDomain,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=F({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrorsEnabled=t.customErrorsEnabled,this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.t(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.t(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.t(t.replayRecordingMaskedUrlRegex),this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.useMalkaPipeline=t.useMalkaPipeline,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,t.taskSchedulerOptions&&(this.taskSchedulerOptions=F(F({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.isWebView=!1}return t.prototype.getTrackerUri=function(){return"".concat(this.i(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.i(),"://").concat(this.useMalkaPipeline&&this.malkaRecordingDomain?this.malkaRecordingDomain:this.recordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.i(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.i(),"://").concat(this.loggerDomain)},t.prototype.i=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var s=r[0],e=r[1];n.h(s,e)}}))},t.prototype.h=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"recordingDomain"===t&&(this.recordingDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.t=function(t){return t?this.g(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.g=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t}(),rt=function(){function t(t,n){this.A=t,this.S=n}return t.prototype.init=function(){this.N=this.A.self!==this.A.top,this.T=this.S.isWebView&&this.A.self===this.A.top,this.S.iframesTracking&&this.N||this.T?this.R=!1:this.R=!0},t.prototype.isInIframeContext=function(){return this.N},t.prototype.isTopWindowTracker=function(){return this.R},t.prototype.isInWebViewContext=function(){return this.T},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(Q||(Q={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(tt||(tt={}));var st=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return F(F({},t),n)})):{}},t}(),et=function(t){function n(n,i){return t.call(this,n,i)||this}return H(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.O(t);var n=tt.toQuery(t);this.I(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.I=function(t){var n=new window.Image(1,1);n.onload=W,n.onerror=W,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.O=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(st),ut=function(){function t(t,n){this.C=t,this._=n}return t.prototype.init=function(){this.L=new et(this.C.getLoggerUri()),this.L.setRequestParametersProviders(this,this._)},t.prototype.send=function(t){this.P=t,this.L.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),ot=/[a-zA-Z0-9._%+-]+(?:@|%40)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,ht=/[a-zA-Z0-9+_-](?:@|%40)/,ct="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",at=new RegExp("(ey".concat(ct,"\\.ey").concat(ct,"\\.").concat(ct,")"),"g"),ft=function(){function t(){}return t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&ht.test(t)?csString.prototype.replace.call(t,ot,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,at,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),vt="13.5.0";function lt(){return vt}function dt(){return{v:vt}}var wt=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function yt(){return Math.floor(wt()/1e3)}var pt,mt,gt=function(){function t(t,n){this.M=t,this.D=n}return t.prototype.getRequestParameters=function(){return F(F({d:"".concat(wt()),p:this.D.anonymizeEmail(window.location.href),u:navigator.userAgent},this.M.getRequestParameters()),dt())},t}(),At="snippet-",St="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(pt||(pt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(mt||(mt={}));var Et=function(){function t(t,n,i){var r;this.U=n,this.D=new ft,this.j=mt[Q.warn],this.j=mt[t.minLogLevel||Q.warn],this.L=i||new ut(t,new gt(t,this.D)),this.q=((r={})[Q.debug]=[],r[Q.warn]=[],r[Q.error]=[],r[Q.critical]=[],r),this.H={implementation:{},dynamic:{}},this.L.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=Q.warn),this.F(i,n)){csArray.prototype.push.call(this.q[i],n||"");var r={message:this.V(t,n),stacktrace:this.B(t),app:"uxa",level:i};this.L.send(r)}},t.prototype.V=function(t,n){var i=t instanceof Error?this.D.anonymizeEmail(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.B=function(t){return t instanceof Error?"".concat(t.stack||"No stacktrace"," ").concat(this.J()):this.J()},t.prototype.J=function(){var t=this.U.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.U.getSessionService(),r=i&&i.getSession(),s={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(s)},t.prototype.F=function(t,n){if(mt[t]<this.j)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,St,0)))return this.G(n,pt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,At,0)))return this.G(n,pt.DYNAMIC);var i=this.q[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.G=function(t,n){return t in this.H[n]?!(this.H[n][t]>=5)&&(this.H[n][t]+=1,!0):(this.H[n][t]=1,!0)},t}(),bt=document.createElement("a");function Nt(t){return bt.href=t,bt.href}function Tt(t){if(!K(t,"http://")&&!K(t,"https://"))return"";var n=document.createElement("a");return n.href=t,decodeURIComponent(n.hostname)}function Rt(t,n){return csArray.prototype.some.call(n,(function(n){return Y(t,".".concat(n))||t===n||""===n}))}var Ot,kt,It,Ct,xt="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(Ot||(Ot={})),function(t){t.Parent="parent",t.Child="child"}(kt||(kt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback"}(It||(It={})),function(t){t.buildBaseMessage=function(t,n,i,r){var s={type:t,from:n,pid:i,signature:xt};return void 0!==r&&r>=0&&(s.id=r),s},t.isMessageValid=function(t,n,i,r){var s=Tt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===xt&&t.data.from===n&&t.data.pid===i&&Rt(s,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(Ct||(Ct={}));var _t=function(){function t(t){this.M=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=Q.warn);var r={message:t,errorCode:n,level:i},s=Ct.buildBaseMessage(It.ChildLogMessage,kt.Child,this.M.projectId);s.content=r,Ct.sendPostMessage(window.parent,"*",s)},t}(),Lt=function(){function t(){}return t.prototype.setContext=function(t,n){this.W=t,this.K=n},t.prototype.getVisitorService=function(){return this.W},t.prototype.getSessionService=function(){return this.K},t}();function Pt(t){return jt(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function Mt(t){return t===parseInt(t,10)}function Dt(t){return jt(t)&&("string"==typeof t||t instanceof csString)}function Ut(t){return"object"==typeof t}function jt(t){return void 0!==t}function qt(t){return jt(t)&&null!==t}function Ht(t){return"function"==typeof t}function Ft(t){return t instanceof Element}var zt,Vt,Bt,Jt,Gt=function(){function t(){}return t.setStrategy=function(n){t.Y=n},t.computeIsActive=function(n){t.X=$.boolean(n),t.X?t.$=$.boolean(10):t.$=!1},t.isLoggingActive=function(){return t.X},t.getStrategy=function(){return t.Y},t.debug=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,Q.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,Q.warn)},t.error=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,Q.error)},t.critical=function(n,i){void 0===i&&(i=""),t.X&&this.Y.send(n,i,Q.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{var e=n.apply(void 0,r);return jt(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return i.error(n,t)})):e}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.$},t.X=!1,t.$=!1,t}(),Wt=function(t){return function(n,i,r){var s=(null==i?void 0:i.toString())||"",e=t||"".concat(n.constructor&&n.constructor.name,".").concat(s);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Gt.tryToExecute(e,u.bind(this)).apply(void 0,t)}}}};!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,s,e,u,o){var h=encodeURIComponent("".concat(i)),c=s===t.CURRENT_DOMAIN?void 0:s,a=r(e),f=a?";expires=".concat(a.toUTCString()):"",v=qt(c)?";domain=".concat(c):"",l="".concat(n,"=").concat(h).concat(f).concat(";path=/").concat(v);return jt(u)&&u!==Bt.NotSet&&(l="".concat(l,";SameSite=").concat(u)),jt(o)&&o===Jt.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return Pt(t)?new csDate(wt()+t):t}function s(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),Bt.None,Jt.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=s,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var e="_cs_root-domain",u=n(e);if(null!==u&&"1"!==u)return u;for(var o=csString.prototype.split.call(window.location.hostname,"."),h=csArray.prototype.pop.call(o);o.length&&(null===u||"1"===u);)i(e,h=csArray.prototype.join.call([csArray.prototype.pop.call(o),h],"."),h,void 0,t,r),u=n(e);return s(e,h),h}}(zt||(zt={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(Vt||(Vt={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(Bt||(Bt={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(Jt||(Jt={}));var Kt=function(){function t(t,n,i){this.M=t,this.Z=n,this.tt=i,this.nt=!1,this.it=Bt.NotSet,this.st=Jt.No}return t.prototype.getSameSiteFlag=function(){return this.it},t.prototype.getSecureFlag=function(){return this.st},t.prototype.getDomain=function(){return this.et},t.prototype.getRootDomain=function(){return this.ut},t.prototype.init=function(){if(!this.M.cookielessTrackingEnabled){var t=this.ot(),n=this.ht();this.nt=this.at(t,n),this.nt?(this.it=t,this.st=n):this.M.secureCookiesEnabled&&"https:"===this.Z.getUrlProtocol()&&(this.st=Jt.Yes),this.ut=this.ft(),this.et=this.vt(this.ut)}},t.prototype.at=function(n,i){return!Vt.browserIsSafariV12()&&(zt.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!zt.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(zt.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.ot=function(){return"http:"===this.Z.getUrlProtocol()?Bt.Lax:this.tt.isSameSiteNoneSecureNeeded()||this.M.crossDomainTracking?Bt.None:Bt.Lax},t.prototype.ht=function(){return"http:"===this.Z.getUrlProtocol()?Jt.No:this.M.secureCookiesEnabled||this.M.crossDomainTracking||this.tt.isSameSiteNoneSecureNeeded()?Jt.Yes:Jt.No},t.prototype.isSameSiteSupported=function(){return this.nt},t.prototype.set=function(t,n,i){var r=zt.toExpireDate(i);zt.set(t,n,this.et,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.et;zt.remove(t,i)},t.prototype.ft=function(){var t=this.tt.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?Bt.None:void 0,i=t?Jt.Yes:void 0;return zt.getRootDomain(n,i)},t.prototype.vt=function(t){return this.M.allowSubdomains?t:zt.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),Yt="_cs_t",Xt=function(){function t(t,n){this.lt=t,this.M=n,this.wt=!1,this.yt=!1}return t.prototype.init=function(){if(!this.M.cookielessTrackingEnabled&&this.lt.isTopWindowTracker()&&"cookie"in document){if(!this.lt.isInIframeContext()&&zt.isCookiePresent())return this.wt=!0,void(this.yt=!1);if(zt.set(Yt,"1",zt.CURRENT_DOMAIN),null!==zt.get(Yt))return this.wt=!0,this.yt=!1,void zt.remove(Yt,zt.CURRENT_DOMAIN);zt.set(Yt,"1",zt.CURRENT_DOMAIN,void 0,Bt.None,Jt.Yes),null!==zt.get(Yt)&&(this.wt=!0,this.yt=!0,zt.remove(Yt,zt.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.wt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.yt},t}();function $t(){var t="CSLocalStorageTest";try{return localStorage.setItem(t,t),localStorage.getItem(t)!==t?!1:(localStorage.removeItem(t),!0)}catch(t){return!1}}var Zt=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.gt()},t.gt=function(){try{var t={},n=Object.assign(t,{a:1},{b:2,c:{d:4}}),i={a:1,b:2,c:{d:4}};return csJSON.stringify(n)===csJSON.stringify(i)&&csJSON.stringify(t)===csJSON.stringify(i)}catch(t){return!1}},t}();var Qt,tn=function(){function t(t,n){this.M=t,this.tt=n}return t.prototype.canTrack=function(){return this.M.isProjectActive()&&this.At()&&this.St()&&this.Et()},t.prototype.canTrackInChild=function(){return this.M.isProjectActive()&&this.At()&&(this.St()||this.bt())},t.prototype.Et=function(){return this.M.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}()&&$t():this.tt.areCookiesEnabled()&&$t()},t.prototype.St=function(){return Rt(window.location.hostname,this.M.hostnames)},t.prototype.At=function(){return!this.Nt()&&this.Tt()&&Zt.check()},t.prototype.bt=function(){return K(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.Nt=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.Tt=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),nn=function(){function t(t){this.Rt=!1,this.Ot=new Map,this.kt=new Map,this.It=new Map,this.Ct="CS_WORKER_SIGNATURE";var n="\n    const algorithm = ".concat(t.algorithm,";\n    const compressor = (").concat(t.getCompressorSourceCode(),")();\n    ").concat('(()=>{"use strict";var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}Object.create,Object.create,function(e){e.UNCOMPRESSED="0",e.LZSTRING="1",e.GZIP="2"}(e||(e={}));var o,s=function(){function r(e){var t=this;this.queryParams={},this.headers={},this.handleRecoveredRequests=function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r],s=o.metadata,a=o.events;t.send(a,s)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams=function(e){var t=this;Object.keys(e).forEach((function(r){t.queryParams[r]=e[r]}))},r.prototype.removeQueryParams=function(e){var t=this;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams={}},r.prototype.send=function(r,n){var o=this,s=n||t({},this.queryParams),a=!("ct"in s),i="string"!=typeof r&&!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts&&a?s.ct=this.compressionOpts.compressionType:s.ct=e.UNCOMPRESSED);var c=i?JSON.stringify(r):r,u=Object.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s[e]))})).join("&"),h="".concat(this.endpoint,"?").concat(u);this.compressionOpts&&a&&"string"==typeof c?this.compressionOpts.compressor(c,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(h,s,e)})):this.doSend(h,s,c)},r.prototype.onLoad=function(e){this.onLoadCallback=e},r.prototype.onError=function(e){this.onErrorCallback=e},r.prototype.onTimeout=function(e,t){this.onTimeoutCallback=e,this.timeout=t},r.prototype.abort=function(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()},r.prototype.setRequestHeader=function(e,t){this.headers[e]=t},r.prototype.getQueryParams=function(){return this.queryParams},r.prototype.isArrayBuffer=function(e){return e&&void 0!==e.byteLength},r.prototype.doSend=function(e,t,r){var n=this,o=new XMLHttpRequest,s=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");o.open("POST",e),o.onload=function(){if(n.recoveryStorage&&n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e={params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror=function(){n.recoveryStorage&&n.recoveryStorage.save({key:s,metadata:t,events:r}),n.onErrorCallback&&n.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(o.timeout=this.timeout,o.ontimeout=function(){n.onTimeoutCallback()}),this.abortCurrentXhrCall=function(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),a=function(){function e(e){this.maxStoredBytes=e,this.storageBytesUsed=0}return e.prototype.addString=function(e){this.storageBytesUsed+=2*e.length},e.prototype.addArrayBuffer=function(e){this.storageBytesUsed+=e.byteLength},e.prototype.isThresholdReached=function(){return this.storageBytesUsed>this.maxStoredBytes},e.prototype.reset=function(){this.storageBytesUsed=0},e}(),i=function(){function e(e){this.ramStorage={},this.byteSizeCounter=new a(e)}return e.prototype.save=function(e){var t=e.key,r=e.metadata,n=e.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"==typeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]={metadata:r,events:n}))},e.prototype.recover=function(e){var t=this,r=[];this.getStorageKeys().forEach((function(e){var n=t.ramStorage[e];void 0!==n&&(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!==r.length&&(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys=function(){return Object.keys(this.ramStorage)},e.prototype.removeItem=function(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));var c=function(){function e(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer=function(){var e=this;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer=[]},e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,r,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState===o.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!==o.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t=e.key,r=e.metadata,s=e.events,this.byteSizeCounter.addString(t),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(s,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!==o.READY)return[2];t.label=2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState=o.OPEN_IN_PROGRESS,e=this,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache=t.sent(),this.cacheState=o.READY,[3,3];case 2:return t.sent(),this.cacheState=o.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover=function(e){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress>1?[2]:[4,this.cache.keys()];case 1:return 0===(t=n.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r=n.sent(),o=r.map((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),delete t["content-type"];var r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return s=n.sent(),[4,Promise.all(t.map((function(e){return a.cache.delete(e)})))];case 4:return n.sent(),e(s),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),u=function(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save=function(e){this.storageStrategy.save(e)},e.prototype.recover=function(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy=function(t){var r=this;this.storageStrategy=new c(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy=function(t){var r=this;this.storageStrategy=new i(e.MAX_SIZE),t&&t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE=16777216,e}();!function(){var e="CS_WORKER_SIGNATURE",t=new Map,r=new u("csPersisted");function n(t){return t.WORKER_SIGNATURE===e}function o(n){switch(n.type){case"CreatePostRequest":var o=n.endpoint,a=n.compressionOutputType,i=n.useRetry,c={endpoint:o};a&&(c.compressionOpts={compressor,compressionOutputType:a,compressionType:algorithm}),i&&(c.recoveryStorage=r);var u=new s(c);t.set(o,u),u.onLoad((function(t){var r={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),u.onError((function(t){var r={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var h=n.endpoint,p=n.queryParams;(u=t.get(h))&&u.setQueryParams(p);break;case"RemoveQueryParams":h=n.endpoint,p=n.queryParams,(u=t.get(h))&&u.removeQueryParams(p);break;case"Send":h=n.endpoint;var f=n.payload;p=n.queryParams,(u=t.get(h))&&u.send(f,p);break;case"Abort":h=n.endpoint,(u=t.get(h))&&u.abort();break;case"SetHeader":h=n.endpoint;var y=n.headerName,d=n.headerValue;(u=t.get(h))&&u.setRequestHeader(y,d);break;case"SetTimeout":var l=n.endpoint,v=n.timeout;(u=t.get(l))&&u.onTimeout((function(){var t={type:"onTimeout",endpoint:l,WORKER_SIGNATURE:e};self.postMessage(t)}),v);break;default:throw new Error(JSON.stringify(n))}}self.addEventListener("message",(function(e){!function(e,t){e.getReader?e.getReader().read().then((function(e){return e.value})).then((function(e){n(e)&&t(e)})):n(e)&&t(e)}(e.data,o)}))}()})();');try{this.xt=this._t(n),this.Rt=!0,this.Lt()&&(this.postMessage=this.postMessageAsTransferable)}catch(t){this.Rt=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.Ct,this.xt.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.Ct;var n=new ReadableStream({start:function(n){n.enqueue(t),n.close()}});this.xt.postMessage(n,[n])},t.prototype._t=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,s=window.Worker,e=new r([t],{type:"application/javascript"}),u=new s(i.createObjectURL(e));return u.onmessage=function(t){var i=t.data,r=i.type,s=i.endpoint;if(i.WORKER_SIGNATURE===n.Ct)if("onLoad"===r){var e=t.data.response;(u=n.Ot.get(s))&&u(e)}else if("onError"===r){e=t.data.response;(u=n.kt.get(s))&&u(e)}else if("onTimeout"===r){var u;(u=n.It.get(s))&&u()}},u},t.prototype.registerOnLoadCallback=function(t,n){this.Ot.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this.kt.set(t,n)},t.prototype.registerOnTimeoutCallback=function(t,n){this.It.set(t,n)},t.prototype.isSupported=function(){return this.Rt},t.prototype.Lt=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),rn=function(){function t(t){this.Pt={},this.Mt=t.endpoint,this.Dt=t.networkWorker,this.Ut=t.compressionOutputType,this.jt=t.useRetry,this.Dt.postMessage({type:"CreatePostRequest",endpoint:this.Mt,compressionOutputType:this.Ut,useRetry:this.jt})}return t.prototype.setQueryParams=function(t){var n=this;this.Dt.postMessage({type:"SetQueryParams",endpoint:this.Mt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),(function(i){n.Pt[i]=t[i]}))},t.prototype.getQueryParams=function(){return this.Pt},t.prototype.removeQueryParams=function(t){var n=this;this.Dt.postMessage({type:"RemoveQueryParams",endpoint:this.Mt,queryParams:t}),t&&csArray.prototype.forEach.call(t,(function(t){delete n.Pt[t]}))},t.prototype.send=function(t,n){this.Dt.postMessage({type:"Send",endpoint:this.Mt,payload:t,queryParams:n})},t.prototype.abort=function(){this.Dt.postMessage({type:"Abort",endpoint:this.Mt})},t.prototype.onLoad=function(t){this.Dt.registerOnLoadCallback(this.Mt,t)},t.prototype.onError=function(t){this.Dt.registerOnErrorCallback(this.Mt,t)},t.prototype.setRequestHeader=function(t,n){this.Dt.postMessage({type:"SetHeader",endpoint:this.Mt,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.Dt.registerOnTimeoutCallback(this.Mt,t),this.Dt.postMessage({type:"SetTimeout",endpoint:this.Mt,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.LZSTRING="1",t.GZIP="2"}(Qt||(Qt={}));var sn,en,un,on,hn=function(t){this.onError=t},cn=function(){function t(t){var n=this;this.Pt={},this.qt={},this.Ht=function(t){for(var i=0,r=t;i<r.length;i++){var s=r[i],e=s.metadata,u=s.events;n.send(u,e)}},this.Mt=t.endpoint,this.Ft=t.compressionOpts,this.zt=t.recoveryStorage,this.zt&&this.zt.recover(this.Ht)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach((function(i){n.Pt[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach((function(t){delete n.Pt[t]})):this.Pt={}},t.prototype.send=function(t,n){var i=this,r=n||F({},this.Pt),s=!("ct"in r),e="string"!=typeof t&&!this.Vt(t);"ct"in r||(this.Ft&&s?r.ct=this.Ft.compressionType:r.ct=Qt.UNCOMPRESSED);var u=e?JSON.stringify(t):t,o=Object.keys(r).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))})).join("&"),h="".concat(this.Mt,"?").concat(o);this.Ft&&s&&"string"==typeof u?this.Ft.compressor(u,this.Ft.compressionOutputType,(function(t){return i.Bt(h,r,t)})):this.Bt(h,r,u)},t.prototype.onLoad=function(t){this.Jt=t},t.prototype.onError=function(t){this.Gt=t},t.prototype.onTimeout=function(t,n){this.Wt=t,this.Kt=n},t.prototype.abort=function(){this.Yt&&this.Yt()},t.prototype.setRequestHeader=function(t,n){this.qt[t]=n},t.prototype.getQueryParams=function(){return this.Pt},t.prototype.Vt=function(t){return t&&void 0!==t.byteLength},t.prototype.Bt=function(t,n,i){var r=this,s=new XMLHttpRequest,e=Object.keys(n).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))})).join("&");s.open("POST",t),s.onload=function(){if(r.zt&&r.zt.recover(r.Ht),r.Jt){var t={params:n,responseText:s.responseText,status:s.status};r.Jt(t)}},s.onerror=function(){r.zt&&r.zt.save({key:e,metadata:n,events:i}),r.Gt&&r.Gt({params:n})},this.Kt&&this.Wt&&(s.timeout=this.Kt,s.ontimeout=function(){r.Wt()}),this.Yt=function(){return s.abort()},Object.keys(this.qt).forEach((function(t){s.setRequestHeader(t,r.qt[t])})),s.send(i)},t}(),an=function(){function t(t){this.Xt=t,this.Dt=new nn(this.Xt)}return t.prototype.create=function(t,n,i,r){if(this.Dt.isSupported()&&n)return new rn({networkWorker:this.Dt,endpoint:t,compressionOutputType:i,useRetry:!!r});var s=i?{compressor:this.Xt.compress,compressionOutputType:i,compressionType:this.Xt.algorithm}:void 0;return new cn({endpoint:t,compressionOpts:s,recoveryStorage:r})},t}(),fn=function(){function t(t,n,i,r,s){this.W=t,this.K=n,this.$t=i,this.Zt=r,this.M=s}return t.prototype.get=function(){return{exclusion:this.$t.getAppliedTrackingDraw(),visitor:this.W.getVisitor(),session:this.K.getSession(),cvars:this.Zt.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.$t.exclude(this.M),this.W.removeVisitor(),this.K.removeSession(),this.Zt.removeCustomVariablesSession()},t.prototype.include=function(t){this.$t.removeExclusion(),this.W.setVisitor(t.visitor),t.session?this.K.setSession(t.session):this.K.removeSession(),t.cvars?this.Zt.setCustomVariableSession(t.cvars):this.Zt.removeCustomVariablesSession()},t}(),vn="_cs_id",ln=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/,dn=function(){function t(t,n,i,r){this.M=t,this.Qt=n,this.tn=i,this.nn=r}return t.prototype.get=function(){var n;return(n=this.M.cookielessTrackingEnabled?this.nn.getItem(vn):this.Qt.get(vn))?t.fromString(n):null},t.prototype.set=function(n){var i=t.toString(n);if(this.M.cookielessTrackingEnabled)this.nn.setItem(vn,i);else{var r=new csDate(n.expires);this.Qt.set(vn,i,r),this.tn.setCookie(vn,i,r)}},t.prototype.remove=function(){this.M.cookielessTrackingEnabled?this.nn.removeItem(vn):(this.Qt.delete(vn),this.tn.removeCookie(vn))},t.prototype.handleSubdomainChange=function(){if(!this.M.cookielessTrackingEnabled){var t=this.get();t&&(this.M.allowSubdomains?this.Qt.delete(vn,Kt.CURRENT_DOMAIN):this.Qt.delete(vn,this.Qt.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4],o=n[5],h=n[6];return{id:i,creationTimestamp:Number(r),visitsCount:Number(s),hitTimestamp:Number(e),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(o),expires:Number(h)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires],".")},t.isValidVisitorString=function(t){return ln.test(t)},t}();!function(t){t.REPLAY_RECORDING_DISABLED="1",t.REPLAY_RECORDING_ENABLED="3",t.TRIGGER_REPLAY_RECORDING_ENABLED="5"}(sn||(sn={})),function(t){t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(en||(en={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(un||(un={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(on||(on={}));var wn,yn="_cs_s",pn=18e5,mn=/^(\d+\.[013567T](\.[01])?)(\.\d+)?$/,gn=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(wn||(wn={}));var An,Sn=function(){function t(t,n,i,r){this.M=t,this.Qt=n,this.tn=i,this.nn=r,this.rn=null,this.en=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.un();return t.hn(i)}var r=this.cn(),s=r.sessionString,e=r.status,u=t.hn(s);if(e!==wn.EXPIRED)return u;if(this.M.cookielessTrackingEnabled)return null;var o=this.un();if(!o)return null;var h=csString.prototype.split.call(o,gn);if(!t.an(h))return o;var c=h[h.length-1],a=parseInt(c,10);return isNaN(a)||this.fn(a),u},t.prototype.set=function(t,n){void 0===n&&(n=pn);var i=wt()+n,r=this.toString(t);r+="".concat(gn).concat(i),this.vn(r,i),this.M.cookielessTrackingEnabled?this.nn.setItem(yn,r):(this.Qt.set(yn,r,n),this.tn.setCookie(yn,r,n))},t.prototype.remove=function(){this.M.cookielessTrackingEnabled?this.nn.removeItem(yn):(this.Qt.delete(yn),this.tn.removeCookie(yn)),this.ln()},t.prototype.handleSubdomainChange=function(){if(!this.M.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.M.allowSubdomains?this.Qt.delete(yn,Kt.CURRENT_DOMAIN):this.Qt.delete(yn,this.Qt.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],gn)},t.prototype.vn=function(t,n){this.rn={sessionString:t,expires:n}},t.prototype.cn=function(){return this.rn?this.rn&&wt()<=this.rn.expires?{sessionString:this.rn.sessionString,status:wn.FOUND}:{sessionString:this.rn.sessionString,status:wn.EXPIRED}:{sessionString:this.un(),status:wn.NOT_FOUND}},t.prototype.ln=function(){this.rn=null},t.prototype.fn=function(t){this.rn&&(this.rn.expires=t,this.en=!0)},t.prototype.isCacheRefreshed=function(){return this.en},t.prototype.resetCacheRefreshed=function(){this.en=!1},t.prototype.un=function(){if(this.M.cookielessTrackingEnabled){var t=this.nn.getItem(yn);return!t||this.dn(t)?null:t}return this.Qt.get(yn)},t.prototype.dn=function(t){var n=csString.prototype.split.call(t,gn),i=parseInt(n[n.length-1],10);return!isNaN(i)&&wt()>i},t.an=function(t){return 13===t[t.length-1].length},t.hn=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,mn))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.hn(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n=csString.prototype.split.call(t,gn),i=n[0],r=n[1],s=n[2];return{recordingState:r,etrState:null!=s?s:un.ETR_OFF,pageNumber:parseInt(i,10)}},t.isValidSessionString=function(t){return mn.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?dn.fromString(t._cs_id):null,session:t._cs_s?Sn.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(An||(An={}));var En,bn="_cs_ex",Nn=2592e6,Tn=/^[0-9]+$/,Rn=function(){function t(t,n,i,r){this.M=t,this.Qt=n,this.tn=i,this.nn=r}return t.prototype.get=function(){return this.M.cookielessTrackingEnabled?Number(this.nn.getItem(bn)):Number(this.Qt.get(bn))},t.prototype.set=function(t){this.M.cookielessTrackingEnabled?this.nn.setItem(bn,t):(this.Qt.set(bn,t,Nn),this.tn.setCookie(bn,t,Nn))},t.prototype.remove=function(){this.M.cookielessTrackingEnabled?this.nn.removeItem(bn):(this.Qt.delete(bn),this.tn.removeCookie(bn))},t.isValidExclusionString=function(t){return Tn.test(t)},t}(),On="_cs_cvars",kn=function(){function t(t,n,i,r){this.M=t,this.Qt=n,this.tn=i,this.nn=r}return t.prototype.get=function(){return this.M.cookielessTrackingEnabled?this.nn.getItem(On):this.Qt.get(On)},t.prototype.set=function(t){this.M.cookielessTrackingEnabled?this.nn.setItem(On,t):(this.Qt.set(On,t),this.tn.setCookie(On,t))},t.prototype.remove=function(){this.M.cookielessTrackingEnabled?this.nn.removeItem(On):(this.Qt.delete(On),this.tn.removeCookie(On))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function n(t){var n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(n,t)>=0}))}t.isRawDomainState=n,t.isValid=function(t){return!!n(t)&&((!t._cs_id||dn.isValidVisitorString(t._cs_id))&&(!t._cs_s||Sn.isValidSessionString(t._cs_s))&&(!t._cs_ex||Rn.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||kn.isValidCustomVarString(t._cs_cvars)))}}(En||(En={}));var In,Cn,xn,_n=function(){function t(t,n){this.wn=t,this.yn=n}return t.prototype.retrieve=function(n,i){var r=this;this.mn=i,this.retrievedStates=[],this.gn=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return r.An(t)})),t.getXdframeOrigin),this.wn.onMessage((function(t){r.Sn(t)})),this.wn.onTimeout((function(){r.En()})),this.wn.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.gn,t.getXdframeUrl),(function(t){return r.wn.open(t)}))},t.prototype.Sn=function(t){if(this.bn(t)){var n=t.data;if(!En.isValid(n))throw this.wn.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,n)}this.Nn()&&(this.wn.stop(),this.mn(csArray.prototype.map.call(this.retrievedStates,An.fromRaw)))},t.prototype.En=function(){Gt.warn("xdframe: all messages not received")},t.prototype.bn=function(t){return csArray.prototype.indexOf.call(this.gn,t.origin)>-1},t.prototype.Nn=function(){return this.retrievedStates.length===this.gn.length},t.prototype.An=function(t){return!Y(this.yn.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),Ln=function(){function t(){var t=this;this.Tn=3e3,this.Rn=function(n){t.handleMessage(n)}}return t.prototype.onMessage=function(t){this.On=t},t.prototype.onTimeout=function(t){this.Wt=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.Rn),this.kn=window.setTimeout((function(){t.Wt()}),this.Tn)},t.prototype.open=function(t){var n=document.createElement("iframe");return n.src=t,n.setAttribute("hidden",""),n.setAttribute("title","Intentionally blank"),document.body.appendChild(n),n},t.prototype.stop=function(){window.removeEventListener("message",this.Rn),window.clearTimeout(this.kn),this.On=W,this.Wt=W},t.prototype.handleMessage=function(t){this.On(t)},z([Wt("XdframeMessage")],t.prototype,"handleMessage",null),t}();!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.CONSENT_GRANTED=14]="CONSENT_GRANTED",t[t.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE"}(In||(In={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(Cn||(Cn={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(xn||(xn={}));var Pn,Mn;function Dn(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,t.listener,n)}function Un(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(Pn||(Pn={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(Mn||(Mn={}));var jn=function(){function t(){}return t.isEmpty=function(){return 0===t.In.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,J([t.In],n,!1))},t.getAll=function(){return t.In},t.clear=function(){t.In=[]},t.In=[],t}(),qn=50;var Hn=!1;var Fn=[],zn=[];function Vn(t){csArray.prototype.push.call(Fn,t),performance.mark("".concat(t,"-start"))}function Bn(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;csArray.prototype.push.call(zn,{mName:t,mDuration:i.toFixed(2)}),csArray.prototype.pop.call(Fn),0===Fn.length&&(i>qn&&jn.add(zn),zn=[])}}function Jn(t){performance.mark("".concat(t,"-start"))}function Gn(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>qn&&jn.add([{mName:t,mDuration:i.toFixed(2)}])}}var Wn=function(t){return function(n,i,r){var s=r.value;r.value=function(){if(!Hn)return r.value=s,s.apply(this,arguments);Vn(t);var n=s.apply(this,arguments);return Bn(t),n}}};function Kn(t){var n=csEventtarget.apply(t);return n&&f(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function Yn(t){return Math.round(10*t)/10}function Xn(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var s=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=wt();if(e-s>r)return s=e,t.apply(this,n)}}var e,u=[],o=null,h=0,c=function(){h=wt(),o=null,e=t.apply(i,u)},a=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var a=wt(),f=r-(a-h);return i=null!=this?this:window,u=J([],n,!0),f<=0||f>r?(h=a,e=t.apply(i,u),o?(window.clearTimeout(o),o=null):u=[]):o||(o=window.setTimeout(c,f)),e};return a.cancel=function(){o&&(window.clearTimeout(o),h=0,o=null,u=[])},a.flushPending=function(){o&&(window.clearTimeout(o),c())},a}function $n(){return function(t,n,i){var r=i.value;i.value=function(t){!1===(null==t?void 0:t.isTrusted)&&$n.enabled||r.call(this,t)}}}$n.enabled=!0;var Zn=function(){function t(n,i,r,s){var e=this;this.Cn=n,this.xn=i,this._n=r,this.Ln=s,this.Pn=new Set,this.Mn=[],this.Dn=[{type:"pointerup",listener:function(t){return e.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return e.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return e.pointerDownListener(t)},boundElement:document}],this.Un=[{type:"touchstart",listener:function(t){return e.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return e.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return e.touchEndListener(t)},boundElement:document}],this.jn=[{type:"click",listener:function(t){return e.clickListener(t)},boundElement:document},{type:"keyup",listener:this.Cn.on(t.qn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.Cn.on(t.Hn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return e.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return e.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return e.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return e.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return e.pasteListener(t)},boundElement:document},{type:"change",listener:this.Cn.on(t.Fn,(function(t){return e.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.Cn.on("select",(function(t){return e.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.Cn.on(t.Hn,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)},boundElement:document}],this.zn=[{type:"change",listener:this.Cn.on(t.Fn,(function(t){return e.inputCheckableListener(t)}))},{type:"change",listener:this.Cn.on("select",(function(t){return e.inputSelectListener(t)}))},{type:"change",listener:this.Cn.on(t.Hn,(function(t){return e.inputTextListener(t)}))},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))}}];var u=function(t){if(!Dt(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===u||u&&u>=16)&&csArray.prototype.push.call(this.zn,{type:"mouseover",listener:function(t){return e.mouseOverListener(t)}})}var n;return t.prototype.init=function(){this.Vn(),this.Bn(),this.Jn(),this.Gn(),this.Ln.onInputNodeToEncrypt(this.Wn.bind(this))},t.prototype.Gn=function(){var t=this;this.xn.onDocumentIdentified((function(n){t.Kn(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Mn,t)},t.prototype.Wn=function(t){csArray.prototype.forEach.call(this.Mn,(function(n){return n(t)}))},t.prototype.start=function(){this.Yn()},t.prototype.stop=function(){this.Xn()},t.prototype.Bn=function(){var t;this.$n()&&(t=csArray.prototype.push).call.apply(t,J([this.jn],this.Dn,!1))},t.prototype.Vn=function(){var t;this.Zn()&&(t=csArray.prototype.push).call.apply(t,J([this.jn],this.Un,!1))},t.prototype.Kn=function(t){S(t)?csArray.prototype.forEach.call(this.jn,(function(t){return Dn(t)})):this.Pn.has(t)||(this.Pn.add(t),csArray.prototype.forEach.call(this.zn,(function(n){var i=n;i.boundElement=t,Dn(i)})))},t.prototype.Qn=function(t){S(t)?csArray.prototype.forEach.call(this.jn,(function(t){return Un(t)})):(this.Pn.delete(t),csArray.prototype.forEach.call(this.zn,(function(n){var i=n;i.boundElement=t,Un(i)})))},t.prototype.$n=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.Zn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.Xn=function(){var t=this;this.Qn(document),this.Pn.forEach((function(n){return t.Qn(n)}))},t.prototype.Yn=function(){this.ti(t.qn),this.ni(),this.ii(),this.si(),this.ti(t.Hn)},t.prototype.ti=function(t){for(var n,i=document.querySelectorAll(t),r=0;r<i.length;r+=1){var s=i.item(r);(null===(n=s.value)||void 0===n?void 0:n.length)>0&&this.ei(s)}},t.prototype.ni=function(){var t=window.pageYOffset,n=window.pageXOffset;if(0!==t||0!==n){var i=this.xn.getId(document);if(!i)return;var r={type:In.SCROLL,args:[i,n,t],date:wt()};this.Wn(r)}},t.prototype.ii=function(){for(var t=document.getElementsByTagName("select"),n=0;n<t.length;n+=1)this.ui(t[n])},t.prototype.si=function(){for(var n=document.querySelectorAll(t.Fn),i=0;i<n.length;i+=1)this.oi(n[i])},t.prototype.hi=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!this._n.isSensitive(t)&&!this._n.isSensitiveChild(t)){var n=this.xn.getId(t);if(n){var i=this.hi(t),r={type:In.SCROLL,args:[n,i.left,i.top],date:wt()};this.Wn(r)}}},t.prototype.mouseOverListener=function(t){if(!this._n.isSensitiveChild(t.target)){var n=this.xn.getId(t.target);if(n){var i={type:In.MOUSE_OVER,args:[n],date:wt()};this.Wn(i)}}},t.prototype.clickListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r={type:In.CLICK,args:[i],date:wt()};this.Wn(r)}}},t.prototype.inputCheckableListener=function(t){var n=Kn(t);this.oi(n)},t.prototype.oi=function(t){if(!this._n.isSensitive(t)&&!this._n.isSensitiveChild(t)){var n=this.xn.getId(t);if(n){var i={type:In.INPUT_CHECKABLE,args:[n,t.checked],date:wt()};this.Wn(i)}}},t.prototype.inputSelectListener=function(t){var n=Kn(t);this.ui(n)},t.prototype.ui=function(t){if(!this._n.isSensitive(t)&&!this._n.isSensitiveChild(t)){var n=this.xn.getId(t);if(n){var i={type:In.INPUT_SELECT,args:[n,t.selectedIndex],date:wt()};this.Wn(i)}}},t.prototype.inputTextListener=function(t){var n=Kn(t);this.ei(n)},t.prototype.ei=function(t){var n;if(!this._n.isSensitive(t)&&!this._n.isSensitiveChild(t)){var i=this.xn.getId(t);if(i){var r=null!==(n=t.value)&&void 0!==n?n:"";if(this.Ln.shouldEncrypt(t))this.Ln.registerInputNodeToEncrypt({targetId:i,targetValue:r,date:wt()});else{var s="number"===t.type?"0":"",e={type:In.INPUT_TEXT,args:[i,csString.prototype.replace.call(r,/\S/g,s)],date:wt()};this.Wn(e)}}}},t.prototype.keyUpListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r=this.ci[t.key];if(void 0!==r){var s={type:In.KEY_UP,args:[i,r],date:wt()};this.Wn(s)}}}},t.prototype.keyDownListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r=this.ci[t.key];if(void 0!==r){var s={type:In.KEY_DOWN,args:[i,r],date:wt()};this.Wn(s)}}}},t.prototype.copyListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r={type:In.CLIPBOARD_COMMAND,args:[i,Mn.COPY],date:wt()};this.Wn(r)}}},t.prototype.cutListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r={type:In.CLIPBOARD_COMMAND,args:[i,Mn.CUT],date:wt()};this.Wn(r)}}},t.prototype.pasteListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r={type:In.CLIPBOARD_COMMAND,args:[i,Mn.PASTE],date:wt()};this.Wn(r)}}},t.prototype.pointerUpListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r={type:In.POINTER_UP,args:[t.pointerId,t.pointerType,Yn(t.clientX),Yn(t.clientY),i,t.button],date:wt()};this.Wn(r)}}},t.prototype.pointerMoveListener=function(t){var n={type:In.POINTER_MOVE,args:[t.pointerId,t.pointerType,Yn(t.clientX),Yn(t.clientY)],date:wt()};this.Wn(n)},t.prototype.pointerDownListener=function(t){var n=Kn(t);if(!this._n.isSensitiveChild(n)){var i=this.xn.getId(n);if(i){var r={type:In.POINTER_DOWN,args:[t.pointerId,t.pointerType,Yn(t.clientX),Yn(t.clientY),i,t.button,{pageX:Yn(t.pageX),pageY:Yn(t.pageY)}],date:wt()};this.Wn(r)}}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:In.TOUCH_START,args:[r.identifier,Yn(r.clientX),Yn(r.clientY)],date:wt()};this.Wn(s)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:In.TOUCH_MOVE,args:[r.identifier,Yn(r.clientX),Yn(r.clientY)],date:wt()};this.Wn(s)}},t.prototype.touchEndListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:In.TOUCH_END,args:[r.identifier,Yn(r.clientX),Yn(r.clientY)],date:wt()};this.Wn(s)}},t.prototype.Jn=function(){this.ci={},this.ci[" "]=Pn.SPACE,this.ci.Spacebar=Pn.SPACE,this.ci.Backspace=Pn.BACKSPACE,this.ci.Enter=Pn.ENTER,this.ci.Delete=Pn.DELETE,this.ci.ArrowUp=Pn.ARROWUP,this.ci.ArrowDown=Pn.ARROWDOWN,this.ci.ArrowLeft=Pn.ARROWLEFT,this.ci.ArrowRight=Pn.ARROWRIGHT,this.ci.Up=Pn.ARROWUP,this.ci.Down=Pn.ARROWDOWN,this.ci.Left=Pn.ARROWLEFT,this.ci.Right=Pn.ARROWRIGHT,this.ci.CapsLock=Pn.CAPSLOCK,this.ci.Shift=Pn.SHIFT,this.ci.Tab=Pn.TAB,this.ci.Escape=Pn.ESCAPE,this.ci.Esc=Pn.ESCAPE,this.ci.End=Pn.END,this.ci.Alt=Pn.ALT,this.ci.Control=Pn.CTRL,this.ci.Meta=Pn.META},t.qn=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.Fn=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.Hn='input[type="number"]',z([Wn("RecordingPageEvents.start")],t.prototype,"start",null),z([Wt("scroll")],t.prototype,"scrollListener",null),z([Wt("mouseOver"),$n(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(Kn(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),z([Wt("click"),$n()],t.prototype,"clickListener",null),z([Wt("checkable")],t.prototype,"inputCheckableListener",null),z([Wt("select")],t.prototype,"inputSelectListener",null),z([Wt("text")],t.prototype,"inputTextListener",null),z([Wt("Event handler type: keyup")],t.prototype,"keyUpListener",null),z([Wt("Event handler type: keydown")],t.prototype,"keyDownListener",null),z([Wt("Event handler type: copy")],t.prototype,"copyListener",null),z([Wt("Event handler type: cut")],t.prototype,"cutListener",null),z([Wt("Event handler type: paste")],t.prototype,"pasteListener",null),z([Wt("Event handler type: pointerup"),$n()],t.prototype,"pointerUpListener",null),z([Wt("Event handler type: pointermove"),$n(),(n={wait:33,ignoreThrottledCalls:!0},function(t,i,r){r.value=Xn(r.value,n)})],t.prototype,"pointerMoveListener",null),z([Wt("Event handler type: pointerdown"),$n()],t.prototype,"pointerDownListener",null),z([Wt("Event handler type: touchstart"),$n()],t.prototype,"touchStartListener",null),z([Wt("Event handler type: touchmove"),$n()],t.prototype,"touchMoveListener",null),z([Wt("Event handler type: touchend"),$n()],t.prototype,"touchEndListener",null),t}();function Qn(t){for(var n=t.length,i=new csArray(n),r=0;r<n;r+=1)i[r]=t[r];return i}function ti(t,n){for(var i=t.length,r=0;r<i;r++)n(t[r],r)}function ni(t,n){for(var i=t.length,r=[],s=0;s<i;s+=1){var e=t[s];n(e)&&csArray.prototype.push.call(r,e)}return r}var ii,ri,si,ei,ui=function(){function t(t,n,i,r,s,e,u){void 0===u&&(u=document);var o=this;this.ai=t,this.fi=n,this.vi=i,this.li=r,this.xn=s,this._n=e,this.wi=u,this.yi=!1,this.pi=function(t){o.li.emitInitialDomDone(t)},this.fi.onCharacterDataMutation((function(t){o.mi(t)})),this.fi.onAttributesMutation((function(t){o._n.isSensitive(t.target)&&"src"===t.attributeName&&w(t.target)&&(o._n.unidentifySensitiveNodes(t.target),o._n.identifySensitiveNodes(t.target)),o.gi(t)})),this.fi.onChildListMutation((function(t,n){ti(t.removedNodes,(function(t){o._n.unidentifySensitiveNodes(t)})),ti(t.addedNodes,(function(t){o._n.identifySensitiveNodes(t),o.xn.identifyNodes(t,n)})),o.Ai(t,n)})),this.fi.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(o._n.identifySensitiveNodes(t.target),o.xn.identifyNodes(csElementshadowRoot.apply(t.target)),o.Si(t))}))}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.isStarted=function(){return this.yi},t.prototype.start=function(){this.isStarted()||(this.yi=!0,this.fi.start(),this.bi())},t.prototype.stop=function(){this.isStarted()&&(this.yi=!1,this._n.unidentifySensitiveNodes(this.wi),this.fi.stop())},t.prototype.flushEvents=function(){this.fi.flushPendingMutations()},t.prototype.bi=function(){this.li.emitInitialDomStart(),this._n.identifySensitiveNodes(this.wi),this.xn.identifyNodes(this.wi),this.ai.serializeInitialDom(this.wi,this.pi)},t.prototype.Si=function(t){if(!this._n.isSensitive(t.target)&&!this._n.isSensitiveChild(t.target)){var n=this.ai.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:In.ATTACH_SHADOW};this.Ei(i)}}},t.prototype.gi=function(t){if(!this._n.isSensitiveChild(t.target)&&!this._n.isSensitiveAttribute(t.target,t.attributeName)){var n=this.ai.serializeMutationAttribute(t);if(n){var i={args:n,date:t.date,type:In.MUTATION_ATTRIBUTE};this.Ei(i),this.vi.scanAttribute(t.target,t.attributeName)}}},t.prototype.mi=function(t){var n=t.target.parentElement;if(!n||!this._n.isSensitive(n)&&!this._n.isSensitiveChild(n)){var i=this.ai.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:In.MUTATION_CHARACTER_DATA};this.Ei(r),this.vi.scanText(t.target)}}},t.prototype.Ai=function(t,n){var i=this;if(!this._n.isSensitive(t.target)&&!this._n.isSensitiveChild(t.target)){var r=this.ai.serializeMutationChildList(t,n);if(r){var s=r.removedNodes,e=r.addedNodes;csArray.prototype.forEach.call(s,(function(n){var r={args:n,date:t.date,type:In.MUTATION_REMOVE};i.Ei(r)})),csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:In.MUTATION_INSERT};i.Ei(r)}))}}},t}(),oi=function(){function t(t){this.Ni=t,this.Ti=0}return t.prototype.addString=function(t){this.Ti+=2*t.length},t.prototype.addArrayBuffer=function(t){this.Ti+=t.byteLength},t.prototype.isThresholdReached=function(){return this.Ti>this.Ni},t.prototype.reset=function(){this.Ti=0},t}(),hi=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512e3),this.Ri=t,this.Oi=new oi(n)}return t.prototype.addEvent=function(t){this.Oi.addString(nt(t)),csArray.prototype.push.call(this.Ri,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.Ri.length;n+=1){if(this.Ri[n].date>t.date)break}csArray.prototype.splice.call(this.Ri,n,0,t)},t.prototype.eventsCount=function(){return this.Ri.length},t.prototype.clearEvents=function(){this.Oi.reset(),this.Ri=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.Oi.isThresholdReached()},t.prototype.getEvents=function(){return this.Ri},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.Ri,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.Ri=r,i},t.prototype.stringifyEvents=function(){return nt(this.Ri)},t}(),ci=function(){function t(){this.ki=1}return t.prototype.getCurrentIndex=function(){return this.ki},t.prototype.increment=function(){this.ki+=1},t.prototype.reset=function(){this.ki=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.ki)}},t}(),ai=function(){function t(){}return t.prototype.emit=function(n,i){var r="".concat(t.Ii,".").concat(n),s=t.createEvent(r,{detail:i});null!==s&&document.dispatchEvent(s)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.Ci();if(null===i)return null;var r=n.bubbles,s=void 0!==r&&r,e=n.cancelable,u=void 0!==e&&e,o=n.detail;return i.initCustomEvent(t,s,u,o),i},t.Ci=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.Ii="cs.tracking",t}(),fi=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),vi=function(t){function n(n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b){var N=t.call(this)||this;return N.M=n,N.xi=i,N._i=r,N.Li=s,N.Pi=e,N.Mi=u,N.Di=o,N.Ui=h,N.ji=c,N.qi=a,N.K=f,N.vi=v,N.Hi=l,N.Fi=d,N.zi=w,N.Vi=y,N.Bi=p,N.Ji=m,N.Ln=g,N.Gi=A,N.Wi=S,N.Ki=E,N.Yi=b,N.Xi=0,N.$i=0,N.Zi=0,N.Qi=new ai,N.tr={allowFromQuotaService:!0,allowFromSerialization:!0},N.nr=Xn((function(){N.xi.eventsCount()>0&&N.ir()}),2e3),N.rr=function(t){return N.processBrowserEvent(t)},N.er=function(t){return N.ur(t)},N.hr=0,N.cr=0,N.ar=function(t){N.Ki.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},N}return H(n,t),n.prototype.init=function(){this.vr(),this.Wi.onLoad(this.ar),this.Wi.onError(this.ar)},n.prototype.vr=function(){var t=this;this.Pi.onEvent(this.rr),this.Mi.onEvent(this.rr),this.Ui.onEvent(this.rr),this.Di.onEvent(this.er),this.vi.onEvent(this.rr),this.Hi.onEvent(this.rr),this.Bi.onEvent(this.rr),this.ji.onEvent(this.er),this.Ln.onTextNodeToEncrypt(this.rr),this.Ln.onApiErrorToEncrypt((function(n){t.lr(n)})),this.Yi.onEvent(this.rr),this.Ln.onUserIdentifierToEncrypt(this.rr),this.Gi.onEvent(this.rr)},n.prototype.isRecording=function(){return this.K.hasValidSession()&&this.isStarted},n.prototype.isMutationTrackerStarted=function(){return this.Mi.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.tr.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.tr.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.tr.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.tr.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.tr.allowFromQuotaService&&this.tr.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.wr(t)},n.prototype.onIframeDetailedApiError=function(t){this.yr(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.ur(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.K.hasValidSession()&&this.pr(t)},n.prototype.ur=function(t){this.qi.isSessionValid()&&this.pr(t)},n.prototype.pr=function(t){this.xi.addEvent(t),this.xi.isThresholdReached()?this.pushEvents():this.xi.isFull()&&this.nr(),this.mr(t)},n.prototype.mr=function(t){this.M.emitDebugEvents&&this.Qi.emit("recordingEvent",F(F({},t),{typeName:In[t.type]}))},n.prototype.onStart=function(){var t=this;this.initStates(),this.Gi.start(),this.Bi.start(),this.Hi.start(),this.Mi.start(),this.Pi.start(),this.Ui.start(),this.ji.start(),this.Yi.start(),this.M.jsErrorsEnabled&&this.Fi.subscribe(n.gr,(function(n){return t.wr(n)})),this.M.apiErrors.enabled&&this.Vi.subscribe(n.gr,(function(n){return t.yr(n)}),{detailedEvent:!0}),this.M.emitDebugEvents&&this.Qi.emit("replayRecordingStarted")},n.prototype.onStop=function(){this.Pi.stop(),this.Mi.stop(),this.Ui.stop(),this.Di.stop(),this.Fi.unsubscribe(n.gr),this.Vi.unsubscribe(n.gr),this.Bi.stop(),this.ji.stop(),this.Gi.stop(),this.Yi.stop()},n.prototype.clearStates=function(){this.Mi.flushEvents(),this.nr.cancel(),this.pushEvents(),this.Wi.removeQueryParams()},n.prototype.initStates=function(){this.hr=wt(),this.Li.reset(),this.Xi=0,this.$i=0,this.Zi=0,this.Wi.setQueryParams(this._i.getRequestParameters())},n.prototype.pushEvents=function(){this.Bi.flushEvents(),this.xi.eventsCount()>0&&(this.isStarted?this.ir():this.xi.clearEvents())},n.prototype.ir=function(){if(this.canSendEvents()){var t=this.xi.getEvents();this.cr=t[t.length-1].date;var n=this.Li.getCurrentIndex();this.Wi.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.Wi.getQueryParams();this.Ki.addBatchInProgress("".concat(i.sn,".").concat(i.pn,".").concat(n),this.Wi.getQueryParams(),t),this.Wi.send(t),this.Li.increment(),this.xi.clearEvents(),this.Ar&&this.Ar()}},n.prototype.addInitialDom=function(t){this.xi.addEventByTimestamp(t),this.mr(t)},n.prototype.yr=function(t){t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody?this.Ln.registerApiErrorToEncrypt(t):this.lr(t)},n.prototype.lr=function(t){if(this.$i<n.Sr){var i={type:In.API_ERROR,date:wt(),args:[this.Ji.anonymize(t)]};this.rr(i),this.$i=this.$i+1}},n.prototype.wr=function(t){if(this.Xi<n.Er){var i={type:In.JAVASCRIPT_ERROR,date:wt(),args:[this.zi.anonymize(t)]};this.rr(i),this.Xi=this.Xi+1}},n.prototype.br=function(t){if(this.Zi<n.Nr){var i={type:In.CUSTOM_ERROR,date:wt(),args:[t]};this.rr(i),this.Zi=this.Zi+1}},n.prototype.Tr=function(t){var i,r;this.isStarted&&(t===on.ETR_SESSION?this.Wi.setQueryParams(((i={})[n.Rr]=n.Or,i)):t===on.ETR_PAGE&&this.Wi.setQueryParams(((r={})[n.kr]=n.Or,r)))},n.prototype.clearEvents=function(){this.xi.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.wr(t)},n.prototype.onCustomErrorEvent=function(t){this.br(t)},n.prototype.onPageEvent=function(t){this.Ir(t)},n.prototype.onUserIdentifierEvent=function(t){var n={userIdentifier:t,date:wt(),keyId:this.M.encryptionPublicKeyId};this.Ln.registerUserIdentifierToEncrypt(n)},n.prototype.onEventTriggerRecording=function(t,n){this.Tr(n),this.Ir(t),this.pushEvents()},n.prototype.Ir=function(t){var i={type:In.PAGE_EVENT,date:wt(),args:[{eventName:csString.prototype.slice.call(t,0,n.Cr)}]};this.xi.addEvent(i)},n.prototype.triggerConsentGranted=function(){var t={date:wt(),type:In.CONSENT_GRANTED};this.xi.addEvent(t)},n.prototype.triggerConsentWithdrawn=function(){var t={date:wt(),type:In.CONSENT_WITHDRAWN};this.xi.addEvent(t)},n.prototype.onRecordingRequestSent=function(t){this.Ar=t},n.prototype.getRecordingStartTimestamp=function(){return this.hr.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.cr.toString()},n.gr="RecordingService",n.Cr=255,n.Er=20,n.Sr=20,n.Nr=20,n.kr="etrp",n.Rr="etrs",n.Or="1",z([Wn("addInitialDom")],n.prototype,"addInitialDom",null),n}(fi),li=function(t){function n(n,i,r,s,e,u){var o=t.call(this)||this;return o.xi=n,o.zt=i,o.M=r,o._r=s,o.Wi=e,o._i=u,o.Lr=!1,o.Pr={},o.Mr=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],s=r.metadata,e=r.events;o.Dr(s.rt)&&o.Wi.send(e,s)}},o.Ur=function(){try{if(!o.Lr)return;o.jr();var t=F(F({},o.Wi.getQueryParams()),o._i.getRequestParameters());if(!o.Dr(t.rt))return;if(o.sendLastMessageBeacon(),0===o.xi.eventsCount())return;o.M.useMalkaPipeline&&(t.hlm="true");var n=o.xi.getEvents();t.let=n[n.length-1].date.toString(),o.zt.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri,".last"),metadata:F(F({},t),{datatype:"json"}),events:o.xi.stringifyEvents()})}catch(t){}},o}return H(n,t),n.prototype.onStart=function(){this.qr(),this.Pr={}},n.prototype.onStop=function(){this.Hr()},n.prototype.recover=function(){this.zt.recover(this.Mr)},n.prototype.addBatchInProgress=function(t,n,i){this.Pr[t]={metadata:F({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.Pr[t]},n.prototype.blockSendingLastMessage=function(){this.Lr=!1},n.prototype.allowSendingLastMessage=function(){this.Lr=!0},n.prototype.sendLastMessageBeacon=function(){this.M.useMalkaPipeline&&this.Lr&&this._r.send()},n.prototype.qr=function(){window.addEventListener("pagehide",this.Ur)},n.prototype.Hr=function(){window.removeEventListener("pagehide",this.Ur)},n.prototype.Dr=function(t){return!this.M.useMalkaPipeline||!!t&&-1===csString.prototype.indexOf.call(t,en.TEMPORARILY_RECORDED)},n.prototype.jr=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.Pr),(function(n){var i=t.Pr[n],r=i.metadata,s=i.events;t.zt.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:F(F({},r),{datatype:"json"}),events:csJSON.stringify(s)})}))},z([Wt("RecordingRecovery")],n.prototype,"recover",null),n}(fi),di=/[^\s]/g;function wi(t){return csString.prototype.replace.call(t,di,"a")}!function(t){t.getShadowRoot=function(t){return t&&(f(n=t)&&csElementshadowRoot.apply(n)&&E(csElementshadowRoot.apply(n)))?t.shadowRoot:null;var n},t.getAllShadowHosts=function t(n){for(var i,r,s=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,null,!1),e=[];r=s.nextNode();)csElementshadowRoot.apply(r)&&(i=csArray.prototype.push).call.apply(i,J([e,r],t(r.shadowRoot),!1));return e}}(ii||(ii={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function s(){return window.innerWidth}function e(){var t=window.csScreen.width;return Mt(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return Mt(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=s,t.screenWidth=e,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(s()),wh:"".concat(r()),sw:"".concat(e()),sh:"".concat(u())}}}(ri||(ri={})),function(t){var n="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){var i=t.getBoundingClientRect();if(0==i.width&&0==i.height)return!0}var r,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||(r=s.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(r)))}function s(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return e(document,i,r)}function e(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var s=ii.getShadowRoot(r);return s&&s!=document.body.getRootNode()&&s!==t?e(s,n,i):r}t.isConnected=function(t){return n(t)},t.isEmpty=function(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=Qn(n.querySelectorAll(t)),s=0,e=ii.getAllShadowHosts(n);s<e.length;s++){var u=Qn(e[s].shadowRoot.querySelectorAll(t));(i=csArray.prototype.push).call.apply(i,J([r],u,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var s=i(n);return null!=s&&t(s)},t.getTopAncestorHiddenByCSS=function(t){var n=null,s=t;do{if(!r(s))break;n=s}while(s=i(s));return n},t.createDeepTreeWalker=function(t,n){var i;void 0===n&&(n=NodeFilter.SHOW_ALL);var r=n|NodeFilter.SHOW_ELEMENT,s=[document.createTreeWalker(t,r,null,!1)];return t instanceof Element&&(null===(i=csElementshadowRoot.apply(t))||void 0===i?void 0:i.firstElementChild)&&csArray.prototype.push.call(s,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1)),{nextNode:function(){for(;s.length>0;){var t=s[s.length-1].nextNode();if(t){var i=ii.getShadowRoot(t);if(i&&csArray.prototype.push.call(s,document.createTreeWalker(i,r,null,!1)),0!=(mi[t.nodeType]&n))return t}else csArray.prototype.pop.call(s)}return null}}},t.getTopElement=s,t.getTopElementFromPoint=e,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+ri.windowOffsetX()<0||n.bottom+ri.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=s(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){if(r(t))return!1;var n=s(t);return t.contains(n)},t.isInViewPort=function(t){var n=s(t);return null!==n&&(t===n||t.contains(n))},t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!l(t)||!t.hasAttribute("href"))||(!(!(f(n=t)&&"select"===n.localName||m(t)||p(t)||function(t){return f(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return f(t)&&"details"===t.localName}(t)&&!function(t){return f(t)&&"summary"===t.localName}(t)))));var n}}(ei||(ei={}));var yi,pi,mi=((si={})[Node.ATTRIBUTE_NODE]=NodeFilter.SHOW_ATTRIBUTE,si[Node.CDATA_SECTION_NODE]=NodeFilter.SHOW_CDATA_SECTION,si[Node.COMMENT_NODE]=NodeFilter.SHOW_COMMENT,si[Node.DOCUMENT_FRAGMENT_NODE]=NodeFilter.SHOW_DOCUMENT_FRAGMENT,si[Node.DOCUMENT_NODE]=NodeFilter.SHOW_ALL,si[Node.DOCUMENT_TYPE_NODE]=NodeFilter.SHOW_DOCUMENT_TYPE,si[Node.ELEMENT_NODE]=NodeFilter.SHOW_ELEMENT,si[Node.ENTITY_NODE]=NodeFilter.SHOW_ENTITY,si[Node.ENTITY_REFERENCE_NODE]=NodeFilter.SHOW_ENTITY_REFERENCE,si[Node.NOTATION_NODE]=NodeFilter.SHOW_NOTATION,si[Node.PROCESSING_INSTRUCTION_NODE]=NodeFilter.SHOW_PROCESSING_INSTRUCTION,si[Node.TEXT_NODE]=NodeFilter.SHOW_TEXT,si),gi=function(){function t(t,n,i,r){this.Fr=t,this.xn=n,this.zr=i,this.Ln=r,this.Vr=!1}var n;return t.prototype.setAnonymization=function(t){this.Br=t},t.prototype.isDOMSerializationInProgress=function(){return this.Vr},t.prototype.serializeInitialDom=function(t,n){if(this.Fr.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){Gt.error(t)}));else{var i=this.Jr(t);n(i)}},t.prototype.Jr=function(t){return{args:[this.Fr.serialize(t,{withAnonymization:this.Br})],date:wt(),type:In.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return V(this,void 0,void 0,(function(){return B(this,(function(n){switch(n.label){case 0:this.Vr=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.Fr.startSerializeAsync(t,{withAnonymization:this.Br})];case 2:return[2,n.sent()];case 3:return this.Vr=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n=this.xn.getId(t.target);if(!n)return null;var i=t.target;if(i.data===t.oldValue)return null;if(v(i)&&this.Ln.shouldEncrypt(i))return this.Ln.registerTextNodeMutationToEncrypt({targetId:n,textNode:i,serializedTextData:wi(i.data),date:t.date}),null;var r=[n,this.zr.getAnonymizedText(this.Br,i,i.data)];return this.Gr(this.Fr)&&this.isDOMSerializationInProgress()&&this.Fr.handleMutationCharacterData(t,r),r},t.prototype.serializeAttachShadowEvent=function(t){var n=this.xn.getId(t.target);return n?[n,this.Fr.serialize(t.shadowRoot)]:null},t.prototype.serializeMutationAttribute=function(t){var n=this.xn.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,s=t.attributeNamespace,e=ei.getAttributeNS(t.target,s,r);e&&(e=this.zr.getAnonymizedAttributeValue(i,this.Br,r,e));var u=[n,s,r,e];return this.Gr(this.Fr)&&this.isDOMSerializationInProgress()&&this.Fr.handleMutationAttribute(t.oldValue?this.zr.getAnonymizedAttributeValue(i,this.Br,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=this.xn.getId(t.target);return i?this.Gr(this.Fr)&&this.isDOMSerializationInProgress()?this.Fr.serializeMutationChildList(t,this.Br,n):{removedNodes:this.Wr(t),addedNodes:this.Kr(t,i,n)}:null},t.prototype.Gr=function(t){return t.isAsynchronous()},t.prototype.Wr=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.xn.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.Kr=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.xn.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=0;u<t.addedNodes.length;u+=1){var o=t.addedNodes[u],h=this.Fr.serialize(o,{excludedNodes:i,withAnonymization:this.Br}),c=i.get(o);c&&i.set(o,c-1),csArray.prototype.push.call(r,[n,s,h])}return r},z([(n="serializeDocumentAsync",function(t,i,r){var s=r.value;r.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!Hn)return r.value=s,s.apply(this,t);Jn(n);var e=s.apply(this,t);return e.then((function(){Gn(n)})),e}})],t.prototype,"serializeDocumentAsync",null),t}(),Ai=function(){function t(t,n,i,r){var s=this;this.Yr=t,this.xn=n,this._n=i,this.vi=r,this.Xr()&&(this.$r=this.Yr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var n=t.context,i=t.args;return s.sendInsertion(n,i)}})),this.Zr()&&(this.Qr=this.Yr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var n=t.context,i=t.args;return s.sendDeletion(n,i)}})),this.ns()&&(this.rs=this.Yr.createDescriptorInterceptor(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return s.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){this.$r&&this.$r.activate(),this.Qr&&this.Qr.activate(),this.rs&&this.rs.activate()},t.prototype.stop=function(){this.$r&&this.$r.deactivate(),this.Qr&&this.Qr.deactivate(),this.rs&&this.rs.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.ss(t);if((null==i?void 0:i.ownerNode)&&(!Ft(i.ownerNode)||!this._n.isSensitiveChild(i.ownerNode))){var r=this.xn.getId(i.ownerNode);if(r){var s=this.es(i.cssRules,t.parentRule),e={date:wt(),type:In.STYLESHEET_CSS_TEXT_UPDATE,args:[r,s,n]};this.Ei(e),this.vi.scanCssString(n)}}},t.prototype.ss=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.es=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.Xr=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.Zr=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t.prototype.ns=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!Ft(t.ownerNode)||!this._n.isSensitiveChild(t.ownerNode))){var s=this.xn.getId(t.ownerNode);if(s){var e={date:wt(),type:In.STYLESHEET_RULE_INSERT,args:jt(r)?[s,i,r]:[s,i]};this.Ei(e),this.vi.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!Ft(t.ownerNode)||!this._n.isSensitiveChild(t.ownerNode))){var r=this.xn.getId(t.ownerNode);if(r){var s={date:wt(),type:In.STYLESHEET_RULE_DELETE,args:[r,i]};this.Ei(s)}}},z([Wt("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),z([Wt("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),z([Wt("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),Si=function(){function t(){this.us=[],this.hs=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var s=csArray.prototype.pop.call(i),e=s.root;null!==e;)if(r&&n&&n.get(e)>0){for(var u=s.nextSibling();null===u&&null!==s.parentNode();)u=s.nextSibling();e=u}else e.__contentsquare_identifier=this.hs,this.hs+=1,f(e)&&csElementshadowRoot.apply(e)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(e),NodeFilter.SHOW_ALL,null,!1)):A(e)&&this.cs(e),e=s.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var s=n.__contentsquare_identifier;if(s&&i.add(s),f(n)&&csElementshadowRoot.apply(n)){var e=csElementshadowRoot.apply(n);this.getIds(e).forEach((function(t){return i.add(t)}))}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.us,t)},t.prototype.cs=function(t){for(var n=0,i=this.us;n<i.length;n++){(0,i[n])(t)}},t}(),Ei="data-cs-mask",bi=function(){function t(t){this._n=t}return t.prototype.beforeSerializeChildren=function(t,n){return this._n.isSensitive(t)||this.fs(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i=this;return this._n.isSensitive(t)&&!g(t)&&(csArray.prototype.push.call(n,this.vs(t)),t.hasAttribute(Ei)||csArray.prototype.push.call(n,document.createAttribute(Ei))),csArray.prototype.filter.call(n,(function(n){return!i._n.isSensitiveAttribute(t,n.name)}))},t.prototype.fs=function(t){return E(t)&&this._n.isSensitive(t.host)},t.prototype.vs=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),i},t}(),Ni=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},Ti=null!==(yi=Ni(Element))&&void 0!==yi?yi:Ni(Node);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(pi||(pi={}));var Ri=function(t){this.csId=t.__contentsquare_identifier,this.format=pi.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var Oi=function(t){function n(n){var i,r=t.call(this,n)||this;return r.attributes=[],r.localName=(i=n,Ti.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r.nodeType=Node.ELEMENT_NODE,r}return H(n,t),n}(Ri),ki=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start",C],Ii=function(){function t(t,n){this.D=t,this.M=n,this.ls=new Set,this.ds=""}return t.prototype.init=function(){var t=this;csArray.prototype.forEach.call(ki,(function(n){t.ls.add(n)})),csArray.prototype.forEach.call(this.M.whitelistedAttributes,(function(n){t.ls.add(n)}))},t.prototype.beforeSerializeChildren=function(t,n,i){return(y(t)||this.ws(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var s=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=s},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?wi(r):this.D.anonymizeEmail(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(y(csNodeparentNode.apply(n)))return i;if(t&&this.ws(csNodeparentNode.apply(n)))return this.D.anonymizeEmail(i)}return t?wi(i):this.D.anonymizeEmail(i)},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.ys(i)||f(s=t)&&"ownerSVGElement"in s?r:n?"":this.D.anonymizeEmail(r);var s},t.prototype.setWhitelistedElementsSelector=function(t){this.ds=t},t.prototype.getWhitelistedElementsSelector=function(){return this.ds},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof Oi&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.ys=function(t){return this.ls.has(t)},t.prototype.ws=function(t){return f(t)&&(t.hasAttribute("data-cs-capture")||this.ps(t))},t.prototype.ps=function(t){return!!this.ds&&O.call(t,this.ds)},t}(),Ci=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.gs=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.gs,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.gs,(function(t,n){return F(F({},n.getRequestParameters()),t)}),{})},t}(),xi=function(){function t(t,n){this.As=t,this.M=n,this.Ss=!1,this.Es=null}return t.prototype.start=function(){this.Ss=!0,this.bs()},t.prototype.stop=function(){this.Ss=!1,this.Ns()},t.prototype.trackActivity=function(){this.Ss||(this.Ss=!0,this.Ts()),this.Ns(),this.bs()},t.prototype.bs=function(){var t=this;this.Es=this.As.create("recorded user inactive",(function(){t.Ss=!1,t.Ns(),t.Rs()}),this.M.pendingInactivityTimeout)},t.prototype.Ns=function(){null!==this.Es&&(this.Es.cancel(),this.Es=null)},t.prototype.isUserActive=function(){return this.Ss},t.prototype.onActivityStopped=function(t){this.Rs=t},t.prototype.onActivityResumed=function(t){this.Ts=t},t}(),_i=function(){function t(t,n,i){var r=this;this.Os=t,this.ks=n,this.Kt=i,this.kn=setTimeout((function(){r.execute()}),this.Kt)}return t.prototype.execute=function(){var t=this;Gt.tryToExecute(this.Os,(function(){t.ks()}))()},t.prototype.cancel=function(){clearTimeout(this.kn)},t}(),Li=function(){function t(){}return t.prototype.create=function(t,n,i){return new _i(t,n,i)},t}(),Pi=function(){function t(t,n,i){var r=this;this.yn=t,this.D=n,this.Is=i,this.Cs=[{boundElement:window,type:"resize",listener:function(){return r.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return r.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return r.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){this.Kn(),this.triggerInitialEvents(),this.Is&&(this.Is.setOnScreenChangedCallback(this.Ei),this.Is.start())},t.prototype.stop=function(){var t;this.Qn(),null===(t=this.Is)||void 0===t||t.stop()},t.prototype.Kn=function(){csArray.prototype.forEach.call(this.Cs,(function(t){return Dn(t)}))},t.prototype.Qn=function(){csArray.prototype.forEach.call(this.Cs,(function(t){return Un(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t,n={type:In.RESIZE,args:[ri.windowWidth(),ri.windowHeight()],date:wt()};this.Ei(n),null===(t=this.Is)||void 0===t||t.onScreenPotentiallyChanged()},t.prototype.hashChangeListener=function(){var t={type:In.HASH_CHANGE,args:[this.D.anonymizeEmail(this.yn.href)],date:wt()};this.Ei(t)},t.prototype.visibilityChangeListener=function(){var t={type:In.VISIBILITY_CHANGE,args:[document.visibilityState],date:wt()};this.Ei(t)},z([Wt("resize")],t.prototype,"resizeListener",null),z([Wt("hashChange")],t.prototype,"hashChangeListener",null),z([Wt("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Mi=function(t){function n(n,i,r,s,e,u){var o=t.call(this)||this;return o.Di=n,o.Mi=i,o.xs=r,o._s=s,o.ai=e,o.li=u,o.Ls=0,o}return H(n,t),n.prototype.init=function(){var t=this;this.Di.onEvent((function(){t.Ps()})),this._s.onRecordingRequestSent((function(){t.Ls+=1,t.Ms()})),this.xs.onActivityStopped((function(){t.Ms()})),this.xs.onActivityResumed((function(){t.Mi.isStarted()||t.Ds()}))},n.prototype.onIframeRecordingUserEvent=function(t){this.Ps()},n.prototype.onStart=function(){this.xs.start()},n.prototype.onStop=function(){this.xs.stop()},n.prototype.Ms=function(){this.Mi.isStarted()&&!this.ai.isDOMSerializationInProgress()&&!this.xs.isUserActive()&&this.Ls>=2&&this.Us()},n.prototype.Ps=function(){this.xs.trackActivity(),this.Ls=0},n.prototype.Us=function(){this.Mi.stop(),this.li.emitRecordingStatusChange()},n.prototype.Ds=function(){this.Mi.start(),this.li.emitRecordingStatusChange()},n}(fi);function Di(t){return t.replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var s=parseInt(i,16);return 55296<=s&&s<=57343||0===s||s>1114111?"":String.fromCodePoint(s)}))}var Ui=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function ji(t){return-1===t.indexOf('"')?'"'+t+'"':-1===t.indexOf("'")?"'"+t+"'":t}function qi(t){var n=[];return function(t,n){var i=t.replace(Ui,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],s=t[9]||t[10]||t[11],e=Di((r||s).trim());return(r?"@import ":"")+"url("+ji(n(e)||e)+")"}))}(t,(function(t){return n.push(t),t})),n}function Hi(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),s=r[0],e=r[1];return e?(Y(s,",")||(e=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(e)),J([Fi(s)],Hi(e),!0)):[Fi(s)]}function Fi(t){return csString.prototype.split.call(t,/,$/)[0]}var zi,Vi=function(){function t(){}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.serializeElementNode=function(t){this.scanElement(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.js(t,n),n},t.prototype.scanElement=function(t){this.qs(t)},t.prototype.scanAttribute=function(t,n){this.qs(t,n)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&y(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.js=function(t,n){var i=this;y(t)&&ti(n,(function(t){v(t)&&i.scanCssString(t.data)}))},t.prototype.qs=function(t,n){this.Hs(t,n)||(this.Fs(t,n),this.zs(t,n))},t.prototype.Hs=function(t,n){return!(!d(t)||n&&"href"!==n||!t.href)&&(this.Vs(t.href),!0)},t.prototype.Fs=function(t,n){w(t)&&(n&&"src"!==n||!t.src||this.Bs(t.src)||null===t.getAttribute("src")||this.Js(t.getAttribute("src"))||this.Vs(t.src),n&&"srcset"!==n||!t.srcset||this.Gs(t.srcset))},t.prototype.zs=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.Js=function(t){return K(t,"#")},t.prototype.Bs=function(t){return K(t,"data:")},t.prototype.scanCssString=function(t){this.Ws(qi(t))},t.prototype.Gs=function(t){this.Ws(Hi(t))},t.prototype.Ws=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.Bs(t)})),(function(t){return!n.Js(t)})),(function(t){return Nt(t)})),(function(t){return n.Vs(t)}))},t.prototype.Vs=function(t){var n={date:wt(),type:In.STATIC_RESOURCE_URL,args:[t]};this.Ei(n)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive"}(zi||(zi={}));var Bi=function(){function t(t){this.Ks=t.performance}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){this.Ys()&&this.Xs()},t.prototype.Xs=function(){var t={args:this.$s(),date:wt(),type:In.PERFORMANCE_TIMINGS};this.Ei(t)},t.prototype.Ys=function(){return!(!this.Ks||!this.Ks.timing)},t.prototype.$s=function(){return[{performanceTiming:zi.REQUEST_START,timestamp:this.Ks.timing.requestStart},{performanceTiming:zi.DOM_INTERACTIVE,timestamp:this.Ks.timing.domInteractive}]},t}(),Ji=function(t){function n(n,i){var r=t.call(this)||this;return r.Yr=n,r.Zs=i,r.Qs=new Map,r}return H(n,t),n.prototype.init=function(){this.te(),this.ne()},n.prototype.ne=function(){var t=this;this.ie=new csMutationObserver((function(n){t.handleMutations(n)}))},n.prototype.te=function(){var t=this;this.se()&&(this.ee=this.Yr.createSyncFunctionInterceptor({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.ue()&&(this.oe=this.Yr.createSyncFunctionInterceptor({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.he=t},n.prototype.onCharacterDataMutation=function(t){this.ce=t},n.prototype.onAttributesMutation=function(t){this.ae=t},n.prototype.onAttachShadowMutation=function(t){this.fe=t},n.prototype.observe=function(t,n){this.isStarted&&this.ie.observe(t,n)},n.prototype.onStart=function(){this.ee&&this.ee.activate(),this.oe&&this.oe.activate()},n.prototype.onStop=function(){this.ee&&this.ee.deactivate(),this.oe&&this.oe.deactivate(),this.Zs.clearQueue(),this.ie.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.Zs.runPendingTasks();var t=this.ie.takeRecords();this.handleMutations(t,!0)}},n.prototype.se=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.ue=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutations=function(t,n){var i=this;void 0===n&&(n=!1);var r=wt(),s=t.length>1?this.ve(t):t;this.Zs.isEmpty()&&this.Qs.clear(),this.le(s);for(var e=function(t){var e=s[t];e.date=r,u.Zs.schedule((function(){i.processMutation(e,i.Qs)}),n)},u=this,o=0;o<s.length;o+=1)e(o)},n.prototype.ve=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(f=t[i]).type){var r=f.target,s=f.attributeNamespace,e=f.attributeName,u="".concat(s||""," ").concat(e),o=n.get(r),h=ei.getAttributeNS(r,s,e)===f.oldValue?"none":"last";if(o)o.has(u)||o.set(u,h);else{var c=new Map;c.set(u,h),n.set(r,c)}}}var a=[];for(i=t.length-1;i>=0;i-=1){var f;if("attributes"===(f=t[i]).type){r=f.target,s=f.attributeNamespace,e=f.attributeName,u="".concat(s||""," ").concat(e);"last"===(o=n.get(r)).get(u)&&(csArray.prototype.push.call(a,f),o.set(u,"none"))}else csArray.prototype.push.call(a,f)}return csArray.prototype.reverse.call(a)},n.prototype.handleAttachShadow=function(t,n){this.fe({shadowRoot:n,date:wt(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.ae(t);break;case"characterData":this.ce(t);break;case"childList":this.he(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.le=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){ti(t.addedNodes,(function(t){var i=n.Qs.get(t);i?n.Qs.set(t,i+1):n.Qs.set(t,1)}))}))},z([Wt("handleMutations")],n.prototype,"handleMutations",null),z([Wn("handleAttachShadow")],n.prototype,"handleAttachShadow",null),z([Wn("processMutation")],n.prototype,"processMutation",null),n}(fi),Gi=function(t){function n(n,i,r){var s=t.call(this,n,i)||this;return s.xn=r,s.de={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},s}return H(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Gn()},n.prototype.Gn=function(){var t=this;this.xn.onDocumentIdentified((function(n){t.observe(n,t.de)}))},n}(Ji);function Wi(){var t,n=(t=new Error).stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?Ki(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":Ki(n[0]))}function Ki(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var Yi,Xi=function(){function t(){this.we=function(t,n){return{context:t,args:n}}}return t.prototype.ye=function(t,n){t.prototype=n.prototype,Object.defineProperty(t,"toString",{value:function(){return n.toString()}})},t.prototype.createSyncFunctionInterceptor=function(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.we:e,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return Gt.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var h=!1,c=i[r];if("function"==typeof c){var a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,r=u(this,t),e=c.apply(this,t);h&&(o&&o.withCallerName&&(i=Wi()),Gt.tryToExecute("SyncFunctionInterceptor",(function(){s(F(F({result:e},r),{callerName:i}))}))());return e};this.ye(a,c),i[r]=a}return{activate:function(){return h=!0},deactivate:function(){return h=!1}}},t.prototype.createAsyncFunctionInterceptor=function(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.we:e,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return Gt.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var h=!1,c=i[r];if("function"==typeof c){var a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return V(this,void 0,void 0,(function(){var n,i,r;return B(this,(function(e){return n=u(this,t),i=c.apply(this,t),h&&(o&&o.withCallerName&&(r=Wi()),Gt.tryToExecute("AsyncFunctionInterceptor",(function(){s(F(F({result:i},n),{callerName:r}))}))()),[2,i]}))}))};this.ye(a,c),i[r]=a}return{activate:function(){return h=!0},deactivate:function(){return h=!1}}},t.prototype.createDescriptorInterceptor=function(t,n,i){var r=!1,s=Object.getOwnPropertyDescriptor(t,n);if(s){if(!s.configurable)return Gt.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,F(F({},s.get?{get:function(){return s.get.apply(this,arguments)}}:{}),s.set?{set:function(){var t=this,n=arguments,e=s.set.apply(this,n);return r&&Gt.tryToExecute("DescriptorInterceptor",(function(){i(t,n[0])}))(),e}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}},t}();!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(Yi||(Yi={}));var $i=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.pe=new Map,i)for(var r=csString.prototype.split.call(i,"."),s=0;s<r.length;s++){var e=csString.prototype.split.call(r[s],"="),u=e[0],o=e[1];this.pe.set(u,o||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this.pe)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(Yi.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,s){var e,u=r.toString(),o="".concat(null===(e=i.constructor)||void 0===e?void 0:e.name,".").concat(u),h=s.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(s.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,J([o],t,!1)),h.bind(this).apply(void 0,t)})}},t}();$i.init();var Zi=function(){function t(){this.ge=[],this.Ae=[]}return t.prototype.isFull=function(){return this.ge.length>=t.Se||this.Ae.length>=t.Se},t.prototype.isEmpty=function(){return 0===this.ge.length&&0===this.Ae.length},t.prototype.addIdInGlobally=function(t){csArray.prototype.push.call(this.ge,t)},t.prototype.addIdInViewPort=function(t){csArray.prototype.push.call(this.Ae,t)},t.prototype.clear=function(){this.ge=[],this.Ae=[]},t.prototype.flushIdsSeenGlobally=function(){var t=J([],this.ge,!0);return this.ge=[],t},t.prototype.flushIdsSeenInViewport=function(){var t=J([],this.Ae,!0);return this.Ae=[],t},t.Se=20,t}();function Qi(t){return"$$"+t}Qi.asyncIterator="$$asyncIterator";var tr=void 0!==window.Symbol?window.Symbol:Qi,nr=!!window.IntersectionObserver&&!!window.IntersectionObserverEntry;function ir(t,n){if(!nr)throw new Error("IntersectionObserver is not supported");if((null==n?void 0:n.delay)<100)throw new Error("Visibility delay should be > 100ms");var i="isVisible"in IntersectionObserverEntry.prototype;return(null==n?void 0:n.trackVisibility)&&(t=i?function(t){return function(n,i){n=csArray.prototype.map.call(n,(function(t){return{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,isVisible:t.isVisible||ei.isInViewPort(t.target),rootBounds:t.rootBounds,target:t.target,time:t.time}})),t(n,i)}}(t):function(t){return function(n,i){csArray.prototype.forEach.call(n,(function(t){return t.isVisible=ei.isInViewPort(t.target)})),t(n,i)}}(t)),new IntersectionObserver(t,n)}var rr,sr=function(){function t(t,n){var i=this;this.Ee=t,this.be=tr("isVisible"),this.Ne=tr("knownElement"),this.Te=tr("Tracked"),this.Re=[],this.Oe=!0,this.ke=function(t){for(var n=0,r=t;n<r.length;n++){var s=r[n];if(s.isVisible){var e=null===s.target[i.be];s.target[i.be]=!0,e&&!i.Ie.delay&&i.Ce(s.target,rr.VisibleInViewPort)}else{switch(ei.isVisibleInDocument(s.target)?rr.VisibleOutsideViewPort:s.isIntersecting?rr.HiddenByAnother:rr.Hidden){case rr.Hidden:case rr.HiddenByAnother:i.xe(s.target);break;case rr.VisibleOutsideViewPort:i.Ce(s.target,rr.VisibleOutsideViewPort)}}}i.Ie.delay&&setTimeout((function(){for(var n=0,r=t;n<r.length;n++){var s=r[n],e=s.isIntersecting&&s.isVisible;s.target[i.be]&&e&&i.Ce(s.target,rr.VisibleInViewPort)}}),i.Ie.delay)},this.Ie=F(F({},er),n)}return t.prototype.onVisibilityChange=function(t){csArray.prototype.push.call(this.Re,t)},t.prototype.stop=function(){this.Oe=!0},t.prototype.start=function(){return V(this,void 0,void 0,(function(){var t,n=this;return B(this,(function(i){return this.Oe=!1,t={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300},this._e=ir(this.ke,t),this.fi=new csMutationObserver((function(t){return n.handleMutations(t)})),this.Ee.onElementAvailable((function(t){n.Oe||n.Le(t)})),[2]}))}))},t.prototype.Pe=function(t){if(t.isConnected&&!ei.areAncestorsHiddenByCSS(t))for(var n,i=this.Ee.getElements(t);n=i.next().value;)this.Le(n)},t.prototype.handleMutations=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){n.Pe(t.target)}))},t.prototype.Le=function(t){if(!t[this.Ne]){this._e.unobserve(t);var n=ei.getTopAncestorHiddenByCSS(t);n?this.xe(n):(t[this.Ne]=!0,this._e.observe(t))}},t.prototype.xe=function(n){delete n[this.be],delete n[this.Ne],this._e.unobserve(n),this.fi.observe(n,{attributeFilter:t.Me,subtree:!0})},t.prototype.Ce=function(t,n){if(n===rr.VisibleInViewPort&&this.Ie.trackOnce){if(t[this.Te])return;t[this.Te]=!0,this._e.unobserve(t)}csArray.prototype.forEach.call(this.Re,(function(i){return i(t,n)}))},t.Me=["style","class","hidden"],z([Wn("TextVisibility.handleMutations")],t.prototype,"handleMutations",null),t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.VisibleOutsideViewPort="VisibleOutsideViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(rr||(rr={}));var er={delay:1e3,trackOnce:!0},ur=function(){function t(t){this.mn=t}return t.prototype.push=function(t){var n=this;this.De||(this.De=[],setTimeout((function(){return n.flush()}))),csArray.prototype.push.call(this.De,t)},t.prototype.flush=function(){csArray.prototype.forEach.call(this.De,this.mn),this.De=void 0},z([Wt("MicrotaskBuffer.flush")],t.prototype,"flush",null),t}(),or=function(){function t(t){var n=this;this._n=t,this.Ue=!1,this.De=new ur((function(t){return t.isConnected&&n.je(t)}))}return t.prototype.onElementAvailable=function(t){this.je=t},t.prototype.serializeTextNode=function(t,n,i){if(i.withAnonymization||!this.Ue)return n;var r=this.qe(t);return r&&this.De.push(r),n},t.prototype.getElements=function(t){var n,i,r;return B(this,(function(s){switch(s.label){case 0:n=ei.createDeepTreeWalker(t,NodeFilter.SHOW_TEXT),s.label=1;case 1:return(i=n.nextNode())?(r=this.qe(i))?[4,r]:[3,3]:[3,4];case 2:s.sent(),s.label=3;case 3:return[3,1];case 4:return[2]}}))},t.prototype.start=function(){this.Ue=!0},t.prototype.stop=function(){this.Ue=!1},t.prototype.qe=function(t){var n=ei.getParentElement(t);return!n||!n.isConnected||this._n.isSensitive(n)||this._n.isSensitiveChild(n)||y(n)||g(n)||ei.isEmpty(t.data)?null:n},t}(),hr=function(){function t(t,n){var i=this;this._n=t,this.He=n,this.Ue=!1,this.Fe=new Set,this.ze=new Set,this.Ve=new Zi,this.Ce=function(t,n){switch(n){case rr.VisibleInViewPort:i.onVisibleInViewPort(t);break;case rr.VisibleOutsideViewPort:i.onVisibleOutsideViewPort(t)}i.Ve.isFull()&&i.Be()}}return t.isSupported=function(){return!!window.IntersectionObserver},t.prototype.serializeTextNode=function(n,i,r){return this.Ee||(Gt.warn("TextVisibility: Source was not initialized. (".concat(t.isSupported(),")")),this.start()),this.Ee.serializeTextNode(n,i,r)},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){this.Ue||(this.Ee=new or(this._n),this.Ee.start(),this.Je=new sr(this.Ee,{delay:this.He}),this.Je.start(),this.Je.onVisibilityChange(this.Ce),this.Ue=!0)},t.prototype.stop=function(){this.Ue&&(this.Ee.stop(),this.Je&&this.Je.stop(),this.Ve.clear(),this.Fe.clear(),this.ze.clear(),this.Ue=!1)},t.prototype.flushEvents=function(){this.Ue&&this.Be()},t.prototype.onVisibleInViewPort=function(t){var n=Si.getId(t);this.onVisibleOutsideViewPort(t),this.Fe.has(n)||(this.Fe.add(n),this.Ve.addIdInViewPort(n))},t.prototype.onVisibleOutsideViewPort=function(t){var n=Si.getId(t);this.ze.has(n)||(this.ze.add(n),this.Ve.addIdInGlobally(n))},t.prototype.Be=function(){if(!this.Ve.isEmpty()){var t={visibleGlobally:this.Ve.flushIdsSeenGlobally(),visibleInViewPort:this.Ve.flushIdsSeenInViewport()},n={type:In.TEXT_VISIBILITY,date:wt(),args:[t]};this.Ei(n)}},z([$i.Log("VisibleInViewport")],t.prototype,"onVisibleInViewPort",null),z([$i.Log("VisibleInDocument")],t.prototype,"onVisibleOutsideViewPort",null),t}(),cr=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.Ge=[],r.We=[],r}return H(n,t),n.prototype.setRequestPayloadProvider=function(t){this.Ke=t},n.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.Ge,t)},n.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.We,t)},n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();t.ct=Qt.UNCOMPRESSED;var n=tt.toQuery(t),i=this.Ye();this.Xe(n,i)?csArray.prototype.forEach.call(this.Ge,(function(t){return t()})):csArray.prototype.forEach.call(this.We,(function(n){return n(t)})),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.Ye=function(){return this.Ke?this.Ke.getRequestPayload():""},n.prototype.Xe=function(t,n){return void 0!==csNavigatorsendBeacon&&csNavigatorsendBeacon("".concat(this.domainUri,"/").concat(this.path,"?").concat(t),n)},n}(st);function ar(t,n){if(!(!!t&&Dt(t)))return Gt.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return O.call(n,t),!0}catch(n){return Gt.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}var fr=function(){function t(t,n,i,r,s,e,u,o,h,c){this.xn=t,this.C=n,this.$e=i,this.Ze=r,this.Qe=s,this.tu=e,this.nu=u,this.iu=o,this.ru=h,this.su=c,this.eu=8e3,this.ou=64e3,this.hu=2e3,this.au=2e3,this.fu="",this.vu=document.createElement("div"),this.lu=null,this.du=!1,this.wu="[data-cs-encrypt]"}return t.prototype.getEncryptionSelectors=function(){return this.wu},t.prototype.setEncryptionSelectors=function(t){if(ar(t,this.vu)){for(var n=csString.prototype.split.call(this.wu,","),i=0,r=csString.prototype.split.call(t,",");i<r.length;i++){var s=r[i];-1===csArray.prototype.indexOf.call(n,s)&&csArray.prototype.push.call(n,s)}this.wu=csArray.prototype.join.call(n,",")}},t.prototype.shouldEncrypt=function(t){switch(t.nodeType){case Node.ELEMENT_NODE:return!(!p(t)&&!m(t)||!O.call(t,this.wu)||"password"===t.type);case Node.COMMENT_NODE:case Node.TEXT_NODE:var n=t.parentElement;return!!(n&&v(t)&&O.call(n,this.wu));default:return!1}},t.prototype.onTextNodeToEncrypt=function(t){this.yu=t},t.prototype.onInputNodeToEncrypt=function(t){this.pu=t},t.prototype.onUserIdentifierToEncrypt=function(t){this.mu=t},t.prototype.onApiErrorToEncrypt=function(t){this.gu=t},t.prototype.init=function(){var t=this;this.Au()&&(this.Su=new TextEncoder,this.Qe.onSerializeData((function(n){return t.Eu(n)})),this.tu.onSerializeData((function(n){return t.bu(n)})),this.nu.onSerializeData((function(n){return t.Nu(n)})),this.iu.onSerializeData((function(n){return t.Tu(n)})),this.ru.onSerializeData((function(n){return t.Ru(n)})),this.Ou(this.C.encryptionPublicKey))},t.prototype.Ou=function(t){return V(this,void 0,void 0,(function(){var n;return B(this,(function(i){switch(i.label){case 0:return[4,this.$e.importKey(t)];case 1:return n=i.sent(),this.du=!0,n?(this.lu=n,this.Qe.serializeDataFromBuffer(),this.iu.serializeDataFromBuffer()):(this.Qe.clear(),this.iu.clear(),Gt.warn("Fail to import public key '".concat(t,"'"))),this.tu.serializeDataFromBuffer(),this.nu.serializeDataFromBuffer(),this.ru.serializeDataFromBuffer(),[2]}}))}))},t.prototype.registerTextNodeToEncrypt=function(t){this.Au()&&(this.du?this.Eu(t):this.Qe.addData(t))},t.prototype.registerTextNodeMutationToEncrypt=function(t){this.Au()&&(this.du?this.bu(t):this.tu.addData(t))},t.prototype.registerInputNodeToEncrypt=function(t){this.Au()&&(this.du?this.Nu(t):this.nu.addData(t))},t.prototype.registerUserIdentifierToEncrypt=function(t){this.Au()&&(this.du?this.Tu(t):this.iu.addData(t))},t.prototype.registerApiErrorToEncrypt=function(t){this.Au()?this.du?this.Ru(t):this.ru.addData(t):this.ku(t)},t.prototype.Au=function(){return this.C.encryptionEnabled&&!!this.C.encryptionPublicKey&&this.C.encryptionPublicKeyId>0&&this.$e.isSupported()&&this.Ze.isSupported()},t.prototype.Eu=function(t){var n=this,i=t.textNode,r=this.xn.getId(i);if(r&&this.lu){var s=F(F({},t),{targetId:r,date:wt()});this.Iu(s,(function(t){return t.textNode.data}),(function(){return Gt.warn("Fail to encrypt text node data")}),(function(t,i){return n.Cu(t,i)}))}},t.prototype.bu=function(t){var n=this;if(!this.lu)return this.xu(t);this.Iu(t,(function(t){return t.textNode.data}),(function(){Gt.warn("Fail to encrypt text node data - Text node processed as MUTATION_CHARACTER_DATA"),n.xu(t)}),(function(t,i){return n.Cu(t,i)}))},t.prototype.Nu=function(t){var n=this;if(!this.lu)return this._u(t);this.Iu(t,(function(t){return t.targetValue}),(function(){Gt.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),n._u(t)}),(function(t,i){return n.Lu(t,i)}))},t.prototype.Tu=function(t){var n=this;this.lu&&this.Iu(t,(function(t){return t.userIdentifier}),(function(){Gt.warn("Fail to encrypt userIdentifier")}),(function(t,i){return n.Pu(t,i)}))},t.prototype.Iu=function(t,n,i,r){return V(this,void 0,void 0,(function(){var s,e;return B(this,(function(u){switch(u.label){case 0:return s=n(t),[4,this.$e.encrypt({publicKey:this.lu},s)];case 1:return(e=u.sent())?(r(t,e),[2]):(i(t),[2])}}))}))},t.prototype.xu=function(t){var n=t.targetId,i=t.serializedTextData,r={date:t.date,args:[n,i],type:In.MUTATION_CHARACTER_DATA};this.yu(r)},t.prototype._u=function(t){var n=t.targetId,i=t.targetValue,r={date:t.date,args:[n,csString.prototype.replace.call(i,/\S/g,"")],type:In.INPUT_TEXT};this.pu(r)},t.prototype.Cu=function(t,n){var i=t.targetId,r=t.serializedTextData,s={date:t.date,args:[i,r,n,this.C.encryptionPublicKeyId],type:In.MUTATION_ENCRYPTED_CHARACTER_DATA};this.yu(s)},t.prototype.Lu=function(t,n){var i=t.targetId,r=t.targetValue,s={date:t.date,args:[i,csString.prototype.replace.call(r,/\S/g,""),n,this.C.encryptionPublicKeyId],type:In.INPUT_ENCRYPTED_TEXT};this.pu(s)},t.prototype.Pu=function(t,n){var i={type:In.USER_IDENTIFIER,args:[n,t.keyId],date:t.date};this.mu(i)},t.prototype.Ru=function(t){return V(this,void 0,void 0,(function(){var n,i,r,s,e,u,o,h,c,a,f;return B(this,(function(v){switch(v.label){case 0:return this.lu?[4,this.Ze.generateEncryptionKey()]:(this.ku(t),[2]);case 1:if(n=v.sent(),i=this.Ze.generateInitializationVector(),null===n||null===i)return this.ku(t),[2];v.label=2;case 2:return v.trys.push([2,19,,20]),t.customRequestHeaders?this.Mu(t.customRequestHeaders,this.eu)?[3,3]:(t.customRequestHeaders="",[3,5]):[3,5];case 3:return r=t,[4,this.Du(n,i,t.customRequestHeaders)];case 4:r.customRequestHeaders=v.sent(),v.label=5;case 5:return t.customResponseHeaders?this.Mu(t.customResponseHeaders,this.eu)?[3,6]:(t.customResponseHeaders="",[3,8]):[3,8];case 6:return s=t,[4,this.Du(n,i,t.customResponseHeaders)];case 7:s.customResponseHeaders=v.sent(),v.label=8;case 8:return t.queryParameters?this.Mu(t.queryParameters,this.au)?[3,9]:(t.queryParameters=this.fu,[3,11]):[3,11];case 9:return e=this.su.compressSync(t.queryParameters,"base64"),u=t,[4,this.Du(n,i,e)];case 10:u.queryParameters=v.sent(),v.label=11;case 11:return t.requestBody?this.Mu(t.requestBody,this.ou)?[3,12]:(t.requestBody=this.fu,[3,14]):[3,14];case 12:return o=this.su.compressSync(t.requestBody,"base64"),h=t,[4,this.Du(n,i,o)];case 13:h.requestBody=v.sent(),v.label=14;case 14:return t.responseBody?this.Mu(t.responseBody,this.hu)?[3,15]:(t.responseBody=this.fu,[3,17]):[3,17];case 15:return c=this.su.compressSync(t.responseBody,"base64"),a=t,[4,this.Du(n,i,c)];case 16:a.responseBody=v.sent(),v.label=17;case 17:return f=t,[4,this.Uu(n,this.lu)];case 18:return f.secret=v.sent(),[3,20];case 19:return v.sent(),this.ku(t),[2];case 20:return t.initializationVector=this.Ze.exportInitializationVector(i),t.encryptionKeyId=this.C.encryptionPublicKeyId,this.gu(t),[2]}}))}))},t.prototype.Mu=function(t,n){return this.Su.encode(t).byteLength<=n},t.prototype.ku=function(t){t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",this.gu(t)},t.prototype.Du=function(t,n,i){return V(this,void 0,void 0,(function(){var r;return B(this,(function(s){switch(s.label){case 0:return[4,this.Ze.encrypt({encryptionKey:t,initializationVector:n},i)];case 1:if(!(r=s.sent()))throw new Error("Encryption failed");return[2,r]}}))}))},t.prototype.Uu=function(t,n){return V(this,void 0,void 0,(function(){var i,r;return B(this,(function(s){switch(s.label){case 0:return[4,this.Ze.exportSecret(t)];case 1:if(!(i=s.sent()))throw new Error("Export secret failed");return[4,this.$e.encrypt({publicKey:n},i)];case 2:if(!(r=s.sent()))throw new Error("Encrypt secret failed");return[2,r]}}))}))},t}(),vr=function(){function t(t){this.Ln=t}return t.prototype.serializeTextNode=function(t,n){this.Ln.shouldEncrypt(t)&&(n.data=wi(t.data),this.Ln.registerTextNodeToEncrypt({textNode:t,serializedTextData:n.data}))},t}(),lr=function(){function t(){this.ju=[]}return t.prototype.onSerializeData=function(t){this.qu=t},t.prototype.addData=function(t){csArray.prototype.push.call(this.ju,t)},t.prototype.serializeDataFromBuffer=function(){for(;this.ju.length>0;){var t=csArray.prototype.shift.call(this.ju);this.qu(t)}},t.prototype.clear=function(){this.ju=[]},t}();function dr(t){for(var n=new Uint8Array(t),i="",r=0;r<n.byteLength;r+=1)i+=csString.fromCodePoint(n[r]);return i}function wr(t){return function(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,s=t.length;r<s;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}(self.atob(t))}var yr,pr,mr=function(){function t(t){this.crypto=t,this.Hu=!1}return t.prototype.init=function(){this.Hu=this.canSupportEncryption(),this.Hu&&(this.textEncoder=new TextEncoder)},t.prototype.isSupported=function(){return this.Hu},t.prototype.canSupportEncryption=function(){return!!(this.crypto&&this.crypto.subtle&&this.crypto.subtle.encrypt&&window.self.CryptoKey&&window.self.TextEncoder&&csString.fromCodePoint)},t}(),gr="AES-CTR",Ar=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.exportInitializationVector=function(t){return dr(t)},n.prototype.exportSecret=function(t){var n;return V(this,void 0,void 0,(function(){var i;return B(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.exportKey("jwk",t)];case 2:return i=r.sent(),[2,null!==(n=i.k)&&void 0!==n?n:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateEncryptionKey=function(){return V(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:if(!this.isSupported())return[2,null];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.crypto.subtle.generateKey({name:gr,length:128},!0,["encrypt","decrypt"])];case 2:return[2,t.sent()];case 3:return t.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateInitializationVector=function(){return this.isSupported()?this.crypto.getRandomValues(new Uint8Array(16)):null},n.prototype.encrypt=function(t,n){return V(this,void 0,void 0,(function(){var i,r;return B(this,(function(s){switch(s.label){case 0:if(!this.isSupported())return[2,null];i={counter:t.initializationVector,name:gr,length:64},r=this.textEncoder.encode(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt(i,t.encryptionKey,r)];case 2:return[2,dr(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.getRandomValues&&!!this.crypto.subtle.generateKey&&!!this.crypto.subtle.exportKey},n}(mr),Sr="RSA-OAEP",Er=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.importKey=function(t){return V(this,void 0,void 0,(function(){return B(this,(function(n){switch(n.label){case 0:if(!this.isSupported())return[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.crypto.subtle.importKey("spki",wr(t),{name:Sr,hash:"SHA-256"},!1,["encrypt"])];case 2:return[2,n.sent()];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.encrypt=function(t,n){return V(this,void 0,void 0,(function(){var i;return B(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];if(!(i=this.Fu(n,190)))return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt({name:Sr},t.publicKey,i)];case 2:return[2,dr(r.sent())];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.Fu=function(t,n){for(var i=0,r=0,s=0;s<t.length;s++){var e=csString.prototype.codePointAt.call(t,s);if(!e)return null;var u=this.zu(e);if(u+i>n)break;r++,i+=u}var o=csString.prototype.slice.call(t,0,r);return this.textEncoder.encode(o)},n.prototype.zu=function(t){return t<=127?1:t<=2047?2:t<=65535?3:4},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.subtle.importKey},n}(mr);!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(yr||(yr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(pr||(pr={}));var br=function(){function t(t,n,i){this.Vu=t,this.xn=n,this._n=i}return t.prototype.start=function(){var n=this;this.Vu.subscribe(t.Bu,(function(t){return n.Ju(t)}))},t.prototype.stop=function(){this.Vu.unsubscribe(t.Bu)},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.Ju=function(t){if(t.target&&(!f(t.target)||!this._n.isSensitiveChild(t.target))){var n=this.xn.getId(t.target);if(n)switch(t.type){case yr.DRAG:case yr.FLICK:this.Gu(xn.SWIPE,t,n);break;case yr.LONG_PRESS:this.Gu(xn.LONG_PRESS,t,n);break;case yr.TAP:this.Gu(xn.TAP,t,n);break;case yr.PINCH_IN:this.Gu(xn.PINCH_IN,t,n);break;case yr.PINCH_OUT:this.Gu(xn.PINCH_OUT,t,n)}}},t.prototype.Gu=function(t,n,i){var r=this.Wu(n,t),s={type:In.GESTURE_RECOGNITION,args:[i,r],date:wt()};this.Ei(s)},t.prototype.Wu=function(t,n){var i={type:n};return t.direction&&(i.direction=t.direction),t.distance&&(i.distance=t.distance),t.velocity&&(i.velocity=t.velocity),i},t.Bu="RecordingGesturesTracker",t}(),Nr=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=Node.DOCUMENT_TYPE_NODE,i}return H(n,t),n}(Ri),Tr=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},Rr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=Node.TEXT_NODE,i}return H(n,t),n}(Ri),Or=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=Node.CDATA_SECTION_NODE,i}return H(n,t),n}(Ri),kr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=Node.COMMENT_NODE,i}return H(n,t),n}(Ri),Ir=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=Node.DOCUMENT_NODE,r}return H(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(Ri),Cr=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=Node.DOCUMENT_FRAGMENT_NODE,i}return H(n,t),n}(Ri),xr=function(){function t(n){for(var i=function(i){var s=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return t[i]})),(function(t){return function(n,r,s,e){return t[i](n,r,s,e)}})),e=t.Ku(s);r[i]=e},r=this,s=0,e=t.Yu;s<e.length;s++){i(e[s])}}return t.create=function(n){return new t(n)},t.Ku=function(t){var n=csArray.prototype.map.call(t,(function(t){return function(n,i,r,s){return t(n,i,r,s)||i}})),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4];switch(t.length){case 1:return t[0];case 2:return function(t,n,s,e){return r(t,i(t,n,s,e),s,e)};case 3:return function(t,n,e,u){return s(t,r(t,i(t,n,e,u),e,u),e,u)};case 4:return function(t,n,u,o){return e(t,s(t,r(t,i(t,n,u,o),u,o),u,o),u,o)};case 5:return function(t,n,o,h){return u(t,e(t,s(t,r(t,i(t,n,o,h),o,h),o,h),o,h),o,h)};default:return function(n,i,r,s){for(var e=i,u=0;u<t.length;u++)e=t[u](n,i,r,s)||e;return i}}},t.Yu=["beforeSerializeAttributes","beforeSerializeChildren","afterSerialize","afterSerializeShadowRoot","serializeElementNode","serializeAttribute","serializeTextNode","serializeCDATASectionNode","serializeCommentNode","serializeShadowRootNode"],t}(),_r=function(){function t(t){this.Xu=xr.create(t)}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serialize=function(t,n){var i,r=F({},n),s=t.nodeType;switch(s){case Node.ELEMENT_NODE:i=this.$u(t,r);break;case Node.TEXT_NODE:i=this.Zu(t,r);break;case Node.CDATA_SECTION_NODE:i=this.Qu(t,r);break;case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:i=this.no(t,r);break;case Node.DOCUMENT_TYPE_NODE:i=new Nr(t);break;case Node.DOCUMENT_NODE:i=this.io(t,r);break;case Node.DOCUMENT_FRAGMENT_NODE:i=this.ro(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(s,")"))}return this.Xu.afterSerialize(t,i,r),i},t.prototype.$u=function(t,n){var i=new Oi(t);this.Xu.serializeElementNode(t,i,n),i.attributes=this.so(t,n);var r=csElementshadowRoot.apply(t);return r&&(i.shadowRoot=this.eo(r,n)),i.children=this.uo(t,n),i},t.prototype.so=function(t,n){var i=Qn(t.attributes);i=this.Xu.beforeSerializeAttributes(t,i,n);for(var r=0;r<i.length;++r){var s=i[r];i[r]=this.oo(t,s,n)}return i},t.prototype.oo=function(t,n,i){var r=new Tr(n);return this.Xu.serializeAttribute(t,n,r,i),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?ni(r,(function(t){return!n.excludedNodes.get(t)})):r,Qn(r=this.Xu.beforeSerializeChildren(t,r,n))},t.prototype.uo=function(t,n){if(n.skipChildrenSerialization)return[];for(var i=this.runBeforeSerializeChildrenHook(t,n),r=0;r<i.length;++r){var s=i[r];i[r]=this.serialize(s,n)}return i},t.prototype.Zu=function(t,n){var i=new Rr(t);return this.Xu.serializeTextNode(t,i,n),i},t.prototype.Qu=function(t,n){var i=new Or(t);return this.Xu.serializeCDATASectionNode(t,i,n),i},t.prototype.no=function(t,n){var i=new kr(t);return this.Xu.serializeCommentNode(t,i,n),i},t.prototype.io=function(t,n){var i=new Ir(t);return i.children=this.uo(t,n),i},t.prototype.eo=function(t,n){var i=new Cr(t);return this.Xu.serializeShadowRootNode(t,i,n),i.children=this.uo(t,n),this.Xu.afterSerializeShadowRoot(t,i,n),i},t.prototype.ro=function(t,n){if(t.mode)return this.eo(t,n);throw new Error("Not implemented yet.")},t}();function Lr(){return V(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var Pr=function(){function t(t){this.xn=t,this.ho=!1,this.co=new Map,this.ao={},this.fo=new Map,this.vo=new Map,this.lo=new Set,this.do=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.ho?ni(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.ho)return n;var r=this.xn.getId(t);if(!r)return n;var s=this.vo.get(r);return s?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=s.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.ho){var r=this.fo.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.ho){var i=this.fo.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.ho&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.wo(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.ho&&(i.skipRegisterNode||this.wo(n,i))},t.prototype.enable=function(){this.ho=!0,this.yo()},t.prototype.disable=function(){this.ho=!1,this.yo()},t.prototype.deleteNode=function(t){this.co.delete(t)},t.prototype.setDefaultSerializationOptions=function(t){this.ao=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.co.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.xn.getId(t);if(i)return null===(n=this.co.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.xn.getId(t);return i&&(null===(n=this.co.get(i))||void 0===n?void 0:n.options)||this.ao},t.prototype.registerInitialCharacterData=function(t,n){this.fo.get(t)||this.fo.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var s=this.vo.get(t),e="".concat(i).concat(n||"");if(s){if(s.has(e))return}else s=new Map,this.vo.set(t,s);var u={name:i,namespaceURI:n||"",value:r};s.set(e,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.xn.getId(n);r&&this.lo.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.xn.getId(i),s=this.xn.getId(t);if(r&&s){var e=this.do.get(r);if(e)csArray.prototype.push.call(e.removedNodeIds,s);else{for(var u=[],o=n?this.xn.getId(n):null,h=0;h<csNodechildNodes.apply(i).length;h+=1){var c=this.xn.getId(csNodechildNodes.apply(i)[h]);c&&!this.lo.has(c)&&(o&&c===o&&csArray.prototype.push.call(u,s),csArray.prototype.push.call(u,c))}null===o&&csArray.prototype.push.call(u,s);var a=[s];this.do.set(r,{childNodeIds:u,removedNodeIds:a})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&Mr(r)&&this.po(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.xn.getId(t);return!!n&&this.lo.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.xn.getId(n),r=this.xn.getId(t);if(!i||!r)return-1;var s=this.do.get(i);return s?csArray.prototype.indexOf.call(s.childNodeIds,r):-1},t.prototype.yo=function(){this.co.clear(),this.fo.clear(),this.vo.clear(),this.lo.clear(),this.do.clear()},t.prototype.wo=function(t,n){t.csId&&(this.mo(t.csId,t,n),this.Ao(t.csId,t),this.co.set(t.csId,{serializedNode:t,options:n}))},t.prototype.mo=function(t,n,i){if(function(t){return t instanceof Oi}(n)){var r=this.vo.get(t);if(r){for(var s=0,e=n.attributes;s<e.length;s++){var u=e[s],o="".concat(u.name).concat(u.namespaceURI||""),h=r.get(o);h&&null!==h.value&&(u.value=h.value,r.delete(o))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.po=function(t,n,i){t>=0?csArray.prototype.splice.call(n.children,t,0,i):"artificial"in i&&csArray.prototype.push.call(n.children,i)},t.prototype.Ao=function(t,n){var i;if(Mr(n)){var r=this.do.get(t);if(r)for(var s=0,e=r.removedNodeIds;s<e.length;s++){var u=e[s],o=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==o){var h=null===(i=this.co.get(u))||void 0===i?void 0:i.serializedNode;void 0!==h&&this.po(o,n,h)}}}},t}();function Mr(t){return"children"in t}var Dr,Ur={taskTime:25},jr=function(t){function n(n,i,r,s){void 0===r&&(r=new Pr(i)),void 0===s&&(s=Ur);var e=t.call(this,J([r],n,!0))||this;return e.So=i,e.Eo=r,e.bo=s,e.To=0,e.Ro=e.bo.taskTime,e}return H(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],s=n[2];this.Eo.getSerializedNodeById(i)||this.Eo.registerInitialAttributes(i,r,s,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.Eo.getSerializedNodeById(i)||this.Eo.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.Kr(t,n,i);return this.Oo(t),{removedNodes:this.Wr(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),V(this,void 0,void 0,(function(){return B(this,(function(i){return this.To+=1,this.Eo.setDefaultSerializationOptions(n),[2,this.ko(t,n)]}))}))},n.prototype.Kr=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.So.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=this.So.getId(t.target),o=0;o<t.addedNodes.length;o+=1){var h=t.addedNodes[o],c=this.serialize(h,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),a=i.get(h);a&&i.set(h,a-1),csArray.prototype.push.call(r,[u,s,c])}return r},n.prototype.Oo=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.Eo.markAddedTreeAsProcessed(i)}},n.prototype.Io=function(t,n){if(!n)return-1;var i=this.Eo.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.Wr=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var s=t.removedNodes[r];if(this.Eo.markRemovedNodeAsProcessed(s,t.nextSibling,t.target),this.Co(s))this.xo(s)&&this._o(s,n);else{var e=this.serialize(s,{withAnonymization:n});if(this.xo(t.target)){var u=this.Io(s,t.target);this.Eo.addSerializedChildToParent(t.target,u,e)}}var o=this.So.getId(s);o&&csArray.prototype.push.call(i,[o])}return i},n.prototype._o=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.xo(r))this._o(r,n);else if(!this.Eo.isAddedNodeDuringSerialization(r)){var s=this.serialize(r,{withAnonymization:n}),e=this.Io(r,t);this.Eo.addSerializedChildToParent(t,e,s)}}},n.prototype.xo=function(t){return!!this.Eo.getSerializedNodeByNode(t)},n.prototype.Co=function(t){return this.xo(t)||this.Eo.isAddedNodeDuringSerialization(t)},n.prototype.ko=function(t,n){return void 0===n&&(n={}),V(this,void 0,void 0,(function(){var i,r,s,e,u,o,h,c,a,v,l;return B(this,(function(d){switch(d.label){case 0:return i=this.To,r=wt(),this.Eo.enable(),n.skipChildrenSerialization=!0,s=[t],[4,Lr()];case 1:if(d.sent(),i!==this.To)return[2,null];this.Lo=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(s.length>0))return[3,7];e=csArray.prototype.pop.call(s),u=this.Eo.getOptions(e),o=this.runBeforeSerializeChildrenHook(e,u),h=csArray.prototype.shift.call(o),d.label=3;case 3:return h?csDate.now()-this.Lo>this.Ro?[4,Lr()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.To)return[2,null];this.Lo=csDate.now(),d.label=5;case 5:return this.Co(h)?(h=csArray.prototype.shift.call(o),[3,3]):(csArray.prototype.push.call(s,h),c=this.serialize(h,u),a=this.Io(h,e),this.Eo.addSerializedChildToParent(e,a,c),f(h)&&csElementshadowRoot.apply(h)&&(v=csElementshadowRoot.apply(h),csArray.prototype.push.call(s,v)),h=csArray.prototype.shift.call(o),[3,3]);case 6:return[3,2];case 7:if(!(l=this.Eo.getSerializedNodeByNode(t)))throw this.Eo.disable(),new Error("traverseAndSerialize : fail to serialize");return this.Eo.disable(),[2,{args:[l],date:r,type:In.INITIAL_DOM}]}}))}))},n}(_r),qr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.isAsynchronous=function(){return!1},n}(_r),Hr=function(){function t(){this.Po=!1}return t.prototype.isSupported=function(){return"object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise},t.prototype.start=function(){!this.Po&&this.isSupported()&&(this.Mo?this.Mo.clear():this.Mo=new Set,this.Po=!0)},t.prototype.stop=function(){this.Po&&(this.Po=!1)},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.Do=function(t){return V(this,void 0,void 0,(function(){return B(this,(function(n){switch(n.label){case 0:return this.Mo.has(t)?[2]:(this.Mo.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.Uo(t),[2]}}))}))},t.prototype.Uo=function(t){if(this.Po){var n={type:In.CUSTOM_ELEMENT_REGISTRATION,date:wt(),args:[t]};this.Ei(n)}},t.prototype.getProcessor=function(){return new(function(){function t(t){this.jo=t}return t.prototype.serializeElementNode=function(t){(function(t){return f(t)&&csString.prototype.indexOf.call(t.tagName,"-")>0&&csArray.prototype.indexOf.call(b,csString.prototype.toLocaleLowerCase.call(t.tagName))<0})(t)&&this.jo.Do(csString.prototype.toLowerCase.call(t.tagName))},t}())(this)},t}(),Fr=function(){function t(t){this.xi=t}return t.prototype.getRequestPayload=function(){var t=this.xi.extractEvents(In.JAVASCRIPT_ERROR,In.API_ERROR,In.CUSTOM_ERROR);return t.length?nt(t):""},t}(),zr=function(){function t(){this.qo=new Map,this.Ho=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!y(t))return n;var i=this.Fo(t);if(null===i||0===i.length)return n;if(ei.isEmpty(t.textContent)){var r=Qn(n);return csArray.prototype.push.call(r,this.zo(i)),r}var s=this.Vo(t);if(s===i.length)return n;for(var e=new csArray(i.length-s),u=s,o=0;u<i.length;u+=1,o+=1)e[o]=i[u];r=Qn(n);return csArray.prototype.push.call(r,this.zo(e)),r},t.prototype.Vo=function(t){var n=this.qo.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.Ho.head.appendChild(i);var r=this.Fo(i);return n=r?r.length:0,this.qo.set(t.textContent,n),this.Ho.head.removeChild(i),n},t.prototype.Fo=function(t){try{var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.zo=function(t){var n="";ti(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),Vr=function(){function t(t,n){this.Yr=t,this.xn=n,this.Bo=1}return t.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){var n=this;t.isAdoptedStyleSheetsSupported()&&(this.Jo=new Set,this.$r=this.Yr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var i=t.context,r=t.args;n.Go(i,r)}}),this.Qr=this.Yr.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var i=t.context,r=t.args;n.Wo(i,r)}}),this.Ko=this.Yr.createDescriptorInterceptor(window.ShadowRoot.prototype,"adoptedStyleSheets",this.Yo.bind(this)),this.Xo=this.Yr.createDescriptorInterceptor(window.Document.prototype,"adoptedStyleSheets",this.Yo.bind(this)))},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){t.isAdoptedStyleSheetsSupported()&&(this.$r&&this.$r.activate(),this.Qr&&this.Qr.activate(),this.Ko&&this.Ko.activate(),this.Xo&&this.Xo.activate())},t.prototype.stop=function(){t.isAdoptedStyleSheetsSupported()&&(this.Jo.clear(),this.$r&&this.$r.deactivate(),this.Qr&&this.Qr.deactivate(),this.Ko&&this.Ko.deactivate(),this.Xo&&this.Xo.deactivate())},t.prototype.serializeDocumentNode=function(t){t.adoptedStyleSheets&&this.Yo(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){t.adoptedStyleSheets&&this.Yo(t,t.adoptedStyleSheets)},t.prototype.Yo=function(t,n){var i=this;csArray.prototype.forEach.call(n,(function(t){return i.$o(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.Zo(t)})),s=this.xn.getId(t);s&&queueMicrotask((function(){var t={type:In.SET_ADOPTED_STYLE_SHEETS,args:[s,r],date:wt()};i.Ei(t)}))},t.prototype.Zo=function(t){return t.__adopted_stylesheet_id},t.prototype.Go=function(t,n){var i=n[0],r=n[1],s=this.Qo(t);if(s){var e={date:wt(),type:In.ADOPTED_STYLESHEET_RULE_INSERT,args:jt(r)?[s,i,r]:[s,i]};this.Ei(e)}},t.prototype.Wo=function(t,n){var i=n[0],r=this.Qo(t);if(r&&r){var s={date:wt(),type:In.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.Ei(s)}},t.prototype.Qo=function(t){return this.Jo.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.$o=function(t){if(!this.Jo.has(t)){var n=this.Bo++;t.__adopted_stylesheet_id=n,this.Jo.add(t);var i=this.th(t),r={type:In.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:wt()};this.Ei(r)}},t.prototype.th=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){Gt.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}(),Br=function(){function t(t,n,i){this.nh=t,this.M=n,this.Z=i}return t.prototype.shouldUseAnonymization=function(){var t=!this.nh.isAllowedByConsent();return t?this.M.replayRecordingUnmaskedUrlRegex&&this.M.replayRecordingUnmaskedUrlRegex.test(this.Z.getAnonymizedUrl())&&(t=!1):this.M.replayRecordingMaskedUrlRegex&&this.M.replayRecordingMaskedUrlRegex.test(this.Z.getAnonymizedUrl())&&(t=!0),t},t}(),Jr=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),Gr=function(){function t(t){this.ih={},this.rh=new oi(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.rh.isThresholdReached()||(this.rh.addString(n),"string"==typeof r?this.rh.addString(r):this.rh.addArrayBuffer(r),this.rh.isThresholdReached()||(this.ih[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.eh(),(function(t){var r=n.ih[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.uh(t))})),0!==i.length&&(t(i),this.rh.reset())},t.prototype.eh=function(){return Object.keys(this.ih)},t.prototype.uh=function(t){delete this.ih[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(Dr||(Dr={}));var Wr,Kr,Yr,Xr,$r=function(){function t(t,n,i){this.oh=t,this.hh=i,this.ah=Dr.NOT_STARTED,this.fh=[],this.lh=0,this.yh=self.origin,this.ph="object"==typeof window?"":"worker-",this.rh=new oi(n),this.mh()}return t.prototype.mh=function(){return V(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,this.gh()];case 1:return t.sent(),this.ah===Dr.READY?this.Ah():this.hh(this.fh),[2]}}))}))},t.prototype.Ah=function(){var t=this;csArray.prototype.forEach.call(this.fh,(function(n){t.save(n)})),this.fh=[]},t.prototype.save=function(t){return V(this,void 0,void 0,(function(){var n,i,r;return B(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.ah===Dr.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.fh,t),[2]):this.ah!==Dr.READY||this.rh.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.rh.addString(n),"string"==typeof r?this.rh.addString(r):this.rh.addArrayBuffer(r),this.rh.isThresholdReached()?[2]:[4,this.rn.put("".concat(this.yh,"/").concat(n),new Response(r,{headers:i}))]);case 1:return s.sent(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return V(this,void 0,void 0,(function(){return B(this,(function(n){switch(n.label){case 0:return this.rn?[3,2]:[4,this.gh()];case 1:if(n.sent(),this.ah!==Dr.READY)return[2];n.label=2;case 2:return this.Sh(t),[2]}}))}))},t.prototype.gh=function(){return V(this,void 0,void 0,(function(){var t;return B(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.ah=Dr.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.ph).concat(this.oh))];case 1:return t.rn=n.sent(),this.ah=Dr.READY,[3,3];case 2:return n.sent(),this.ah=Dr.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.Sh=function(t){return V(this,void 0,void 0,(function(){var n,i,r,s,e=this;return B(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,6,7]),this.lh++,this.lh>1?[2]:[4,this.rn.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.rn.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return s=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return e.rn.delete(t)})))];case 4:return u.sent(),t(s),this.rh.reset(),[3,7];case 5:return u.sent(),[3,7];case 6:return this.lh--,[7];case 7:return[2]}}))}))},t}(),Zr=function(){function t(t){self.caches?this.Eh(t):this.bh()}return t.prototype.save=function(t){this.Nh.save(t)},t.prototype.recover=function(t){this.Nh.recover(t)},t.prototype.Eh=function(n){var i=this;this.Nh=new $r(n,t.Th,(function(t){i.bh(t)}))},t.prototype.bh=function(n){var i=this;this.Nh=new Gr(t.Th),n&&csArray.prototype.forEach.call(n,(function(t){i.Nh.save(t)}))},t.Th=16777216,t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(Wr||(Wr={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(Kr||(Kr={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(Yr||(Yr={})),function(t){function n(){return"orientation"in screen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(screen.orientation.type){case Kr.PORTRAIT_PRIMARY:case Kr.PORTRAIT_SECONDARY:return Wr.PORTRAIT;case Kr.LANDSCAPE_PRIMARY:case Kr.LANDSCAPE_SECONDARY:return Wr.LANDSCAPE;default:return Wr.PORTRAIT}}:i()?function(){switch(window.orientation){case Yr.PORTRAIT:case Yr.PORTRAIT_REVERSE:return Wr.PORTRAIT;case Yr.LANDSCAPE:case Yr.LANDSCAPE_REVERSE:return Wr.LANDSCAPE;default:return Wr.PORTRAIT}}:function(){return Wr.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(Xr||(Xr={}));var Qr=function(){function t(){this.yi=!1}return t.prototype.start=function(){this.yi||(this.yi=!0,this.onScreenPotentiallyChanged())},t.prototype.stop=function(){this.yi&&(this.yi=!1)},t.prototype.setOnScreenChangedCallback=function(t){this.Rh=t},t.prototype.onScreenPotentiallyChanged=function(){var t;if(this.yi){var n=Xr.getCurrentOrientation(),i=this.Oh(n),r=i.screenWidth,s=i.screenHeight;if(r!==this.kh||s!==this.Ih){this.kh=r,this.Ih=s;var e={type:In.SCREEN_RESIZE,args:[r,s],date:wt()};null===(t=this.Rh)||void 0===t||t.call(this,e)}}},t.prototype.Oh=function(t){var n,i,r=ri.screenWidth(),s=ri.screenHeight();return t===Wr.PORTRAIT?(n=r,i=s):(n=Math.max(r,s),i=Math.min(r,s)),{screenWidth:n,screenHeight:i}},t}(),ts="v2/recording",ns=["setCapturedElementsSelector"],is=["setPIISelectors"],rs=["setEncryptionSelectors"],ss=["isRecording"],es=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E){this.Ch=t,this.K=n,this.M=i,this.su=r,this.Cn=s,this.nh=e,this.xh=u,this._h=o,this.D=h,this.qi=c,this.Z=a,this._n=f,this.Fi=v,this.zi=l,this.Vi=d,this.Vu=w,this.Ji=y,this.li=p,this.Lh=m,this.Ph=g,this.Mh=A,this.Zs=S,this.Dh=E}return t.prototype.init=function(){var t=this,n=new Zr("csPersisted");this.Uh(n);var i=new ci;this.xi=new hi;var r=new Xi,s=new Si,e=new bi(this._n);this.jh=new Ii(this.D,this.M),this.jh.init();var u=new Vi,o=new Gi(r,this.Zs,s),h=new Ar(window.crypto),c=new Er(window.crypto);c.init(),h.init();var a=new lr,f=new lr,v=new lr,l=new lr,d=new lr,w=new fr(s,this.M,c,h,a,f,v,d,l,this.su);w.init();var y=[new zr,e,this.jh,u];if(this.M.encryptionEnabled){var p=new vr(w);csArray.prototype.push.call(y,p)}var m=new Vr(r,s);m.init(),Vr.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(y,m);var g=new hr(this._n,1e3);this.M.textVisibilityEnabled&&hr.isSupported()&&csArray.prototype.push.call(y,g);var A,S=new Hr;S.isSupported()&&csArray.prototype.push.call(y,S.getProcessor()),A=this.qh()?new jr(y,s):new qr(y);var E=new Ci(i,this.xh,{getRequestParameters:function(){return{let:t._s.getRecordingLastEventTimestamp()}}},{getRequestParameters:function(){return{rst:t._s.getRecordingStartTimestamp()}}}),b=new cr(this.M.getRecordingUri(),ts);this.M.useMalkaPipeline&&(E.addProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.K.getRecordingStates())}}}),b.setRequestParametersProviders({getRequestParameters:function(){var n=t.Wi.getQueryParams(),i=(n.ri,n.rst,n.let,function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]])}return i}(n,["ri","rst","let"]));return F(F({},i),{hlm:"true"})}}),b.setRequestPayloadProvider(new Fr(this.xi))),this.Hh=new Br(this.nh,this.M,this.Z),this.ai=new gi(A,s,this.jh,w),this.ai.setAnonymization(this.Hh.shouldUseAnonymization()),this.Di=new Zn(this.Cn,s,this._n,w),this.Di.init();var N=new ui(this.ai,o,u,this.li,s,this._n);this.Ki=new li(this.xi,n,this.M,b,this.Wi,E),this._s=new vi(this.M,this.xi,E,i,new Ai(r,s,this._n,u),N,this.Di,new Pi(window.location,this.D,new Qr),new br(this.Vu,s,this._n),this.qi,this.K,u,new Bi(window),this.Fi,this.zi,this.Vi,g,this.Ji,w,S,this.Wi,this.Ki,m),this.Fh=new Mi(this.Di,N,new xi(new Li,this.M),this._s,this.ai,this.li),this.Lh.addListeners(this._s),this.Ph.addListeners(this._s),this.Ph.addListeners(this.Fh),o.init(),this.Fh.init(),this._s.init(),this._h.register(ss,(function(){return t.K.isReplayRecorded()&&!t.Mh.isUrlExcludedForSessionReplay()})),this._h.register(ns,(function(n){t.jh.setWhitelistedElementsSelector(n),t.li.emitRecordingStatusChange()})),this._h.register(is,(function(n){t._n.setPIISelectors(n),t.li.emitRecordingStatusChange()})),this._h.register(rs,(function(t){w.setEncryptionSelectors(t)})),this.Ch.enableRecordingStatus(this._s,this._n,this.Hh,this.jh,w)},t.prototype.onStartTracking=function(){this.Ki.recover(),this.K.isReplayRecorded()&&!this.Mh.isUrlExcludedForSessionReplay()&&(this.M.useMalkaPipeline&&this.K.isTemporarilyRecorded()&&this._s.blockSendingEventsFromQuotaService(),this.zh())},t.prototype.onArtificialPageViewEnd=function(){this._s.clearStates(),!this.K.isReplayRecorded()||this.Mh.isUrlExcludedForSessionReplay()||this.K.isTemporarilyRecorded()||this.Ki.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.ai.setAnonymization(this.Hh.shouldUseAnonymization()),this.K.isReplayRecorded()&&!this.Mh.isUrlExcludedForSessionReplay()?(this.M.useMalkaPipeline&&this.K.isTemporarilyRecorded()&&this._s.blockSendingEventsFromQuotaService(),this.Vh()):this.Bh()},t.prototype.onBeforeSessionRenewal=function(){this._s.clearStates(),this.Bh()},t.prototype.onOptout=function(){this.Bh()},t.prototype.onConsentGranted=function(){this.ai.setAnonymization(this.Hh.shouldUseAnonymization()),this._s.triggerConsentGranted(),this.li.emitRecordingStatusChange()},t.prototype.onConsentWithdrawn=function(){this.ai.setAnonymization(this.Hh.shouldUseAnonymization()),this._s.triggerConsentWithdrawn(),this.li.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){this.M.useMalkaPipeline&&(t===en.NOT_RECORDED&&n===un.ETR_OFF?(this._s.clearEvents(),this.Bh()):(this.Wi.setQueryParams({rt:csArray.prototype.join.call(this.K.getRecordingStates(),",")}),this._s.allowSendingEventsFromQuotaService(),this.ai.isDOMSerializationInProgress()||this._s.pushEvents()))},t.prototype.onInitialDomStart=function(){this._s.blockSendingEventsFromSerialization(),this.Ki.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this._s.allowSendingEventsFromSerialization(),this._s.addInitialDom(t),this.Ki.allowSendingLastMessage(),this.Di.start(),this._s.pushEvents()},t.prototype.zh=function(){this.Fh.start(),this._s.start(),this.Ki.start(),this.li.emitRecordingStatusChange()},t.prototype.Bh=function(){this.Fh.stop(),this._s.stop(),this.Ki.stop(),this.li.emitRecordingStatusChange()},t.prototype.Vh=function(){this.Bh(),this.zh()},t.prototype.Uh=function(t){var n=this.M.useMalkaPipeline?ts:"recording",i=this.M.useMalkaPipeline?"byteArray":"base64";this.Wi=this.Dh.create("".concat(this.M.getRecordingUri(),"/").concat(n),!0,i,t)},t.prototype.qh=function(){return Jr.isAsyncSerializationSupported()&&this.M.asyncSerializerEnabled},z([Wn("Recording.onStartTracking")],t.prototype,"onStartTracking",null),z([Wn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}(),us=function(){function t(t,n,i){this.W=t,this.K=n,this.M=i,this.Jh=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Jh},t.prototype.setNaturalPageViewSent=function(t){this.Jh=t},t.prototype.getTrackingContext=function(){var t=this.getSessionKey(),n=this.Gh(),i=this.Wh();return t&&n?{projectId:i,sessionKey:t,pageNumber:n}:null},t.prototype.getSessionKey=function(){var t=this.W.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.Gh=function(){var t=this.K.getSession();return t?t.pageNumber:null},t.prototype.Wh=function(){return this.M.projectId},t}(),os=function(){function t(t){this.Kh=t,this.Yh=[]}return t.prototype.handleCommand=function(t){if(Ht(t)&&(this.Xh(t),this.Kh.isNaturalPageViewSent())){var n=this.Kh.getTrackingContext();null!==n&&this.$h(t,n)}},t.prototype.Xh=function(t){csArray.prototype.push.call(this.Yh,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Kh.getTrackingContext();null!==n&&csArray.prototype.map.call(this.Yh,(function(i){return t.$h(i,n)}))},t.prototype.$h=function(t,n){setTimeout((function(){t(n)}))},t}(),hs=function(){function t(t){this.Kh=t,this.Zh=[]}return t.prototype.handleCommand=function(t){return this.Kh.isNaturalPageViewSent()?this.Qh(t):void this.tc(t)},t.prototype.Qh=function(t){var n=this.Kh.getSessionKey();return this.nc(t)&&null!==n&&this.$h(t.callback,n),n},t.prototype.tc=function(t){this.nc(t)&&csArray.prototype.push.call(this.Zh,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Kh.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.Zh,(function(i){t.$h(i,n)})),this.Zh=[]},t.prototype.nc=function(t){return t&&"function"==typeof t.callback},t.prototype.$h=function(t,n){setTimeout((function(){t(n)}))},t}(),cs=function(){function t(t,n){this.ic=t,this.Kh=n}return t.prototype.onIframeIntegrationCallback=function(t){if(this.Kh.isNaturalPageViewSent()){var n=this.Kh.getTrackingContext();null!==n&&(t.trackingContext=n,this.ic.sendToChildren(It.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Kh.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:Ot.AfterPageView};this.ic.sendToChildren(It.IntegrationCallback,n)}},t}(),as=["afterPageView"],fs=["getSessionKey"],vs=function(){function t(t,n,i,r,s,e){this.W=t,this.K=n,this._h=i,this.rc=r,this.ic=s,this.M=e}return t.prototype.init=function(){var t=this;this.Kh=new us(this.W,this.K,this.M),this.sc=new os(this.Kh),this.ec=new hs(this.Kh),this.oc=new cs(this.ic,this.Kh),this.rc.addListeners(this.oc),this._h.register(fs,(function(n){return t.ec.handleCommand(n)})),this._h.register(as,(function(n){t.sc.handleCommand(n)}))},t.prototype.onAfterNaturalPageView=function(){this.Kh.setNaturalPageViewSent(!0),this.ec.flushPendingCallbacks(),this.sc.executeRegisteredCallbacks(),this.oc.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.sc.executeRegisteredCallbacks(),this.oc.sendAfterPageViewCallbackToChildren()},t}(),ls=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=Dt(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return Dt(t)&&(Dt(n)||Mt(n))},t}(),ds=function(t){function n(n,i){var r=t.call(this)||this;return r.hc=n,r.D=i,r.cc=[],r}return H(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.cc,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.cc=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?ls.isValid(t,n)&&this.hc.add(new ls(this.D.anonymizeEmail(t),this.D.anonymizeEmail(n))):csArray.prototype.push.call(this.cc,{key:t,value:n})},n}(fi);function ws(t,n){var i,r,s,e,u=function(){r=null;var n=wt()-s;e=t.apply(void 0,J([n],i,!1)),s=null},o=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return s||(s=wt()),r&&window.clearTimeout(r),i=J([],t,!0),r=window.setTimeout(u,n),e};return o.flushPending=function(){r&&(window.clearTimeout(r),u())},o}function ys(t){return void 0===t&&(t=0),function(n,i,r){var s=r.value,e=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];e||(e=!0,setTimeout((function(){e=!1,s.apply(n,i)}),t))}}}var ps,ms,gs=function(){function t(t){this.su=t,this.hc=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.hc,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.hc=[]},t.prototype.onBatchReady=function(t){this.ac=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.hc;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.su.compressSync(csJSON.stringify(t),"base64"),ct:this.su.algorithm}},t.prototype.setBatchReadyCall=function(){this.ac()},z([ys(),Wt("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),As=["trackDynamicVariable"],Ss=function(){function t(t,n,i,r,s,e){this._h=t,this.K=n,this.M=i,this.xh=r,this.su=s,this.D=e,this.L=new et(this.M.getTrackerUri(),"dvar"),this.hc=new gs(this.su),this.fc=new ds(this.hc,this.D)}return t.prototype.init=function(){var t=this;this.L.setRequestParametersProviders(this.xh,this.hc),this.K.setDynamicVariablesService(this.fc),this.hc.onBatchReady((function(){return t.L.send()})),this.L.after((function(){return t.hc.clear()})),this._h.register(As,(function(n){var i=void 0===n?{}:n,r=i.key,s=i.value;t.fc.trackDynamicVariable(r,s)}))},t.prototype.onStartTracking=function(){this.fc.start()},t}(),Es=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),Dt(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return Pt(t.revenue)&&Dt(t.currency)&&t.currency.length<=10&&(!qt(t.id)||Dt(t.id))},t}(),bs=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.vc(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return jt(n.sku)&&(i.sku=n.sku),jt(n.category)&&(i.category=n.category),jt(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.vc=function(t){return Dt(t.id)&&Dt(t.name)&&Pt(parseFloat(t.price))&&Mt(parseInt(t.quantity,10))&&(!jt(t.sku)||Dt(t.sku))&&(!jt(t.category)||Dt(t.category))&&(!jt(t.merchant)||Dt(t.merchant))},t}(),Ns=function(){function t(t,n,i){this.D=t,this.lc=n,this.qi=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.D.anonymizeFields(t,["id"]);this.wc=Es.from(n)},t.prototype.getTransaction=function(){return this.wc},t.prototype.sendTransaction=function(){this.qi.isSessionValid()&&(this.wc.hasValidRevenue()?this.lc.send():Gt.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!Ht(t)){var n=this.D.anonymizeFields(t,["id","name","sku","category"]),i=bs.from(n);null!==i&&csArray.prototype.push.call(this.yc,i)}},t.prototype.getItems=function(){return this.yc},t.prototype.clear=function(){this.wc=Es.from({revenue:NaN}),this.yc=[]},t.prototype.getRequestParameters=function(){var t={id:this.wc.id?"".concat(this.wc.id):"",revenue:"".concat(this.wc.revenue)};return jt(this.wc.tax)&&(t.tax="".concat(this.wc.tax)),jt(this.wc.shipping)&&(t.shipping="".concat(this.wc.shipping)),jt(this.wc.currency)&&(t.cu="".concat(this.wc.currency)),t.items=window.csJSON.stringify(this.yc),t},t}(),Ts=function(){function t(t,n){this.mc=csString.prototype.slice.call(t,0,100),this.gc=n&&csString.prototype.slice.call(n,0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.mc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"merchant",{get:function(){return this.gc},enumerable:!1,configurable:!0}),t}(),Rs=function(){function t(t,n){this.Ac=t,this.qi=n,this.Sc=null}return t.prototype.addToCart=function(t){!this.Ec(t.sku)||jt(t.merchant)&&!Dt(t.merchant)||(this.Sc=new Ts(t.sku,t.merchant),this.sendCartItem())},t.prototype.Ec=function(t){return Dt(t)&&t.length>0},t.prototype.getCartItem=function(){return this.Sc},t.prototype.sendCartItem=function(){this.qi.isSessionValid()&&this.Ac.send()},t.prototype.clear=function(){this.Sc=null},t.prototype.getRequestParameters=function(){if(!this.Sc)return{};var t={sku:"".concat(this.Sc.sku)};return jt(this.Sc.merchant)&&this.Sc.merchant.length>0&&(t.me=this.Sc.merchant),t},t}(),Os=["ecommerce:addToCart","ec:cart:add"],ks=["ecommerce:addTransaction","ec:transaction:create"],Is=["ecommerce:addItem","ec:transaction:items:add"],Cs=["ecommerce:send","ec:transaction:send"],xs=function(){function t(t,n,i,r,s,e,u){this.M=t,this.W=n,this.K=i,this._h=r,this.D=s,this.qi=e,this.Z=u}return t.prototype.init=function(){var t=new et(this.M.getTrackerUri(),"transaction"),i=new et(this.M.getTrackerUri(),"addtocart"),r=new Ns(this.D,t,this.qi),s=new Rs(i,this.qi);t.setRequestParametersProviders(this.M,this.W,this.K,this.Z,r,n),t.after((function(){r.clear()})),i.setRequestParametersProviders(this.M,this.W,this.K,this.Z,s,n),i.after((function(){s.clear()})),this._h.register(ks,(function(t){r.addTransaction(t)})),this._h.register(Is,(function(t){return r.addItem(t)})),this._h.register(Cs,(function(){return r.sendTransaction()})),this._h.register(Os,(function(t){s.addToCart(t)}))},t}(),_s=function(){function t(t){this.Ks=t.performance}return t.prototype.getRequestParameters=function(){if(this.bc())return{};var t=this.Nc();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.Nc=function(){var t=this.Ks.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.bc=function(){return!(this.Ks&&this.Ks.timing&&this.Ks.timing.loadEventEnd>0)},t}();function Ls(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.EXTENSION=26]="EXTENSION"}(ps||(ps={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(ms||(ms={}));var Ps,Ms=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),Ds=function(t){function n(n,i){var r=t.call(this)||this;return r.C=n,r.Tc=i,r.supportedEventTypes=[ps.MOUSEDOWN,ps.MOUSEUP,ps.CLICK,ps.MOUSEOVER,ps.TAP],r}return H(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){if(this.C.eMerchandisingEnabled){var i=this.Tc.getEventTargetPathAndTargetLink(t),r=i.path,s=i.targetLink;n.tgt=r,n.tgtLk=s}return n},n}(Ms),Us=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),js=function(t){function n(n){var i=t.call(this)||this;return i.Tc=n,i.supportedEventTypes=[ps.MOUSEDOWN,ps.MOUSEUP,ps.CLICK,ps.MOUSEOVER,ps.TAP,ps.DRAG,ps.FLICK],i}return H(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.Tc.getEventTargetPath(t)),n},n}(Ms),qs=function(){function t(t,n,i){this.M=t,this.Tc=n,this.Vu=i,this.Rc=[new Ds(this.M,this.Tc),new js(this.Tc)]}return t.prototype.Ju=function(t,n){switch(t.type){case yr.TAP:this.Oc(n);break;case yr.FLICK:this.kc(t,n);break;case yr.DRAG:this.Ic(t,n)}},t.prototype.Oc=function(t){var n={type:ps.TAP,ts:0,x:0,y:0,tgt:""},i=Us.build(t,n,this.Rc);i.tgt!==D.INVALID_ELEMENT&&this.Ei(i)},t.prototype.Ic=function(t,n){var i={type:ps.DRAG,ts:0,fd:t.direction,tgt:""},r=Us.build(n,i,this.Rc);r.tgt!==D.INVALID_ELEMENT&&this.Ei(r)},t.prototype.kc=function(t,n){var i={type:ps.FLICK,ts:0,fd:t.direction,tgt:""},r=Us.build(n,i,this.Rc);r.tgt!==D.INVALID_ELEMENT&&this.Ei(r)},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){var n=this;this.Vu.subscribe(t.Bu,(function(t,i){return n.Ju(t,i)}))},t.prototype.stop=function(){this.Vu.unsubscribe(t.Bu)},t.Bu="AnalysisGestureTracker",t}(),Hs="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(qt(t)&&function(t){try{if(qt(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&Ft(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Hs))},t.getScrollContainer=function(){return document.querySelector("[".concat(Hs,"]"))}}(Ps||(Ps={}));var Fs;!function(t){t.getRelativePosition=function(t){var n=Kn(t);if(!(n&&Ft(n)&&Ht(n.getBoundingClientRect)&&qt(t.pageX)&&qt(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-ri.windowOffsetX(),s=t.pageY-i.top-ri.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,s+=n.scrollTop);var e=Math.max(n.scrollWidth,i.width),u=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/e*65535),yRel:Math.round(s/u*65535),valid:!0}}}(Fs||(Fs={}));var zs,Vs,Bs,Js,Gs,Ws,Ks=function(t){function n(n,i){var r=t.call(this)||this;return r.C=n,r.Tc=i,r.supportedEventTypes=[ps.MOUSEMOVE],r.Cc="",r}return H(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){if(!this.C.mouseMoveHeatmapEnabled)return n;var i=Fs.getRelativePosition(t),r=i.valid,s=i.xRel,e=i.yRel;if(r){var u=this.Tc.getEventTargetPath(t);u!==D.INVALID_ELEMENT&&(n.xRel=s,n.yRel=e,u!==this.Cc||this.C.iframesTracking?(this.Cc=u,n.tgtHM=u):n.tgtHM="")}else this.Cc="";return n},n}(Ms),Ys=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[ps.CHANGE],n.xc=["text","email","number","search","tel","url","password"],n}return H(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=Kn(t);return p(i)&&csArray.prototype.indexOf.call(this.xc,i.type)>=0&&(n.isBlank=""===i.value),n},n}(Ms),Xs=function(){function t(t,n,i){var r=this;this.C=t,this.Tc=n,this.Cn=i,this._c="select, select *, input, textarea",this.Lc="select, select *, input, textarea",this.Pc="a, a *, button, button *, select, select *, input, textarea",this.Mc="input, select, textarea",this.Dc=150,this.Uc=400,this.jc=!1,this.qc=ws((function(t,n){return r.scrollListener(t,n)}),this.Dc),this.Hc=ws((function(t){return r.resizeListener(t)}),this.Dc),this.Fc=Xn((function(t){return r.mouseMoveListener(t)}),this.Uc),this.zc=[{boundElement:window,type:"resize",listener:function(){return r.Hc()}},{boundElement:document,type:"scroll",listener:function(t){return r.qc(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.Fc(r.Vc(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.Bc=[{boundElement:document,type:"mouseover",listener:this.Cn.on(this.Pc,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.Cn.on(this.Pc,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.Cn.on(this._c,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.Cn.on(this._c,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"change",listener:this.Cn.on(this.Lc,(function(t){return r.changeListener(t)}))},{boundElement:document,type:"keyup",listener:this.Cn.on(this.Mc,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.Cn.on(this.Mc,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.Cn.on(this.Mc,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.Cn.on(this.Mc,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.Cn.on(this.Mc,(function(t){return r.pasteListener(t)}))}],this.Rc=[new Ds(this.C,this.Tc),new Ks(this.C,this.Tc),new Ys,new js(this.Tc)],this.ci={},this.Jn()}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){var t=this.Jc();csArray.prototype.forEach.call(t,(function(t){return Dn(t)})),this.resizeListener()},t.prototype.stop=function(){var t=this.Jc();csArray.prototype.forEach.call(t,(function(t){return Un(t)}))},t.prototype.flushPendingDebouncedListeners=function(){this.qc.flushPending(),this.Hc.flushPending()},t.prototype.Jc=function(){return this.Cn.isMatchesSelectorSupported()?J(J([],this.zc,!0),this.Bc,!0):(Gt.warn("Element.matches is not implemented yet"),this.zc)},t.prototype.resizeListener=function(t){var n=Ps.getScrollContainer(),i=Ft(n);i&&(this.jc=!0);var r={type:ps.RESIZE,ts:0,x:i?n.clientWidth:ri.windowWidth(),y:i?n.clientHeight:ri.windowHeight()};void 0!==t&&(r.d=t),this.Ei(r)},t.prototype.scrollListener=function(t,n){var i=Ps.isEventOnScrollContainer(n);!this.jc&&i&&this.resizeListener();var r={type:ps.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:ri.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:ri.windowOffsetY(),d:t},s=Us.build(n,r,this.Rc);this.Ei(s)},t.prototype.mouseMoveListener=function(t){var n={type:ps.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Us.build(t,n,this.Rc);this.Ei(i)},t.prototype.mouseDownListener=function(t){var n={type:ps.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.mouseUpListener=function(t){var n={type:ps.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.clickListener=function(t){var n={type:ps.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.mouseOverListener=function(t){var n={type:ps.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.mouseOutListener=function(t){var n={type:ps.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.Tc.getEventTargetPath(t)},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.focusInListener=function(t){var n={type:ps.FOCUSIN,ts:0,tgt:this.Tc.getEventTargetPath(t)},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.focusOutListener=function(t){var n={type:ps.FOCUSOUT,ts:0,tgt:this.Tc.getEventTargetPath(t)},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.changeListener=function(t){var n={type:ps.CHANGE,ts:0,tgt:this.Tc.getEventTargetPath(t)},i=Us.build(t,n,this.Rc);this.Gc(i)},t.prototype.copyListener=function(t){var n={type:ps.COMMAND,ts:0,tgt:this.Tc.getEventTargetPath(t),key:Mn.COPY};this.Gc(n)},t.prototype.cutListener=function(t){var n={type:ps.COMMAND,ts:0,tgt:this.Tc.getEventTargetPath(t),key:Mn.CUT};this.Gc(n)},t.prototype.pasteListener=function(t){var n={type:ps.COMMAND,ts:0,tgt:this.Tc.getEventTargetPath(t),key:Mn.PASTE};this.Gc(n)},t.prototype.keyUpListener=function(t){var n={type:ps.KEYUP,ts:0,tgt:this.Tc.getEventTargetPath(t),key:this.Wc(t)};this.Gc(n)},t.prototype.keyDownListener=function(t){var n={type:ps.KEYDOWN,ts:0,tgt:this.Tc.getEventTargetPath(t),key:this.Wc(t)};this.Gc(n)},t.prototype.Wc=function(t){var n=this.ci[t.key];return void 0===n?Pn.ALPHANUMERICAL:n},t.prototype.Gc=function(t){Ls(t)&&t.tgt!==D.INVALID_ELEMENT&&this.Ei(t)},t.prototype.Vc=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},t.prototype.Jn=function(){this.ci[" "]=Pn.SPACE,this.ci.Spacebar=Pn.SPACE,this.ci.Enter=Pn.ENTER,this.ci.Backspace=Pn.BACKSPACE,this.ci.Delete=Pn.DELETE,this.ci.ArrowUp=Pn.ARROWUP,this.ci.ArrowDown=Pn.ARROWDOWN,this.ci.ArrowLeft=Pn.ARROWLEFT,this.ci.ArrowRight=Pn.ARROWRIGHT,this.ci.Up=Pn.ARROWUP,this.ci.Down=Pn.ARROWDOWN,this.ci.Left=Pn.ARROWLEFT,this.ci.Right=Pn.ARROWRIGHT,this.ci.CapsLock=Pn.CAPSLOCK,this.ci.Shift=Pn.SHIFT,this.ci.Tab=Pn.TAB},z([Wt("Event handler type: resize")],t.prototype,"resizeListener",null),z([Wt("Event handler type: scroll")],t.prototype,"scrollListener",null),z([Wt("Event handler type: mouseMove"),$n()],t.prototype,"mouseMoveListener",null),z([Wt("Event handler type: mouseDown"),$n()],t.prototype,"mouseDownListener",null),z([Wt("Event handler type: mouseUp"),$n()],t.prototype,"mouseUpListener",null),z([Wt("Event handler type: click"),$n()],t.prototype,"clickListener",null),z([Wt("Event handler type: mouseOver"),$n()],t.prototype,"mouseOverListener",null),z([Wt("Event handler type: mouseOut"),$n()],t.prototype,"mouseOutListener",null),z([Wt("Event handler type: focusIn")],t.prototype,"focusInListener",null),z([Wt("Event handler type: focusOut")],t.prototype,"focusOutListener",null),z([Wt("Event handler type: change")],t.prototype,"changeListener",null),z([Wt("Event handler type: copy")],t.prototype,"copyListener",null),z([Wt("Event handler type: cut")],t.prototype,"cutListener",null),z([Wt("Event handler type: paste")],t.prototype,"pasteListener",null),z([Wt("Event handler type: keyup")],t.prototype,"keyUpListener",null),z([Wt("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),$s=function(){function t(){var t=this;this.Kc=100,this.Yc=0,this.Xc=ri.documentHeight(),this.$c={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){Dn(this.$c),this.reset()},t.prototype.stop=function(){Un(this.$c)},t.prototype.reset=function(){this.Xc=ri.documentHeight();var t=Ps.getScrollContainer();if(null===t)this.Yc=this.Zc(ri.documentHeight());else{var n=this.Qc(t);this.Yc=this.ta(t,n)}this.Ei()},t.prototype.maxScrollRateListener=function(t){var n,i;if(Ps.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),s=this.Qc(r);n=this.na(r,s),i=this.ta(r,s)}else n=ri.documentHeight(),i=this.Zc(n);(i>this.Yc||n>this.Xc)&&(this.Yc=i,n>this.Xc&&(this.Xc=n),this.Ei())},t.prototype.Zc=function(t){var n=Math.round(this.ia()/t*100);return Math.min(n,this.Kc)},t.prototype.ia=function(){var t=ri.windowHeight();return ri.windowOffsetY()+t},t.prototype.ta=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.na(t,n),s=Math.round(i/r*100);return Math.min(s,this.Kc)},t.prototype.Qc=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.na=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.Yc),mdh:"".concat(this.Xc)}},z([Wt("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),Zs=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m){this.M=t,this.ra=n,this.Vu=i,this.sa=r,this.ea=s,this.ua=e,this.oa=u,this.ha=o,this.qi=h,this.K=c,this.zt=a,this.ca=f,this.aa=v,this.fa=l,this.Wi=d,this.va=w,this.da=y,this.wa=p,this.ya=m,this.Qi=new ai}return t.prototype.init=function(){var t,n,i,r,s=this;this.ra.onEvent((function(t){return s.ur(t)})),this.Vu.onEvent((function(t){return s.ur(t)})),this.sa.onEvent((function(){s.Wi.setQueryParams(s.sa.getRequestParameters())})),this.aa.onEvent((function(t){return s.pa(t)})),this.fa.onEvent((function(){var t,n;null===(t=s.da)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(n=s.ya)||void 0===n||n.flushPendingTextHighlightEvent(),s.ua.isEmpty()||s.oa.send()})),null===(t=this.va)||void 0===t||t.onEvent((function(t){return s.ur(t)})),null===(n=this.wa)||void 0===n||n.onEvent((function(t){return s.ur(t)})),null===(i=this.da)||void 0===i||i.onEvent((function(t){return s.ur(t)})),null===(r=this.ya)||void 0===r||r.onEvent((function(t){return s.ur(t)})),this.ma()},t.prototype.ma=function(){var t=this;this.oa.setRequestParametersProviders(this.ha,this.sa),this.oa.setRequestPayloadProvider(this.ua),this.oa.onBeaconSuccess((function(){t.ua.clearEvents()})),this.oa.onBeaconFailure((function(n){t.ga(n)}))},t.prototype.initStates=function(){this.Wi.setQueryParams(this.ha.getRequestParameters()),this.Wi.setQueryParams(this.sa.getRequestParameters()),this.Aa()},t.prototype.start=function(t){var n,i,r,s;this.fa.start(),this.ra.start(),this.sa.start(),this.Vu.start(),null===(n=this.va)||void 0===n||n.start(),null===(i=this.ya)||void 0===i||i.start(),null===(r=this.wa)||void 0===r||r.start(),t||this.aa.start(),null===(s=this.da)||void 0===s||s.start()},t.prototype.collectInitialEvents=function(){var t,n;null===(t=this.wa)||void 0===t||t.flushInitialEvent(),null===(n=this.va)||void 0===n||n.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.pr(t)},t.prototype.pa=function(t){this.K.hasValidSession()&&this.pr(t)},t.prototype.ur=function(t){this.qi.isSessionValid()&&this.pr(t)},t.prototype.pr=function(t){this.ua.addEvent(this.Sa(t)),this.ua.isFull()&&this.sendEvents(),this.M.emitDebugEvents&&this.Qi.emit("analysisEvent",F(F({},t),{typeName:ps[t.type]}))},t.prototype.Sa=function(t){return t.ts=this.Ea(),t},t.prototype.sendEvents=function(){this.ua.isEmpty()||(this.Wi.setQueryParams(this.ha.getRequestParameters()),this.Wi.setQueryParams(this.ea.getRequestParameters()),this.Wi.send(this.ua.getEvents()),this.ua.clearEvents())},t.prototype.stop=function(){var t,n,i,r;this.fa.stop(),this.ra.stop(),this.sa.stop(),this.Vu.stop(),this.aa.stop(),null===(t=this.va)||void 0===t||t.stop(),null===(n=this.wa)||void 0===n||n.stop(),null===(i=this.da)||void 0===i||i.stop(),null===(r=this.ya)||void 0===r||r.stop(),this.ua.empty()},t.prototype.clearStates=function(){var t,n;this.ra.flushPendingDebouncedListeners(),null===(t=this.da)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(n=this.ya)||void 0===n||n.flushPendingTextHighlightEvent(),this.sendEvents(),this.sa.reset(),this.aa.stop(),this.Wi.removeQueryParams()},t.prototype.Aa=function(){this.ba=wt()},t.prototype.Ea=function(){return wt()-this.ba},t.prototype.ga=function(t){try{this.ua.isEmpty()||this.zt.save({requestParameters:t,events:this.ua.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===ms.SUCCESS||t===ms.FAILURE||t===ms.ATTEMPT}(t))if(Ft(n)){var i={status:t,type:ps.SUBMIT,ts:0,tgt:this.ca.getElementPath(n)};i.tgt!==D.INVALID_ELEMENT&&this.pa(i)}else Gt.warn("AnalysisEvents Service: invalid element: ".concat(n));else Gt.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Qs=function(){function t(t,n){var i=this;this.zt=t,this.Wi=n,this.Na=function(){"visible"===document.visibilityState&&i.Ta()}}return t.prototype.start=function(){this.Ta(),this.Ra()},t.prototype.stop=function(){this.Oa()},t.prototype.getRecoveryStorage=function(){return this.zt},t.prototype.Ta=function(){var t=this.zt.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.Wi.send(r,i)}},t.prototype.Ra=function(){document.addEventListener("visibilitychange",this.Na)},t.prototype.Oa=function(){document.removeEventListener("visibilitychange",this.Na)},t}(),te=function(){function t(t){this.oh=t}return t.prototype.save=function(t){localStorage.setItem(this.oh,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.oh)},t.prototype.recover=function(){var t=localStorage.getItem(this.oh);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){Gt.error("Invalid item in localStorage.\n         (key:".concat(this.oh,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),ne=function(){function t(t){var n=this;this.ka=t,this.Ia=function(t){return n.processMetric(t)},this.Ue=!1}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){this.Ue||(this.Ue=!0,this.ka.onFCP(this.Ia),this.ka.onCLS(this.Ia),this.ka.onFID(this.Ia),this.ka.onLCP(this.Ia),this.ka.onTTFB(this.Ia))},t.prototype.stop=function(){this.Ue=!1},t.prototype.processMetric=function(t){if(this.Ue){var n={type:ps.PERFORMANCE,name:t.name,val:t.value,ts:0};this.Ei(n)}},z([Wt("Performance metric handler")],t.prototype,"processMetric",null),t}(),ie=function(t,n){return{name:t,value:void 0===n?-1:n,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},re=function(t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var i=new PerformanceObserver((function(t){return t.getEntries().map(n)}));return i.observe({type:t,buffered:!0}),i}}catch(t){}},se=function(t,n){var i=function i(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),n&&(removeEventListener("visibilitychange",i,!0),removeEventListener("pagehide",i,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)},ee=function(t){addEventListener("pageshow",(function(n){n.persisted&&t(n)}),!0)},ue=function(t,n,i){var r;return function(s){n.value>=0&&(s||i)&&(n.delta=n.value-(r||0),(n.delta||void 0===r)&&(r=n.value,t(n)))}},oe=-1,he=function(){return"hidden"===document.visibilityState?0:1/0},ce=function(){se((function(t){var n=t.timeStamp;oe=n}),!0)},ae=function(){return oe<0&&(oe=he(),ce(),ee((function(){setTimeout((function(){oe=he(),ce()}),0)}))),{get firstHiddenTime(){return oe}}},fe=function(t,n){var i,r=ae(),s=ie("FCP"),e=function(t){"first-contentful-paint"===t.name&&(o&&o.disconnect(),t.startTime<r.firstHiddenTime&&(s.value=t.startTime,s.entries.push(t),i(!0)))},u=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],o=u?null:re("paint",e);(u||o)&&(i=ue(t,s,n),u&&e(u),ee((function(r){s=ie("FCP"),i=ue(t,s,n),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,i(!0)}))}))})))},ve=!1,le=-1,de={passive:!0,capture:!0},we=new Date,ye=function(t,n){zs||(zs=n,Vs=t,Bs=new Date,ge(removeEventListener),pe())},pe=function(){if(Vs>=0&&Vs<Bs-we){var t={entryType:"first-input",name:zs.type,target:zs.target,cancelable:zs.cancelable,startTime:zs.timeStamp,processingStart:zs.timeStamp+Vs};Js.forEach((function(n){n(t)})),Js=[]}},me=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){ye(t,n),s()},r=function(){s()},s=function(){removeEventListener("pointerup",i,de),removeEventListener("pointercancel",r,de)};addEventListener("pointerup",i,de),addEventListener("pointercancel",r,de)}(n,t):ye(n,t)}},ge=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,me,de)}))},Ae={},Se=function(){function t(){}return t.prototype.onFCP=function(t){fe(t,!0)},t.prototype.onCLS=function(t){!function(t,n){ve||(fe((function(t){le=t.value})),ve=!0);var i,r=function(n){le>-1&&t(n)},s=ie("CLS",0),e=0,u=[],o=function(t){if(!t.hadRecentInput){var n=u[0],r=u[u.length-1];e&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(e+=t.value,u.push(t)):(e=t.value,u=[t]),e>s.value&&(s.value=e,s.entries=u,i())}},h=re("layout-shift",o);h&&(i=ue(r,s,n),se((function(){h.takeRecords().map(o),i(!0)})),ee((function(){e=0,le=-1,s=ie("CLS",0),i=ue(r,s,n)})))}(t,!0)},t.prototype.onFID=function(t){!function(t,n){var i,r=ae(),s=ie("FID"),e=function(t){t.startTime<r.firstHiddenTime&&(s.value=t.processingStart-t.startTime,s.entries.push(t),i(!0))},u=re("first-input",e);i=ue(t,s,n),u&&se((function(){u.takeRecords().map(e),u.disconnect()}),!0),u&&ee((function(){var r;s=ie("FID"),i=ue(t,s,n),Js=[],Vs=-1,zs=null,ge(addEventListener),r=e,Js.push(r),pe()}))}(t,!0)},t.prototype.onLCP=function(t){!function(t,n){var i,r=ae(),s=ie("LCP"),e=function(t){var n=t.startTime;n<r.firstHiddenTime&&(s.value=n,s.entries.push(t),i())},u=re("largest-contentful-paint",e);if(u){i=ue(t,s,n);var o=function(){Ae[s.id]||(u.takeRecords().map(e),u.disconnect(),Ae[s.id]=!0,i(!0))};["keydown","click"].forEach((function(t){addEventListener(t,o,{once:!0,capture:!0})})),se(o,!0),ee((function(r){s=ie("LCP"),i=ue(t,s,n),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,Ae[s.id]=!0,i(!0)}))}))}))}}(t,!0)},t.prototype.onTTFB=function(t){!function(t){var n,i=ie("TTFB");n=function(){try{var n=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,n={entryType:"navigation",startTime:0};for(var i in t)"navigationStart"!==i&&"toJSON"!==i&&(n[i]=Math.max(t[i]-t.navigationStart,0));return n}();if(i.value=i.delta=n.responseStart,i.value<0||i.value>performance.now())return;i.entries=[n],t(i)}catch(t){}},"complete"===document.readyState?setTimeout(n,0):addEventListener("load",(function(){return setTimeout(n,0)}))}(t)},t}(),Ee=function(){function t(){var t=this;this.Ue=!1,this.Ca=function(n){try{if(("pagehide"===n.type||"visibilitychange"===n.type)&&"hidden"!==document.visibilityState)return;t.xa()}catch(t){}}}return t.prototype.start=function(){this.Ue||(this.Ue=!0,this.Ra(),this._a(),this.La())},t.prototype.stop=function(){this.Ue&&(this.Ue=!1,this.Oa(),this.Pa(),this.Ma())},t.prototype.onEvent=function(t){this.xa=t},t.prototype.Ra=function(){document.addEventListener("visibilitychange",this.Ca)},t.prototype.Oa=function(){document.removeEventListener("visibilitychange",this.Ca)},t.prototype._a=function(){window.addEventListener("pagehide",this.Ca)},t.prototype.Pa=function(){window.removeEventListener("pagehide",this.Ca)},t.prototype.La=function(){window.addEventListener("blur",this.Ca)},t.prototype.Ma=function(){window.removeEventListener("blur",this.Ca)},t}(),be=function(){function t(t){var n=void 0===t?{events:[],requestParameters:{}}:t,i=n.events,r=n.requestParameters;this.Ri=[],this._i={},this.Ri=i,this._i=r}return t.prototype.getRequestPayload=function(){return csJSON.stringify(this.Ri)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.Ri,t)},t.prototype.setRequestParametersFromProvider=function(t){var n=t.getRequestParameters();for(var i in n)n.hasOwnProperty(i)&&(this._i[i]=n[i])},t.prototype.eventsCount=function(){return this.Ri.length},t.prototype.clearEvents=function(){this.Ri=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.Ri.length},t.prototype.getEvents=function(){return this.Ri},t.prototype.getMetadata=function(){return this._i},t.prototype.getRequestParameters=function(){return this._i},t}(),Ne=function(){function t(){var t=this;this.Dc=500,this.Da=500,this.Ua=ws((function(n,i){return t.onResize(i)}),this.Dc),this.ja=null,this.qa=!0}return t.prototype.start=function(){var n=this;this.ja||(this.Ha=t.scheduleStart((function(){n.run()}),this.Da))},t.prototype.stop=function(){this.ja&&(Un(this.ja),this.ja=null),this.Ha()},t.scheduleStart=function(t,n){var i=0,r=null,s=function(){i=window.setTimeout((function(){i=0,t()}),n)};return"visible"===document.visibilityState?s():Dn(r={boundElement:document,type:"visibilitychange",listener:function(){"visible"===document.visibilityState&&(s(),Un(r),r=null)}}),function(){i>0&&(window.clearTimeout(i),i=0),null!==r&&(Un(r),r=null)}},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.run=function(){var n,i=this;0!==window.outerWidth&&(this.Fa=this.za=t.Va(),this.Ba=window.devicePixelRatio,this.Ja=this.Ba,this.Ga=window.outerWidth,this.Wa=window.innerWidth,this.Ka=window.innerHeight,this.Ya=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1,this.ja={boundElement:window.visualViewport||window,type:"resize",listener:function(t){return i.Ua(t)}},Dn(this.ja),this.collectInitialEvents())},t.prototype.collectInitialEvents=function(){if(this.ja){var n={type:ps.ZOOM,ts:0,val:t.Xa(this.za)};if(this.Ei(n),window.visualViewport){var i={type:ps.VIEWPORT_SCALE,ts:0,val:window.visualViewport.scale};this.Ei(i)}}},t.prototype.onResize=function(t){var n,i=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1;this.$a(i),window.visualViewport&&this.Za(i),this.Ga=window.outerWidth,this.Wa=window.innerWidth,this.Ka=window.innerHeight,this.Ya=i},t.prototype.$a=function(n){var i;window.devicePixelRatio!==this.Ja?(i=window.devicePixelRatio/this.Ba*this.Fa,this.Ja=window.devicePixelRatio,this.qa=!1):this.Ga===window.outerWidth&&this.Ka!==window.innerHeight&&this.Wa!==window.innerWidth&&this.Ya===n&&this.qa&&(i=window.outerWidth/window.innerWidth/n);if(void 0!==i){this.za=i;var r={type:ps.ZOOM,ts:0,val:t.Xa(i)};this.Ei(r)}},t.prototype.Za=function(t){if(t!==this.Ya){var n={type:ps.VIEWPORT_SCALE,ts:0,val:t};this.Ei(n)}},t.Va=function(){return t.Qa()?window.csScreen.deviceXDPI/window.csScreen.logicalXDPI:window.outerWidth/window.innerWidth},t.Qa=function(){return"deviceXDPI"in window.csScreen&&"logicalXDPI"in window.csScreen},t.Xa=function(t){return 100*t<<0},z([Wt("ZoomTracker.run")],t.prototype,"run",null),z([Wt("ZoomTracker.onResize")],t.prototype,"onResize",null),z([Wt("ZoomTracker.scheduleStart")],t,"scheduleStart",null),t}();!function(t){t[t.MUTATION=0]="MUTATION",t[t.WINDOW_PROPERTY=1]="WINDOW_PROPERTY"}(Gs||(Gs={})),function(t){t[t.COLOR_ENHANCER=0]="COLOR_ENHANCER",t[t.OTHER=1]="OTHER"}(Ws||(Ws={}));var Te,Re=function(){function t(t){this.tf=t,this.nf=500,this.Ha=null}return t.prototype.start=function(){var n=this;this.Ha=t.if((function(){n.initialDetection(),n.Ha=null}),this.nf)},t.prototype.stop=function(){var t;null===(t=this.fi)||void 0===t||t.disconnect(),this.fi=null,this.Ha&&this.Ha()},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.initialDetection=function(){var n=this;this.rf=[],this.sf=[],csArray.prototype.forEach.call(this.tf,(function(i){for(var r=i.id,s=!1,e={id:r,attributesBasedDetectors:{},childListBasedDetectors:{}},u=0,o=i.detectors;u<o.length;u++){var h=o[u],c=h.type;switch(c){case Gs.MUTATION:(s=!!document.querySelector(h.selector))||t.ef(e,h);break;case Gs.WINDOW_PROPERTY:s=h.property in window;break;default:}if(s){csArray.prototype.push.call(n.sf,r);break}}s||csArray.prototype.push.call(n.rf,e)})),this.ne(),this.uf()},t.prototype.uf=function(){this.sf.length>0&&this.hf(this.sf)},t.prototype.flushInitialEvent=function(){null!==this.Ha?(this.Ha(),this.initialDetection()):this.uf()},t.prototype.hf=function(t){var n={type:ps.EXTENSION,ts:0,ids:J([],t,!0)};this.Ei(n)},t.prototype.ne=function(){var t=this;0!==this.rf.length&&(this.fi=new csMutationObserver((function(n){return t.handleMutations(n)})),this.fi.observe(document.documentElement,{childList:!1,attributes:!0}),this.fi.observe(document.head,{childList:!0,attributes:!1}),this.fi.observe(document.body,{childList:!0,attributes:!0}))},t.prototype.handleMutations=function(t){var n,i=this,r=[];csArray.prototype.forEach.call(t,(function(t){"childList"===t.type?i.handleChildListMutation(t,r):"attributes"===t.type&&i.handleAttributesMutation(t,r)})),r.length>0&&((n=csArray.prototype.push).call.apply(n,J([this.sf],r,!1)),this.hf(r)),0===this.rf.length&&this.stop()},t.prototype.handleChildListMutation=function(n,i){var r=this;if(0!==n.addedNodes.length){var s=n.target;ti(n.addedNodes,(function(n){if(f(n))for(var e=0;e<r.rf.length;e++){var u=r.rf[e];if(t.cf(u,s.localName))if(null==u.childListBasedDetectors[s.localName]?void 0:csArray.prototype.some.call(u.childListBasedDetectors[s.localName],(function(t){return n.matches(t.selector)}))){csArray.prototype.push.call(i,u.id),csArray.prototype.splice.call(r.rf,e,1);break}}}))}},t.prototype.handleAttributesMutation=function(n,i){for(var r=n.target,s=0;s<this.rf.length;s++){var e=this.rf[s];if(t.af(e,r.localName))if(null==e.attributesBasedDetectors[r.localName]?void 0:csArray.prototype.some.call(e.attributesBasedDetectors[r.localName],(function(t){return r.matches(t.selector)}))){csArray.prototype.push.call(i,e.id),csArray.prototype.splice.call(this.rf,s,1);break}}},t.cf=function(t,n){return n in t.childListBasedDetectors},t.af=function(t,n){return n in t.attributesBasedDetectors},t.ef=function(t,n){var i=t.attributesBasedDetectors;"childList"===n.mutationType&&(i=t.childListBasedDetectors),n.target in i?csArray.prototype.push.call(i[n.target],n):i[n.target]=[n]},t.if=function(t,n){var i=0;i=window.setTimeout((function(){i=0,t()}),n);var r=window.clearTimeout;return function(){i>0&&(r.call(window,i),i=0)}},t.isSupported=function(){return/Chrome/i.test(navigator.userAgent)&&!/Android/i.test(navigator.userAgent)},z([Wt("ExtensionsTracker.initialDetection")],t.prototype,"initialDetection",null),z([Wt("ExtensionsTracker.handleMutations")],t.prototype,"handleMutations",null),z([Wt("ExtensionsTracker.handleChildListMutation")],t.prototype,"handleChildListMutation",null),z([Wt("ExtensionsTracker.handleAttributesMutation")],t.prototype,"handleAttributesMutation",null),t}(),Oe=[{id:Ws.COLOR_ENHANCER,detectors:[{type:Gs.MUTATION,target:"html",selector:"html[data-darkreader-mode]",mutationType:"attributes"},{type:Gs.MUTATION,target:"body",selector:"#hc_extension_svg_filters",mutationType:"childList"},{type:Gs.MUTATION,target:"body",selector:"#cvd_extension_svg_filter",mutationType:"childList"},{type:Gs.MUTATION,target:"html",selector:"html[class~=ss-shaded-scrollbars]",mutationType:"attributes"}]},{id:Ws.OTHER,detectors:[{type:Gs.MUTATION,target:"body",selector:"th-rw4gc",mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="cdnapgfjopgaggbmfgbiinmmbdcglnam"]',mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="dgmanlpmmkibanfdgjocnabmcaclkmod"]',mutationType:"childList"},{type:Gs.WINDOW_PROPERTY,property:"cvox"},{type:Gs.MUTATION,target:"body",selector:"#highlighter[style*=box-shadow]",mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="ddnpdohiipephjpdpohikkamhdikbldp"]',mutationType:"childList"},{type:Gs.MUTATION,target:"head",selector:'link[href*="emgfmfgandmhbgleikkoaebngboghfpe"]',mutationType:"childList"}]}],ke=function(){function t(){this.ff=0,this.vf=0,this.lf=0,this.df=0,this.wf=0}return t.prototype.incrementFocusWithKeyboard=function(){this.ff+=1},t.prototype.incrementFocusWithMouse=function(){this.vf+=1},t.prototype.incrementClickWithKeyboard=function(){this.lf+=1},t.prototype.incrementClickWithMouse=function(){this.df+=1},t.prototype.incrementScrollWithKeyboard=function(){this.wf+=1},t.prototype.buildKeyboardNavigationCounters=function(){return{focus:{keyboardCounter:this.ff,mouseCounter:this.vf},click:{keyboardCounter:this.lf,mouseCounter:this.df},scroll:{keyboardCounter:this.wf}}},t.prototype.reset=function(){this.ff=0,this.vf=0,this.lf=0,this.df=0,this.wf=0},t}(),Ie=function(){function t(){var t=this;this.yf=Xn((function(){return t.pf()}),5e3),this.qc=ws((function(n,i){return t.scrollListener()}),150),this.ff=!1,this.lf=!1,this.wf=!1,this.mf=[{boundElement:document,type:"click",listener:function(n){return t.clickListener(n)}},{boundElement:document,type:"focus",listener:function(n){return t.focusListener(n)}},{boundElement:document,type:"keydown",listener:function(n){return t.keyDownListener(n)}},{boundElement:document,type:"mousedown",listener:function(){return t.gf()}},{boundElement:document,type:"mouseover",listener:function(n){return t.mouseOverListener(n)}},{boundElement:document,type:"scroll",listener:function(){return t.qc()}},{boundElement:document,type:"wheel",listener:function(){return t.Af()}}],this.Sf=new ke}return t.prototype.start=function(){csArray.prototype.forEach.call(this.mf,(function(t){return Dn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.mf,(function(t){return Un(t)}))},t.prototype.onEvent=function(t){this.Ei=t},t.prototype.flushPendingKeyboardNavigationEvent=function(){this.qc.flushPending(),this.yf.flushPending()},t.prototype.clickListener=function(t){var n=Kn(t);Ft(n)&&ei.isElementFocusable(n)&&(this.lf?(this.Sf.incrementClickWithKeyboard(),this.lf=!1):this.Sf.incrementClickWithMouse(),this.yf())},t.prototype.focusListener=function(t){var n=Kn(t);this.ff&&Ft(n)&&ei.isElementFocusable(n)&&(this.Sf.incrementFocusWithKeyboard(),this.yf(),this.ff=!1)},t.prototype.keyDownListener=function(t){this.ff||"Tab"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(this.ff=!0),this.lf||"Spacebar"!==t.key&&" "!==t.key&&"Enter"!==t.key||(this.lf=!0),this.wf||"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"PageUp"!==t.key&&"PageDown"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||(this.wf=!0)},t.prototype.gf=function(){this.ff=!1,this.lf=!1},t.prototype.mouseOverListener=function(t){var n=Kn(t);Ft(n)&&ei.isElementFocusable(n)&&(this.Sf.incrementFocusWithMouse(),this.yf())},t.prototype.scrollListener=function(){this.wf&&(this.Sf.incrementScrollWithKeyboard(),this.yf(),this.wf=!1)},t.prototype.Af=function(){this.wf=!1},t.prototype.pf=function(){var t={type:ps.KEYBOARD_NAVIGATION,ts:0,val:this.Sf.buildKeyboardNavigationCounters()};this.Ei(t),this.Sf.reset()},z([Wt("Keyboard navigation Event handler type: click")],t.prototype,"clickListener",null),z([Wt("Keyboard navigation Event handler type: focus")],t.prototype,"focusListener",null),z([Wt("Keyboard navigation Event handler type: keydown")],t.prototype,"keyDownListener",null),z([Wt("Keyboard navigation Event handler type: mouseover")],t.prototype,"mouseOverListener",null),z([Wt("Event handler type: scroll")],t.prototype,"scrollListener",null),t}(),Ce=function(){function t(){var t=this;this.Ef=null,this.bf=[{boundElement:document,type:"selectionchange",listener:function(){return t.selectionChangeListener()}},{boundElement:document,type:"copy",listener:function(){return t.copyListener()}}]}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){csArray.prototype.forEach.call(this.bf,(function(t){return Dn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.bf,(function(t){return Un(t)}))},t.prototype.flushPendingTextHighlightEvent=function(){this.Ef&&this.Nf(this.Ef)},t.prototype.selectionChangeListener=function(){var t=document.getSelection();if(t)if(this.Ef){var n=this.Ef,i=n.anchorNode,r=n.anchorOffset;if(i===t.anchorNode&&r===t.anchorOffset){if(v(t.anchorNode)){var s=t.toString().length;s>this.Ef.length&&(this.Ef.length=s)}}else this.Nf(this.Ef)}else t.anchorNode&&v(t.anchorNode)&&0!==t.toString().length&&(this.Ef={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,length:t.toString().length})},t.prototype.copyListener=function(){this.Ef&&this.Tf()},t.prototype.Nf=function(t){var n={type:ps.TEXT_HIGHLIGHT,ts:0,len:t.length};this.Ei(n),this.Tf()},t.prototype.Tf=function(){this.Ef=null},z([Wt("Text highlight event handler type: selectionChange")],t.prototype,"selectionChangeListener",null),z([Wt("Text highlight event handler type: copy")],t.prototype,"copyListener",null),t}(),xe="v2/events",_e=["submit"],Le=function(){function t(t,n,i,r,s,e,u,o,h,c){this.M=t,this.W=n,this.K=i,this.ca=r,this.Cn=s,this._h=e,this.qi=u,this.Vu=o,this.rc=h,this.Dh=c}return t.prototype.init=function(){var t=this,n=new be,i=this.Dh.create("".concat(this.M.getTrackerUri(),"/").concat(xe),!0,"base64");this.Rf=this.Of(i),this.kf=this.If(n,this.Rf.getRecoveryStorage(),i),this.kf.init(),this.rc.addListeners(this.kf),this._h.register(_e,(function(n,i){t.kf.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.Rf.start(),this.kf.start(t)},t.prototype.onAfterNaturalPageView=function(){this.kf.initStates()},t.prototype.onAfterArtificialPageView=function(){this.kf.initStates(),this.kf.collectInitialEvents()},t.prototype.onArtificialPageViewEnd=function(){this.kf.clearStates()},t.prototype.onBeforeSessionRenewal=function(){this.kf.clearStates(),this.kf.stop(),this.Rf.stop()},t.prototype.onOptout=function(){this.kf.stop(),this.Rf.stop()},t.prototype.If=function(t,i,r){var s,e,u,o,h=new _s(window),c=new $s,a=new Xs(this.M,this.ca,this.Cn),f=new qs(this.M,this.ca,this.Vu),v=new ne(new Se),l=new Ee;this.M.accessibilityEnabled&&(s=new Ne,e=new Ie,u=new Ce,Re.isSupported()&&(o=new Re(Oe)));var d=new cr(this.M.getTrackerUri(),xe),w=new Ci(this.M,this.W,this.K,n);return new Zs(this.M,a,f,c,h,t,d,w,this.qi,this.K,i,this.ca,v,l,r,s,e,o,u)},t.prototype.Of=function(t){return new Qs(new te("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Te||(Te={}));var Pe=function(){function t(){this.Cf=Te.Natural}return t.prototype.setPageViewType=function(t){this.Cf=t},t.prototype.getRequestParameters=function(){return{pvt:this.Cf}},t}(),Me=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.li=n,e.xf=i,e.Z=r,e._f=s,e}return H(n,t),n.prototype.init=function(){this.Lf()},n.prototype.onStart=function(t){t?this.Pf():this.Mf()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.Df(t):this.Z.overridePath(t)},n.prototype.Mf=function(){this._f.setPageViewType(Te.Natural),this.li.emitBeforeNaturalPageView(),this.xf.send(),this.li.emitAfterNaturalPageView()},n.prototype.Pf=function(){this._f.setPageViewType(Te.Renewal),this.li.emitBeforeNaturalPageView(),this.xf.send(),this.li.emitAfterNaturalPageView()},n.prototype.Df=function(t){this._f.setPageViewType(Te.Artificial),this.li.emitArtificialPageViewEnd(),t&&this.Z.overridePath(t),this.li.emitBeforeArtificialPageView(),this.xf.send(),this.li.emitAfterArtificialPageView()},n.prototype.Lf=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.Df()}))},n}(fi),De=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Ue(){return{la:De}}var je,qe=function(){function t(t){this.Uf=t,this.jf=[],this.qf=!1}return t.prototype.getRequestParameters=function(){return{dr:this.Hf()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.Uf.getUrlMaskingPattern(t);csArray.prototype.push.call(this.jf,n)},t.prototype.enableRemoveQueryString=function(){this.qf=!0},t.prototype.disableRemoveQueryString=function(){this.qf=!1},t.prototype.Hf=function(){var t=this.qf?this.Uf.removeQueryString(this.Ff()):this.Ff();return this.Uf.anonymizeUrl(t,this.jf)},t.prototype.Ff=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),He=function(){function t(t){this.K=t,this.zf=this.Vf()&&"currentScript"in document}return t.prototype.Bf=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.Jf(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.Jf=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.zf||1!==this.Gh())return{};var t=this.Bf();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.Gh=function(){var t;return(null===(t=this.K.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.Vf=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Fe=["trackPageview"],ze=["setPath"],Ve=["setQuery"],Be=["referrer:maskUrl"],Je=["referrer:removeQueryString"],Ge=["referrer:keepQueryString"],We=function(){function t(t,n,i,r,s,e,u,o,h,c){this.M=t,this._h=n,this.li=i,this.W=r,this.K=s,this.nh=e,this.Zt=u,this.Uf=o,this.Z=h,this.Mh=c}return t.prototype.init=function(){var t=this,r=new et(this.M.getTrackerUri(),"pageview"),s=new Pe;this.Gf=new Me(this.li,r,this.Z,s);var e=new qe(this.Uf);this.Gf.init(),r.setRequestParametersProviders(this.M,this.W,this.K,ri,e,this.Z,this.nh,i,this.Zt,n,s,new He(this.K),this.Mh),this._h.register(Fe,(function(n){return t.Gf.triggerArtificialPageView(n)})),this._h.register(ze,(function(n){return t.Z.overridePath(n)})),this._h.register(Ve,(function(n){return t.Z.overrideQuery(n)})),this._h.register(Be,(function(t){return e.addUrlMaskingPattern(t)})),this._h.register(Je,(function(){return e.enableRemoveQueryString()})),this._h.register(Ge,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Gf.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Gf.stop()},t}(),Ke=function(){function t(t){this.Tc=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.Tc.hasValidEventTarget(r)&&i.Wf(r,t)&&n(r)}},t.prototype.Wf=function(t,n){var i=Kn(t);return O.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!O},t}(),Ye=function(){function t(){}return t.prototype.onLoad=function(t){this.Jt=t},t.prototype.onLoadCallbackExecute=function(){this.Jt()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.Kf(t)},t.prototype.Kf=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},z([Wt("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),Xe=["clearSession"],$e=["extendSession"],Ze=function(){function t(t,n,i){this.W=t,this.K=n,this._h=i}return t.prototype.init=function(){var t=this;this._h.register(Xe,(function(){return t.K.removeSession()})),this._h.register($e,(function(){return t.K.extendSessionPeriodically()}))},t.prototype.onBeforeNaturalPageView=function(){this.W.createOrUpdateVisitor(),this.K.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.K.abortQuotaServiceRequest(),this.W.createOrUpdateVisitor(),this.K.createOrUpdateSession()},t.prototype.onOptout=function(){this.W.removeVisitor(),this.K.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.K.updateRecordingState(t,n)},t}(),Qe=function(){function t(t,n){this.K=t,this.W=n,this.Yf=!1}return t.prototype.onSessionExpired=function(t){this.Xf=t},t.prototype.isSessionValid=function(){if(this.Yf)return!0;var t=this.K.hasValidSession(),n=!1;return this.K.pollCacheRefreshEvent()&&(n=this.W.isSessionRenewed()),t&&!n||!this.$f()?t:(this.Zf=wt(),this.Yf=!0,this.Xf(),this.Yf=!1,this.K.hasValidSession())},t.prototype.$f=function(){return!jt(this.Zf)||wt()-this.Zf>6e4},t}(),tu=function(t){function n(n,i,r,s,e,u,o){var h=t.call(this)||this;return h.Z=n,h.Qf=i,h.fa=r,h.tv=s,h.nv=e,h.iv=u,h.rv=o,h}return H(n,t),n.prototype.init=function(){this.tv.init(),this.sv(),this.ev(),this.uv()},n.prototype.collectInitialProducts=function(){var t=this.Qf.collectProductsAndAnchors(),n=t.products,i=t.anchors;this.ov(i),this.tv.send(this.hv(n))},n.prototype.ov=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){n.rv.pushProduct(t)}))},n.prototype.onIframeEmerchandisingMessage=function(t){this.tv.send(t)},n.prototype.clearState=function(){this.iv.clearState(),this.Qf.flushEvents(),this.nv.isEmpty()||this.cv(!1),this.tv.clearState()},n.prototype.initStates=function(){this.tv.initStates()},n.prototype.onStart=function(){this.fa.start(),this.Qf.start(),this.iv.start()},n.prototype.onStop=function(){this.fa.stop(),this.Qf.stop(),this.iv.stop()},n.prototype.uv=function(){var t=this;this.iv.onProductExposed((function(n){t.nv.addProductExposure(n),t.nv.isFull()&&t.cv(!1)}))},n.prototype.hv=function(t,n){void 0===n&&(n=[]);var i={products:t,targetUrl:this.Z.getAnonymizedUrl(),windowWidth:ri.windowWidth(),windowHeight:ri.windowHeight()};return n.length>0&&(i.exposures=n),i},n.prototype.sv=function(){var t=this;this.Qf.init(),this.Qf.onProductsDetection((function(n){var i=n.products,r=n.anchors;t.nv.addProducts(i),t.nv.isFull()&&t.cv(!1),t.ov(r)}))},n.prototype.ev=function(){var t=this;this.fa.onEvent((function(){t.iv.clearState(),t.av()}))},n.prototype.av=function(){this.nv.isEmpty()||this.cv(!0)},n.prototype.cv=function(t){var n=this.hv(this.nv.getProducts(),this.nv.getProductsExposure());t?this.tv.sendBeacon(n):this.tv.send(n)},n}(fi),nu=function(){function t(t,n){this.configuration=t,this.projectPathComputation=n}return t.prototype.collectProductsAndAnchors=function(t){void 0===t&&(t=document);for(var n=[],i=this.getAllValidAnchors(this.configuration.hostnames,t),r=0,s=i;r<s.length;r++){var e=s[r];csArray.prototype.push.call(n,this.buildProductFromAnchor(e))}return{products:n,anchors:i}},t.prototype.getAllValidAnchors=function(t,n){var i=this;return void 0===n&&(n=document),csArray.prototype.filter.call(ei.findAllElements("a",n),(function(n){return i.isAnchorValid(n,t)}))},t.prototype.isAnchorValid=function(t,n){return("https:"===t.protocol||"http:"===t.protocol)&&t.offsetHeight>0&&t.offsetWidth>0&&""!==t.hostname&&Rt(t.hostname,n)},t.prototype.buildProductFromAnchor=function(t){return{targetPath:this.projectPathComputation.getElementPath(t),href:t.href}},z([Wn("getAllValidAnchors")],t.prototype,"getAllValidAnchors",null),t}(),iu=function(t){function n(n,i,r){var s=t.call(this,n,i)||this;return s.fi=r,s.fv={subtree:!0,childList:!0},s}return H(n,t),n.prototype.init=function(){this.ne()},n.prototype.start=function(){this.fi.start(),this.vv()},n.prototype.stop=function(){this.fi.stop()},n.prototype.flushEvents=function(){this.fi.flushPendingMutations()},n.prototype.onProductsDetection=function(t){this.lv=t},n.prototype.ne=function(){this.fi.init(),this.wv()},n.prototype.wv=function(){var t=this;this.fi.onChildListMutation((function(n){return t.yv(n)})),this.fi.onAttachShadowMutation((function(n){return t.pv(n)}))},n.prototype.yv=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];if(l(i)&&this.isAnchorValid(i,this.configuration.hostnames)){var r=this.buildProductFromAnchor(i);this.mv({products:[r],anchors:[i]})}else if(Ft(i)){var s=this.collectProductsAndAnchors(i);this.mv(s)}}},n.prototype.pv=function(t){var n=t.shadowRoot;this.mv(this.collectProductsAndAnchors(n)),this.fi.observe(n,this.fv)},n.prototype.mv=function(t){t.products.length>0&&this.lv(t)},n.prototype.vv=function(){this.fi.observe(document,this.fv),this.gv(document)},n.prototype.gv=function(t){var n=this,i=ii.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){t.shadowRoot&&n.fi.observe(t.shadowRoot,n.fv)}))},n}(nu),ru=function(){function t(n){void 0===n&&(n=t.Av),this.Sv=[],this.Ev=[],this.bv=new oi(n)}return t.prototype.addProducts=function(t){var n;this.bv.addString(csJSON.stringify(t)),(n=csArray.prototype.push).call.apply(n,J([this.Sv],t,!1))},t.prototype.addProductExposure=function(t){this.bv.addString(csJSON.stringify(t)),csArray.prototype.push.call(this.Ev,t)},t.prototype.reset=function(){this.bv.reset(),this.Sv=[],this.Ev=[]},t.prototype.isEmpty=function(){return 0===this.Sv.length&&0===this.Ev.length},t.prototype.isFull=function(){return this.bv.isThresholdReached()},t.prototype.getProducts=function(){return this.Sv},t.prototype.getProductsExposure=function(){return this.Ev},t.Av=10240,t}(),su=function(t){function n(n,i){var r=t.call(this)||this;return r.M=n,r.Je=i,r.Nv="function"==typeof window.IntersectionObserver,r}return H(n,t),n.prototype.onProductExposed=function(t){this.Tv=t},n.prototype.clearState=function(){this.Nv&&this.isStarted&&this.Rv()},n.prototype.onStart=function(){this.Nv&&(this.Ov=new Map,this.kv())},n.prototype.onStop=function(){this.Nv&&(this.Rv(),this.Je.stop(),this.Ov.clear())},n.prototype.kv=function(){var t=this;this.Je.onVisibilityChange((function(n,i){i===rr.VisibleInViewPort?t.Iv(n):t.Cv(n)})),this.Je.start()},n.prototype.Rv=function(){var t=this;this.Ov.forEach((function(n,i){t.Cv(i)})),this.Ov.clear()},n.prototype.Iv=function(t){this.Ov.set(t,wt())},n.prototype.Cv=function(t){var i=this.Ov.get(t);if(void 0!==i){var r=wt()-i;this.Ov.delete(t),r<n.EXPOSURE_DURATION_THRESHOLD||this.Tv(this.xv(t,r))}},n.prototype.xv=function(t,n){var i=t.href;return{targetPath:D.getElementPath(t,{dynamicIdRegex:this.M.dynamicIdRegex}),duration:n,href:i}},n.EXPOSURE_DURATION_THRESHOLD=150,n}(fi),eu=function(){function t(){var t=this;this.De=new ur((function(n){return n.isConnected&&t.je(n)}))}return t.prototype.onElementAvailable=function(t){this.je=t},t.prototype.pushProduct=function(t){this.De.push(t)},t.prototype.getElements=function(t){return B(this,(function(t){return[2]}))},t}(),uu=function(){function t(t,n,i,r){this.Wi=t,this._v=n,this.nv=i,this.Lv=r}return t.prototype.init=function(){this.Pv()},t.prototype.initStates=function(){this.Mv()},t.prototype.clearState=function(){this.Wi.removeQueryParams()},t.prototype.send=function(t){this.Dv(t)},t.prototype.sendBeacon=function(t){this.Uv(t)},t.prototype.Mv=function(){this.Wi.setQueryParams(this.Lv.getRequestParameters())},t.prototype.Pv=function(){var t=this;this._v.before((function(){t.Mv()})),this._v.setRequestParametersProviders(this.Lv),this._v.after((function(){t.nv.reset(),t.Mv()}))},t.prototype.Dv=function(t){this.Wi.send(t),this.nv.reset()},t.prototype.Uv=function(t){this._v.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this._v.send()},t}(),ou="display",hu=function(){function t(t,n,i,r,s,e,u,o,h){this.M=t,this.ca=n,this.Dh=i,this.jv=r,this.Zt=s,this.Z=e,this.rc=u,this._h=o,this.Zs=h}return t.prototype.init=function(){var t=new Ji(new Xi,this.Zs),n=new iu(this.M,this.ca,t),i=new Ee,r=new ru,s=new eu,e=new su(this.M,new sr(s,{trackOnce:!1})),u=new uu(this.Dh.create("".concat(this.M.getTrackerUri(),"/").concat(ou),!0,"base64"),new cr(this.M.getTrackerUri(),ou),r,new Ci(this.jv,this.Zt));this.qv=new tu(this.Z,n,i,u,r,e,s),this.qv.init(),this.rc.addListeners(this.qv)},t.prototype.onStartTracking=function(){this.qv.start(),this.qv.collectInitialProducts()},t.prototype.onArtificialPageViewEnd=function(){this.qv.clearState()},t.prototype.onAfterNaturalPageView=function(){this.qv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.qv.initStates(),this.qv.collectInitialProducts()},t.prototype.onBeforeSessionRenewal=function(){this.qv.clearState(),this.qv.stop()},t.prototype.onOptout=function(){this.qv.stop()},z([Wn("Emerch.onStartTracking")],t.prototype,"onStartTracking",null),t}();function cu(t){return t.tagDeploymentMode===je.DualCollectionReview||t.tagDeploymentMode===je.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION"}(je||(je={}));var au,fu=function(){function t(t,n,i,r){this.M=t,this.W=n,this.K=i,this._n=r}return t.prototype.init=function(){this.Hv=!1,this.Fv=!1},t.prototype.loadClicktalePtc=function(){!this.Hv&&this.M.ptcDomain&&this.M.ptcGuid&&this.zv()},t.prototype.getSessionData=function(){var t=this.M.projectId,n=this.W.getVisitor();null==n&&Gt.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,s=i.visitsCount,e=this.K.getSession();return null===e&&Gt.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:s,pageNumber:(null!=e?e:{}).pageNumber}},t.prototype.startDataCollection=function(t){this.Fv||(this.M.tagDeploymentMode===je.LoadClicktalePtc&&this.Vv()&&this._n.initCTPII(),cu(this.M)&&(this._n.initCTPII(),t(),this.Fv=!0))},t.prototype.Vv=function(){return this.M.useMalkaPipeline&&this.K.isReplayRecorded()},t.prototype.zv=function(){this.Hv=!0;var t=this.Bv();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.Bv=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.M.ptcSha512&&this.M.ptcSnapshotPath?(t.integrity="sha512-".concat(this.M.ptcSha512),t.src="https://".concat(this.M.ptcDomain,"/").concat(this.M.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.M.ptcDomain,"/ptc/").concat(this.M.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(au||(au={}));var vu,lu=function(){function t(t,n,i,r,s,e,u){this.M=t,this.W=n,this.K=i,this.Z=r,this._h=s,this.Jv=e,this._n=u}return t.prototype.init=function(){var t=this;this.Gv=new fu(this.M,this.W,this.K,this._n),this.Gv.init(),this.Wv(),this._h.register(["getSessionData"],(function(){return t.Gv.getSessionData()})),this._h.register(["startDataCollection"],(function(){t.Gv.startDataCollection(t.Jv)}))},t.prototype.Wv=function(){cu(this.M)&&this.Gv.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.M.tagDeploymentMode===je.LoadClicktalePtc&&(!this.M.useMalkaPipeline&&this.K.isReplayRecorded()||this.Gv.loadClicktalePtc())},t.prototype.onAfterArtificialPageView=function(){!this.K.isReplayRecorded()&&au.isRecording()&&this.M.tagDeploymentMode===je.LoadClicktalePtc&&au.triggerLogicalPageView(this.Z.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.K.isReplayRecorded()&&au.isRecording()&&au.triggerLogicalPageView(this.Z.getAnonymizedUrl())},t.prototype.onOptout=function(){au.isRecording()&&au.stopRecording()},t}(),du="@user-identifier@",wu=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.M=n,u.Kv=i,u.su=r,u.Yv=s,u.Xv=e,u.$v=[],u.Zv=[],u}return H(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.$v,(function(n){return t.trackPageEvent(n)})),this.$v=[],csArray.prototype.forEach.call(this.Zv,(function(n){return t.trackEventTriggerRecording(n)})),this.Zv=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.Qv(t)&&(this.tl(t)?this.Xv.isSupported()&&this.nl(t):this.il(t)):csArray.prototype.push.call(this.$v,t)},n.prototype.tl=function(t){return K(t,du)},n.prototype.nl=function(t){return V(this,void 0,void 0,(function(){var n,i;return B(this,(function(r){switch(r.label){case 0:return this.M.customHashIdEnabled?(n=csString.prototype.slice.call(t,du.length),this.Xv.isValidInput(n)?[4,this.Xv.digest(n,this.M.projectId)]:(Gt.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this.rl={eventName:i,isETR:!1,isCustomHashId:!0},this.sl()):Gt.warn("Page event: unable to compute customHashId"),this.M.encryptionEnabled?(this.Yv.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.il=function(t){this.Yv.emitPageEvent(t),this.rl={eventName:t,isETR:!1,isCustomHashId:!1},this.sl(),this.M.tagDeploymentMode===je.LoadClicktalePtc&&au.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.Qv(t)&&(this.M.useMalkaPipeline&&this.M.malkaEtrEnabled?this.el(t):this.ul(t)):csArray.prototype.push.call(this.Zv,t)},n.prototype.el=function(t){K(t,"@ETP@")?this.Yv.emitEventTriggerRecording(t,on.ETR_PAGE):this.Yv.emitEventTriggerRecording(t,on.ETR_SESSION),this.rl={eventName:t,isETR:!0,isCustomHashId:!1},this.sl()},n.prototype.ul=function(t){(function(t){return cu(t)||t.tagDeploymentMode===je.LoadClicktalePtc})(this.M)&&(this.Yv.emitEventTriggerRecording(t,on.ETR_LEGACY),this.rl={eventName:t,isETR:!0,isCustomHashId:!1},this.sl(),this.M.tagDeploymentMode===je.LoadClicktalePtc&&au.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.su.compressSync(this.rl.eventName,"base64"),ct:this.su.algorithm,isETR:"".concat(this.rl.isETR),isCustomHashId:"".concat(this.rl.isCustomHashId)}},n.prototype.sl=function(){this.Kv.send()},n.Qv=function(t){return Dt(t)&&!!csString.prototype.trim.call(t)},n}(fi),yu=function(){function t(t){this.ol=t,this.hl=!1}return t.prototype.init=function(){this.hl=this.cl(),this.hl&&(this.Su=new TextEncoder)},t.prototype.cl=function(){return!!(this.ol&&this.ol.subtle&&this.ol.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.isSupported=function(){return this.hl},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.al=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t.prototype.digest=function(t,n){return V(this,void 0,void 0,(function(){var i,r,s;return B(this,(function(e){switch(e.label){case 0:if(!this.hl)return[2,null];i=this.al(t,n),r=this.Su.encode(i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return s=e.sent(),[2,(u=s,o=csArray.from(new Uint8Array(u)),csArray.prototype.join.call(csArray.prototype.map.call(o,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),""))];case 3:return e.sent(),[2,null];case 4:return[2]}var u,o}))}))},t}(),pu=["trackPageEvent"],mu=["trackEventTriggerRecording"],gu=function(){function t(t,n,i,r,s){this.M=t,this._h=n,this.su=i,this.xh=r,this.Yv=s}return t.prototype.init=function(){var t=this,n=new et(this.M.getTrackerUri(),"pageEvent"),i=new yu(window.crypto);i.init(),this.vl=new wu(this.M,n,this.su,this.Yv,i),n.setRequestParametersProviders(this.vl,this.xh),this._h.register(pu,(function(n){t.vl.trackPageEvent(n)})),this._h.register(mu,(function(n){t.vl.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.vl.start()},t}();!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(vu||(vu={}));var Au,Su=["value","checked","src","data","alt"],Eu=["[data-cs-mask]","img[src^='data:']","script"],bu=[{selector:"input:not([type=button])",attrName:"value"}],Nu=[".ctHidden, textarea"],Tu=[{selector:".ctHidden, input:not([type=button])",attrName:"value"}],Ru=function(){function t(t){var n;this.M=t,this.ll=[],this.dl="",this.vu=document.createElement("div"),cu(this.M)||(this.dl=this.wl(this.dl,Eu),(n=csArray.prototype.push).call.apply(n,J([this.ll],bu,!1)))}return t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return ar(t,i.vu)}));this.dl=this.wl(this.dl,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&ar(t.selector,i.vu)&&!i.yl(t)&&csArray.prototype.push.call(i.ll,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.dl],Attributes:this.ll}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.dl=this.wl(this.dl,Nu),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var s=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return ar(t,r.vu)}));this.dl=this.wl(this.dl,s),(t=csArray.prototype.push).call.apply(t,J([this.ll],Tu,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&ar(t.rule,r.vu)&&csArray.prototype.push.call(r.ll,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(Su,n)||this.pl(t,n,this.ll)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===vu.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===vu.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(f(t)||A(t)){this.ml(t);var i=ii.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return t.shadowRoot&&n.ml(t.shadowRoot)}))}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(f(t)||A(t)){this.gl(t);var i=ii.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return t.shadowRoot&&n.gl(t.shadowRoot)}))}},t.prototype.gl=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.ml=function(t){var n=this;if(this.Al(t))return this.Sl(t),void this.El(t);this.bl(t,this.dl)?(this.Nl(t),this.El(t)):ti(t.querySelectorAll(this.dl),(function(t){n.Tl(t)||(n.Nl(t),n.El(t))}))},t.prototype.Tl=function(t){return w(t)&&K(t.src,"data:image/svg+xml")&&t.src.length<=1024},t.prototype.Nl=function(t){t.__contentsquare_sensitive=vu.Sensitive},t.prototype.Sl=function(t){t.__contentsquare_sensitive=vu.SensitiveChild},t.prototype.El=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.Sl(i),i=n.nextNode()},t.prototype.Al=function(t){return!(!csNodeparentNode.apply(t)||!f(csNodeparentNode.apply(t))&&!A(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||E(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.bl=function(t,n){return f(t)&&O.call(t,n)},t.prototype.pl=function(t,n,i){return csArray.prototype.some.call(i,(function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&O.call(t,i.selector)}))},t.prototype.wl=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=t,r=0,s=n;r<s.length;r++)for(var e=s[r],u=0,o=csString.prototype.split.call(e,",");u<o.length;u++){var h=o[u];-1===csString.prototype.indexOf.call(i,h)&&(i+=",".concat(h))}return i},t.prototype.yl=function(t){return csArray.prototype.some.call(this.ll,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),Ou=function(){function t(t){this._h=t}return t.prototype.init=function(){this.Rl(t.Ol,St),this.Rl(t.kl,At)},t.prototype.Rl=function(t,n){this._h.register([t],(function(t,i){Dt(t)&&Dt(i)&&Gt.error(i,"".concat(n).concat(t))}))},t.kl="logSnippetError",t.Ol="logImplementationSnippetError",t}(),ku=function(){function t(t,n,i,r){this.M=t,this.ic=n,this.Ch=i,this.rc=r}return t.prototype.init=function(){var t=this;this.ic.onChildMessage((function(n,i,r){return t.rc.emitIframeEvent(n,i,r)})),this.ic.setRecordingStatusCallback((function(){return t.Ch.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.M.iframesTracking&&this.ic.start()},t.prototype.onOptout=function(){this.M.iframesTracking&&this.ic.stop()},t.prototype.onRecordingStatusChange=function(){this.M.iframesTracking&&this.ic.onRecordingStatusChange(this.Ch.getRecordingStatus())},t}(),Iu=function(t){function n(n,i){var r=t.call(this)||this;return r.M=n,r._n=i,r.Il=0,r.Cl=new Map,r.xl={boundElement:window,type:"message",listener:function(t){return r._l(t)}},r}return H(n,t),n.prototype.onChildMessage=function(t){this.Ll=t},n.prototype.setRecordingStatusCallback=function(t){this.Pl=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=Ct.buildBaseMessage(It.RecordingStatus,kt.Parent,this.M.projectId);i.content=t,this.Cl.forEach((function(t){!n.Ml(t)&&t.port&&Ct.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=Ct.buildBaseMessage(t,kt.Parent,this.M.projectId);i.content=n,this.Dl(i)},n.prototype.onStart=function(){Dn(this.xl,!1),this.Ul()},n.prototype.onStop=function(){this.jl(),Un(this.xl,!1),this.ql()},n.prototype.Ul=function(){var t=this,n=this.Hl();this.Fl(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.zl(n)){var i={iframe:n};t.Cl.set(t.Il,i),t.Il+=1}})),this.Vl()},n.prototype.Hl=function(){var t=this;return csArray.prototype.filter.call(ei.findAllElements("iframe"),(function(n){return t.Bl(n)}))},n.prototype.Fl=function(t){var n=this;this.Cl.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.Jl(r,i)}))},n.prototype.Jl=function(t,n){n.port&&Ct.closeChannelPort(n.port),this.Cl.delete(t)},n.prototype.ql=function(){this.Cl.forEach((function(t){t.port&&Ct.closeChannelPort(t.port)})),this.Cl.clear()},n.prototype.zl=function(t){var n=null;return this.Cl.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.Bl=function(t){return t.id!==r&&(!t.src||Rt(Tt(t.src),this.M.hostnames))},n.prototype.Dl=function(t){this.Cl.forEach((function(n){n.port&&Ct.sendChannelMessage(n.port,t)}))},n.prototype.Vl=function(){var t=this;this.Cl.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Gl(i);Ct.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.jl=function(){var t=this.Wl();this.Cl.forEach((function(n){n.port?Ct.sendChannelMessage(n.port,t):n.iframe.contentWindow&&Ct.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Gl=function(t){return Ct.buildBaseMessage(It.Discovery,kt.Parent,this.M.projectId,t)},n.prototype.Wl=function(){return Ct.buildBaseMessage(It.Stop,kt.Parent,this.M.projectId)},n.prototype.Kl=function(t,n){var i=this,r=this.Cl.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.Yl(t,r)}):Gt.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Il,")"))},n.prototype.Xl=function(t){if(t.port){var n=Ct.buildBaseMessage(It.RecordingStatus,kt.Parent,this.M.projectId),i=this.Pl();this.Ml(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,Ct.sendChannelMessage(t.port,n)}},n.prototype.Yl=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===It.EndOfBufferedMessages?this.Xl(n):this.Ll(n.iframe,i,r)}else Gt.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype._l=function(t){if(Ct.isMessageValid(t,kt.Child,this.M.projectId,this.M.hostnames))switch(t.data.type){case It.Discovery:if(void 0===t.data.id)return void this.Ul();if(t.ports&&1===t.ports.length&&this.Cl.has(t.data.id))return void this.Kl(t.data.id,t.ports[0]);Gt.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case It.ChildLogMessage:this.Ll(null,It.ChildLogMessage,t.data.content);break;default:Gt.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Ml=function(t){return this._n.isSensitive(t.iframe)||this._n.isSensitiveChild(t.iframe)},n}(fi),Cu=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.$l(n.x)-this.$l(t.x),r=this.$l(n.y)-this.$l(t.y),s=n.time-t.time;return{duration:s,distance:this.Zl(i,r),direction:this.Ql(i,r),velocity:this.td(i,r,s)}},t.prototype.computePinchMetrics=function(t,n){var i=this.$l(n.x)-this.$l(t.x),r=this.$l(n.y)-this.$l(t.y);return{duration:n.time-t.time,distance:this.Zl(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.$l=function(t){return t/window.devicePixelRatio},t.prototype.Zl=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.td=function(t,n,i){var r=i/1e3,s=t/r,e=n/r;return Math.round(Math.abs(s)+Math.abs(e))},t.prototype.Ql=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?pr.RIGHT:pr.LEFT:n>0?pr.DOWN:pr.UP},t}(),xu=function(){function t(){this.nd={},this.rd=new Cu,this.sd()}return t.prototype.onGesture=function(t){this.ud=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.od(t)){this.ad(t)&&this.sd();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:wt()};if(1===t.touches.length)this.nd.startPinchTime=n.time,this.nd.firstTouch=n;else if(2===t.touches.length&&(this.nd.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:wt()},this.nd.firstTouch&&this.nd.secondTouch)){var i=this.rd.computePinchMetrics(this.nd.firstTouch,this.nd.secondTouch);this.vd=i.distance}csArray.prototype.push.call(this.ld,n),this.dd=Kn(t)}},t.prototype.processActionMove=function(){this.wd=!0},t.prototype.processActionUp=function(t){if(this.yd(t)){if(csArray.prototype.push.call(this.ld,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:wt()}),this.pd(t)&&this.nd.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.nd.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:wt()};this.nd.firstTouch&&(this.nd.firstTouch=n,this.nd.secondTouch=i),this.md(t)}this.vd||this.gd()&&this.Ad(t)}},t.prototype.sd=function(){this.ld=[],this.dd=null,this.wd=!1,this.vd=null},t.prototype.Ad=function(t){var n=this.rd.compute(this.ld[0],this.ld[1]),i=this.wd?this.Sd(n):this.Ed(n);this.ud(i,t)},t.prototype.md=function(t){if(this.nd.firstTouch&&this.nd.secondTouch){var n=this.rd.computePinchMetrics(this.nd.firstTouch,this.nd.secondTouch),i=this.bd(n);i&&this.ud(i,t)}},t.prototype.bd=function(t){if(this.vd&&!(this.rd.getScale(this.vd,t.distance)<.1))return{type:this.vd>t.distance?yr.PINCH_IN:yr.PINCH_OUT,target:this.dd,distance:t.distance}},t.prototype.Sd=function(t){return{type:t.velocity<100?yr.DRAG:yr.FLICK,target:this.dd,velocity:t.velocity,distance:t.distance,direction:t.direction}},t.prototype.Ed=function(t){return{type:t.duration<1e3?yr.TAP:yr.LONG_PRESS,target:this.dd}},t.prototype.ad=function(t){return 1===t.touches.length},t.prototype.gd=function(){return 2===this.ld.length},t.prototype.od=function(t){return t.touches.length>0},t.prototype.yd=function(t){return t.changedTouches.length>0},t.prototype.pd=function(t){return this.wd&&!!this.vd&&1===t.changedTouches.length&&1===t.touches.length},t}(),_u=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}(),Lu=function(t){function n(n){var i=t.call(this)||this;return i.Nd=n,i.Cs=[{boundElement:document,type:"touchstart",listener:function(t){return i.pr(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.pr(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.pr(t)}}],i.Td=new xu,i.Td.onGesture((function(t,n){return i.Ju(t,n)})),i}return H(n,t),n.prototype.Ju=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Cs,(function(t){return Dn(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Cs,(function(t){return Un(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.pr=function(t){var n=this;this.Nd.tryToExecute("process gesture event",(function(){if(n.Td.isValidTouchEvent(t))switch(t.type){case"touchstart":n.Td.processActionDown(t);break;case"touchmove":n.Td.processActionMove();break;case"touchend":n.Td.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===yr.FLICK||t.type===yr.DRAG},n}(_u),Pu=function(t){function n(n,i){var r=t.call(this)||this;return r.Wi=n,r.Rd=i,r.Od=0,r}return H(n,t),n.prototype.onStart=function(){var t=this;Gt.isPerfLoggingActive()&&(this.kd=window.setInterval((function(){return t.Id()}),n.Cd))},n.prototype.onStop=function(){Gt.isPerfLoggingActive()&&(this.Id(),clearInterval(this.kd))},n.prototype.Id=function(){if(!(jn.isEmpty()||this.Od>=n.xd)){var t=jn.getAll();this.Od++;var i=F({a:n._d,l:n.Ld},this.Rd.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return F(F({},t),i)}));this.Wi.send(r),jn.clear()}},n._d="uxa",n.Ld="perf",n.Cd=5e3,n.xd=5,n}(fi),Mu=function(){function t(t,n,i){this.M=t,this.Rd=n,this.Dh=i}return t.prototype.init=function(){this.Pd=new Pu(this.Dh.create(this.M.getLoggerUri(),!0),this.Rd)},t.prototype.onStartTracking=function(){this.Pd.start()},t.prototype.onOptout=function(){this.Pd.stop()},t}(),Du=function(){function t(){this.Md=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,s){this.Md=!0,this._s=t,this._n=n,this.Hh=i,this.jh=r,this.Ln=s},t.prototype.getRecordingStatus=function(){return this.Md?{isRecording:this._s.isRecording(),isMutationTrackerStarted:this._s.isMutationTrackerStarted(),PIISelectors:this._n.getPIISelectors(),capturedElementSelector:this.jh.getWhitelistedElementsSelector(),useAnonymization:this.Hh.shouldUseAnonymization(),encryptionSelectors:this.Ln.getEncryptionSelectors()}:{isRecording:!1}},t}(),Uu=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,N,T,R,O,k){var I=this;this.jv=t,this.su=n,this.W=i,this.K=r,this.li=s,this._h=e,this.Dd=u,this.M=o,this.Ud=h,this.jd=c,this.qd=a,this.nh=f,this.D=v,this.ca=l,this.Uf=d,this.Z=w,this.Hd=y,this.Yv=p,this.Fi=m,this.zi=g,this.Vi=A,this.Ji=S,this.rc=E,this.Zt=b,this.Fd=N,this.Mh=T,this.zd=R,this.Zs=O,this.Dh=k,this.Vd=function(t){void 0===t&&(t=!1),I.Bd.start(t),I.Jd.start()}}return t.prototype.start=function(){var t=this;if(this.Ud.init(),this.jd.init(),!this.jd.isActive()){var n=new Qe(this.K,this.W),i=new Ke(this.ca),r=new Lu(Gt),s=new Le(this.M,this.W,this.K,this.ca,i,this._h,n,r,this.rc,this.Dh),e=new Ss(this._h,this.K,this.M,this.jv,this.su,this.D),u=new Ru(this.M),o=new Du,h=new Iu(this.M,u),c=new ku(this.M,h,o,this.rc);c.init();var a=new vs(this.W,this.K,this._h,this.rc,h,this.M),f=new xs(this.M,this.W,this.K,this._h,this.D,n,this.Z);this.Bd=new We(this.M,this._h,this.li,this.W,this.K,this.nh,this.Zt,this.Uf,this.Z,this.Mh);var v=new Ze(this.W,this.K,this._h),l=new lu(this.M,this.W,this.K,this.Z,this._h,this.Vd,u),d=new gu(this.M,this._h,this.su,this.jv,this.Yv),w=new Ou(this._h),y=new Mu(this.M,new gt(this.M,this.D),this.Dh);if(this.Jd=new Ye,this.qd.init(),a.init(),e.init(),f.init(),this.Fd.init(),this.Bd.init(),v.init(),l.init(),d.init(),this.Hd.init(),w.init(),y.init(),this.zd.init(),this.li.addListeners(v,this.Dd,s,this.qd,a,this.Fd,this.Bd,l,d,e,c,y),Jr.isRecordingSupported()){var p=new es(o,this.K,this.M,this.su,i,this.nh,this.jv,this._h,this.D,n,this.Z,u,this.Fi,this.zi,this.Vi,r,this.Ji,this.li,this.Yv,this.rc,this.Mh,this.Zs,this.Dh);p.init(),this.li.addListeners(p)}if(this.M.eMerchandisingEnabled){var m=new hu(this.M,this.ca,this.Dh,this.jv,this.Zt,this.Z,this.rc,this._h,this.Zs);m.init(),this.li.addListeners(m)}s.init(),n.onSessionExpired((function(){t.li.emitBeforeSessionRenewal(),t.Gd(!0),t.li.emitAfterSessionRenewal()})),this.Gd()}},t.prototype.Gd=function(t){var n=this;void 0===t&&(t=!1),this._h.start(),this.Jd.onLoad((function(){n.li.emitStartTracking(t)})),cu(this.M)&&!t||this.Vd(t)},t}(),ju=function(){function t(t,n,i,r,s,e,u,o){this.M=t,this.W=n,this.$t=i,this.Wd=r,this.Kd=s,this.Yd=e,this.tn=u,this.Xd=o}return t.prototype.compute=function(t){var n=this;this.M.crossDomainTracking&&!this.M.cookielessTrackingEnabled?this.M.crossDomainSingleIframeTracking?this.tn.start((function(){return n.$d(t)})):this.Yd.applyUpToDate((function(){return n.$d(t)})):this.$d(t)},t.prototype.$d=function(t){this.Kd.handle(),this.Wd.clear(),this.Zd()?(this.Wd.restoreClearedVisitor(),t(!0)):(this.$t.exclude(this.M),t(!1))},t.prototype.Zd=function(){var t=$.boolean(this.M.sampleRate);return this.Xd.isForceIncluded()||!this.$t.isExcluded()&&this.W.doesVisitorExist()||!this.$t.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(Au||(Au={}));var qu,Hu=function(){function t(t,n,i){this.M=t,this.Qd=n,this.K=i}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.tw(),this.K.removeSession()),this.nw(t),this.setVisitor(t)},t.prototype.tw=function(){return{id:Au.generate(),visitsCount:0,appliedTrackingDraw:this.M.lastTrackingDraw,creationTimestamp:yt(),lastVisitTimestamp:0,hitTimestamp:0,expires:wt()+this.M.visitorCookieTimeout}},t.prototype.nw=function(t){var n=yt();this.K.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.M.lastTrackingDraw,this.iw=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.Qd.get()},t.prototype.setVisitor=function(t){this.Qd.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.Qd.get()},t.prototype.removeVisitor=function(){this.Qd.remove()},t.prototype.handleSubdomainChange=function(){this.Qd.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.iw&&t.visitsCount!==this.iw},t}(),Fu=function(t){this.configuration=t},zu=function(t){function n(n,i,r){var s=t.call(this,n)||this;return s.configuration=n,s.Xd=i,s.Z=r,s}return H(n,t),n.prototype.sanitizeSessionRecordingState=function(t){return t},n.prototype.computeInitialRecordingState=function(t){return this.Xd.isForceLegacyReplayRecorded()||$.percentage()<this.configuration.replayRecordingRate&&Jr.isRecordingSupported()?sn.REPLAY_RECORDING_ENABLED:sn.REPLAY_RECORDING_DISABLED},n.prototype.updateRecordingState=function(t){return t.recordingState},n.prototype.isReplayRecorded=function(t){return t.recordingState===sn.REPLAY_RECORDING_ENABLED||this.computeTriggerSessionReplayStatus(t)},n.prototype.computeTriggerSessionReplayStatus=function(t){if(this.configuration.triggerSessionReplayEnabled&&this.configuration.triggerSessionReplayRegex&&t.recordingState!==sn.REPLAY_RECORDING_ENABLED){var n=this.Z.getAnonymizedUrl();return this.configuration.triggerSessionReplayRegex.test(n)}return!1},n.prototype.getDisabledRecordingState=function(){return sn.REPLAY_RECORDING_DISABLED},n.prototype.setVisitorService=function(t){},n}(Fu),Vu=function(t){function n(n,i,r,s,e){var u=t.call(this,n)||this;return u.configuration=n,u.rw=i,u.li=r,u.Xd=s,u.Z=e,u.ew=[],u}return H(n,t),n.prototype.init=function(){this.uw()},n.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===en.TEMPORARILY_RECORDED&&(t.recordingState=en.NOT_RECORDED),t},n.prototype.computeInitialRecordingState=function(t){return Jr.isRecordingSupported()?(this.ew=[],$.percentage()<this.configuration.replayRecordingRate||this.Xd.isForceMalkaReplayRecorded()?csArray.prototype.push.call(this.ew,en.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.ew,en.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.ew,en.ETR_SAMPLING),this.ew.length>0?(this.ow(t),en.TEMPORARILY_RECORDED):en.NOT_RECORDED):en.NOT_RECORDED},n.prototype.updateRecordingState=function(t){return Jr.isRecordingSupported()?t.recordingState===en.GLOBAL_SAMPLING?en.GLOBAL_SAMPLING:(this.ew=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.ew,en.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.ew,en.ETR_SAMPLING)),this.ew.length>0?(this.ow(t),en.TEMPORARILY_RECORDED):en.NOT_RECORDED):en.NOT_RECORDED},n.prototype.ow=function(t){var n,i=null===(n=this.W)||void 0===n?void 0:n.getVisitor();this.rw.send({recordingTypes:csArray.prototype.map.call(this.ew,Number),url:this.Z.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},n.prototype.abortQuotaServiceRequest=function(){this.rw.abort()},n.prototype.isReplayRecorded=function(t){return t.recordingState===en.TEMPORARILY_RECORDED||t.recordingState===en.GLOBAL_SAMPLING||t.recordingState===en.URL_SAMPLING||t.etrState===un.ETR_ON},n.prototype.uw=function(){var t=this;this.rw.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.rw.onTimeout((function(){return t.quotaServiceTimeoutHandler()}),3e3),this.rw.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},n.prototype.quotaServiceErrorHandler=function(t){this.hw(),Gt.warn("Quota Service: request error - ".concat(t))},n.prototype.quotaServiceTimeoutHandler=function(){this.hw(),Gt.warn("Quota Service: request timeout")},n.prototype.hw=function(){var t=en.NOT_RECORDED;this.cw(this.ew)&&(t=en.GLOBAL_SAMPLING),this.li.emitRecordingStateChange(t,un.ETR_OFF)},n.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=un.ETR_OFF,s=en.NOT_RECORDED;this.cw(i)?s=en.GLOBAL_SAMPLING:this.aw(i)&&(s=en.URL_SAMPLING),this.fw(i)&&(r=un.ETR_ON),this.li.emitRecordingStateChange(s,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},n.prototype.cw=function(t){return csArray.prototype.some.call(t,(function(t){return t===en.GLOBAL_SAMPLING}))},n.prototype.aw=function(t){return csArray.prototype.some.call(t,(function(t){return t===en.URL_SAMPLING}))},n.prototype.fw=function(t){return csArray.prototype.some.call(t,(function(t){return t===en.ETR_SAMPLING}))},n.prototype.setVisitorService=function(t){this.W=t},n.prototype.getDisabledRecordingState=function(){return en.NOT_RECORDED},z([Wt("Quota Service: onerror")],n.prototype,"quotaServiceErrorHandler",null),z([Wt("Quota Service: ontimeout")],n.prototype,"quotaServiceTimeoutHandler",null),z([Wt("Quota Service: onload")],n.prototype,"quotaServiceLoadHandler",null),n}(Fu),Bu=function(){function t(t,n){this.lw=t,this.yw=n,this.pw=!1,this.mw=null,this.gw=0}return t.prototype.setDynamicVariablesService=function(t){this.Aw=t},t.prototype.createOrUpdateSession=function(){this.Sw(),this.Ew=wt(),this.gw=0;var t=this.bw();null===t?(t=this.Nw(),this.Tw(t),t.recordingState=this.yw.computeInitialRecordingState(t)):(t=this.yw.sanitizeSessionRecordingState(t),this.Tw(t),t.recordingState=this.yw.updateRecordingState(t)),this.setSession(t),this.Rw(t)},t.prototype.Nw=function(){return{pageNumber:0,recordingState:this.yw.getDisabledRecordingState(),etrState:un.ETR_OFF}},t.prototype.Rw=function(t){this.yw instanceof zu?this.pw=this.yw.computeTriggerSessionReplayStatus(t):this.pw=!1},t.prototype.Ow=function(){var t=this.Nw();return this.Tw(t),t.recordingState=this.yw.computeInitialRecordingState(t),this.Rw(t),t},t.prototype.Tw=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.yw.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===en.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.yw instanceof Vu&&this.yw.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber),this.yw instanceof zu&&(t.re=this.pw?sn.TRIGGER_REPLAY_RECORDING_ENABLED:n.recordingState)),t},t.prototype.getSession=function(){return this.lw.get()},t.prototype.bw=function(){return this.lw.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.lw.get()},t.prototype.setSession=function(t){this.lw.set(t)},t.prototype.removeSession=function(){this.lw.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==en.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===un.ETR_ON&&csArray.prototype.push.call(n,en.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.lw.getRawSession();return this.lw.isValid(t)},t.prototype.handleSubdomainChange=function(){this.lw.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(){var t=this.lw.isCacheRefreshed();return t&&this.lw.resetCacheRefreshed(),t},t.prototype.extendSessionPeriodically=function(){this.mw||this.kw()},t.prototype.kw=function(){if(this.Iw())this.Sw();else{var t=this.getSession();null===t&&(t=this.Ow()),this.lw.set(t,174e4),this.Cw(),this.xw()}},t.prototype.xw=function(){var t=this;this.mw=window.setTimeout((function(){t.kw()}),174e4)},t.prototype.Iw=function(){return 1434e4-(wt()+pn-this.Ew)<0},t.prototype.Sw=function(){this.mw&&(window.clearTimeout(this.mw),this.mw=null)},t.prototype.Cw=function(){this.gw+=1,this.Aw.trackDynamicVariable("session_expiry_update",this.gw)},t}(),Ju=function(){function t(t,n,i){this.M=t,this.W=n,this.$t=i}return t.prototype.clear=function(){this._w()&&(this.Lw=this.W.getVisitor(),this.W.removeVisitor()),this.Pw()&&this.$t.removeExclusion()},t.prototype._w=function(){return this.W.doesVisitorExist()&&this.W.getVisitor().appliedTrackingDraw!==this.M.lastTrackingDraw},t.prototype.Pw=function(){return this.$t.getAppliedTrackingDraw()!==this.M.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Lw&&this.W.setVisitor(this.Lw)},t}(),Gu=function(){function t(t,n){this.W=t,this.K=n}return t.prototype.handle=function(){this.Mw(),this.Dw()},t.prototype.Mw=function(){this.W.handleSubdomainChange()},t.prototype.Dw=function(){this.K.handleSubdomainChange()},t}(),Wu=function(){function t(){this.listeners=[]}return t.prototype.addListeners=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(t=csArray.prototype.push).call.apply(t,J([this.listeners],n,!1))},t}(),Ku=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onStartTracking&&r.onStartTracking(t)}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onArtificialPageViewEnd&&i.onArtificialPageViewEnd()}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentGranted&&i.onConsentGranted()}},n.prototype.emitConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentWithdrawn&&i.onConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onRecordingStateChange&&s.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},z([Wn("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(Wu),Yu="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(qu||(qu={}));var Xu,$u=function(){function t(t,n,i){this.M=t,this.Qt=n,this.Uw=i}return t.prototype.get=function(){var t;return null===(t=this.M.cookielessTrackingEnabled?this.Uw.getItem(Yu):this.Qt.get(Yu))?t:Number(t)},t.prototype.set=function(t){this.M.cookielessTrackingEnabled?this.Uw.setItem(Yu,csString(t)):this.Qt.set(Yu,csString(t),X)},t.prototype.remove=function(){this.M.cookielessTrackingEnabled?this.Uw.removeItem(Yu):this.Qt.delete(Yu)},t.prototype.handleSubdomainChange=function(){this.M.cookielessTrackingEnabled||(this.M.allowSubdomains?this.Qt.delete(Yu,Kt.CURRENT_DOMAIN):this.Qt.delete(Yu,this.Qt.getRootDomain()))},t}(),Zu=["trackConsentGranted"],Qu=["trackConsentWithdrawn"],to=function(){function t(t,n){this._h=t,this.fc=n}return t.prototype.init=function(){this.fc.handleSubdomainChange(),this.fc.setInitialConsent(),this.jw()},t.prototype.jw=function(){var t=this;this._h.register(Zu,(function(){t.fc.grantConsent()})),this._h.register(Qu,(function(){t.fc.withdrawConsent()}))},t.prototype.onOptout=function(){this.fc.removeConsent()},t}(),no=function(){function t(t,n,i){this.M=t,this.Qd=n,this.li=i}return t.prototype.setInitialConsent=function(){var t=this.Qd.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefault()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.M.consentRequired;return n&&t===qu.NOT_REQUIRED||!n&&t!==qu.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.Qd.handleSubdomainChange()},t.prototype.setDefault=function(){var t=this.M.consentRequired?qu.NOT_EXPRESSED:qu.NOT_REQUIRED;this.Qd.set(t)},t.prototype.grantConsent=function(){this.M.consentRequired&&(this.Qd.set(qu.GRANTED),this.li.emitConsentGranted())},t.prototype.withdrawConsent=function(){this.M.consentRequired&&(this.Qd.set(qu.WITHDRAWN),this.li.emitConsentWithdrawn())},t.prototype.removeConsent=function(){this.Qd.remove()},t.prototype.isAllowedByConsent=function(){return!this.M.consentRequired||this.Qd.get()===qu.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.Qd.get())}},t}(),io=function(){function t(t,n,i,r,s,e,u){this.li=t,this._h=n,this.Dd=i,this.Ud=r,this.jd=s,this.qw=e,this.qd=u}return t.prototype.start=function(){this.li.addListeners(this.qw,this.qd,this.Dd),this.qd.init(),this.Ud.init(),this.jd.init(),this.jd.isActive()||this._h.start()},t}(),ro=function(){function t(t,n){this.yn=t,this.Qd=n}return t.prototype.exclude=function(t){this.Qd.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.Qd.remove()},t.prototype.isExcluded=function(){return this.Hw()||this.Fw()},t.prototype.Hw=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.Qd.get()},t.prototype.Fw=function(){return csString.prototype.indexOf.call(this.yn.href,bn)>0},t}(),so=function(){function t(t){this.fc=t}return t.prototype.onOptout=function(){this.fc.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Xu||(Xu={}));var eo,uo=function(){function t(t){this.Z=t,this.zw=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.zw=new RegExp(t)},t.prototype.Vw=function(){return this.zw.test(this.Z.getAnonymizedUrl())?Xu.SessionReplay:Xu.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Vw()===Xu.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Vw()}},t}(),oo=["excludeURLforReplay"],ho=function(){function t(t,n){this.fc=t,this._h=n}return t.prototype.init=function(){var t=this;this._h.register(oo,(function(n){Dt(n)&&t.fc.setExcludeUrlForSessionReplay(n)}))},t}(),co="_cs_inc",ao=function(){function t(t,n){this.yn=t,this.Qt=n}return t.prototype.isForceIncluded=function(){return this.Bw()||this.Jw()},t.prototype.isForceLegacyReplayRecorded=function(){return this.Gw(sn.REPLAY_RECORDING_ENABLED)||this.Ww(sn.REPLAY_RECORDING_ENABLED)},t.prototype.isForceMalkaReplayRecorded=function(){return this.Gw(en.GLOBAL_SAMPLING)},t.prototype.Bw=function(){return null!==this.Qt.get(co)},t.prototype.Gw=function(t){return this.Qt.get(co)===t},t.prototype.Jw=function(){return csString.prototype.indexOf.call(this.yn.href,co)>0},t.prototype.Ww=function(t){return csString.prototype.indexOf.call(this.yn.href,"".concat(co,"=").concat(t))>0},t}(),fo="_cs_optout",vo=function(){function t(t,n,i){this.M=t,this.Qt=n,this.Uw=i}return t.prototype.get=function(){return this.M.cookielessTrackingEnabled?this.Uw.getItem(fo):this.Qt.get(fo)},t.prototype.set=function(t){this.M.cookielessTrackingEnabled?this.Uw.setItem(fo,t):this.Qt.set(fo,t,X)},t}(),lo=function(){function t(t,n,i){this.li=t,this.yn=n,this.Qd=i}return t.prototype.init=function(){!this.isActive()&&this.Kw()&&this.activate()},t.prototype.isActive=function(){return"1"===this.Qd.get()},t.prototype.activate=function(){this.li.emitOptout(),this.Qd.set("1")},t.prototype.Kw=function(){return csString.prototype.indexOf.call(this.yn.href,fo)>0},t}(),wo=["optout"],yo=["optin"],po=function(){function t(t,n){this._h=t,this.jd=n}return t.prototype.init=function(){var t=this;this._h.register(wo,(function(){t.jd.activate()}))},t}();function mo(t,n){return n.visitor.visitsCount!==t.visitor.visitsCount?n.visitor.visitsCount-t.visitor.visitsCount:t.session?n.session?n.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,n){var i=function(t,n){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===n}))[0]}(t,n),r=function(t,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,n){return t.visitor&&t.visitor.appliedTrackingDraw===n}(t,n)})),mo)[0]}(t,n);return i||r}}(eo||(eo={}));var go=function(){function t(t,n,i){this.M=t,this.Yw=n,this.Xw=i}return t.prototype.applyUpToDate=function(t){var n=this;this.Xw.retrieve(this.M.hostnames,(function(i){var r=J([n.Yw.get()],i,!0),s=eo.select(r,n.M.lastTrackingDraw);n.Yw.apply(s),t()}))},t}(),Ao=function(){function t(t,n){this._h=t,this.rc=n}return t.prototype.init=function(){this.rc.addListeners(this._h)},t.prototype.onOptout=function(){this._h.stop()},t.prototype.onBeforeSessionRenewal=function(){this._h.stop()},t}();var So,Eo=function(t){function n(){var n=t.call(this)||this;return n.$w={},n}return H(n,t),n.prototype.register=function(t,n){for(var i=0,r=t;i<r.length;i++){var s=r[i];this.$w[s]=n,this.$w}},n.prototype.onStart=function(){this.Zw(),this.Qw()},n.prototype.onStop=function(){window._uxa=[]},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.ty(r.name,r.params,t.iframePath)}},n.prototype.ty=function(t,n,i){var r=this;Gt.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.$w[t])return(i=r.$w)[t].apply(i,n)}))()},n.prototype.Zw=function(){var t=this;window._uxa.forEach((function(n){var i=n[0],r=n.slice(1);return t.apply(i,r)}))},n.prototype.Qw=function(){var t=this;window._uxa={push:function(n){var i=n[0],r=n.slice(1);return t.apply(i,r)}}},n.prototype.apply=function(t,n){var i;if(this.$w[t])return(i=this.$w)[t].apply(i,n)},z([Wt("Commands.apply")],n.prototype,"apply",null),n}(fi),bo=function(){function t(){var t=this;this.ja={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.onEvent=function(t){this.Ei=t},t.prototype.start=function(){Dn(this.ja)},t.prototype.stop=function(){Un(this.ja)},t.prototype.ny=function(n){if(!n)return!1;var i=n.disposition;return Dt(n.sourceFile)&&csArray.prototype.some.call(t.iy,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.ny(t)&&this.Ei({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.iy=["contentsquare","cdnssl.clicktale.net","localhost","website.com/build/e2e"],z([Wt("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),No=function(){function t(t){this.sy=t}return t.prototype.init=function(){var t=this;this.sy.onEvent((function(n){return t.pr(n)}))},t.prototype.start=function(){this.sy.start()},t.prototype.stop=function(){this.sy.stop()},t.prototype.pr=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);Gt.warn(n)},t}(),To=function(t){function n(n,i,r,s,e,u){var o=t.call(this)||this;return o.Fi=n,o.ey=i,o.jv=r,o.zi=s,o.Lh=e,o.Z=u,o.uy=[],o.Xi=0,o.oy=[],o}return H(n,t),n.prototype.initStates=function(){this.ba=wt(),this.ey.removeQueryParams(),this.ey.setQueryParams(this.jv.getRequestParameters()),this.uy=[],this.Xi=0},n.prototype.onStart=function(){var t=this;this.Fi.subscribe(n.gr,(function(n){return t.pr(n)})),this.hy()},n.prototype.onStop=function(){this.Fi.unsubscribe(n.gr)},n.prototype.onIframeJavascriptError=function(t){this.pr(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.vy(n)},n.prototype.vy=function(t){var n=this;this.isStarted?this.pr(t,(function(t){return n.Lh.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.oy,t)},n.prototype.hy=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.oy,(function(n){return t.vy(n)})),this.oy=[])},n.prototype.pr=function(t,n){if(this.isStarted&&this.Xi<20){var i=F(F({},t),{pageUrl:this.Z.getAnonymizedUrl(),rt:this.Ea()});this.zi.anonymize(i),csArray.prototype.push.call(this.uy,i),this.ly(),n&&n(i)}},n.prototype.Ea=function(){return wt()-this.ba},n.prototype.ly=function(){this.ey.send({errors:this.uy}),this.uy=[],this.Xi+=1},n.gr="JavaScriptErrorsService",n}(fi),Ro=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Vi=n,e.wy=i,e.jv=r,e.Ji=s,e.yy=[],e.$i=0,e}return H(n,t),n.prototype.init=function(){this.Vi.init()},n.prototype.initStates=function(){this.py(),this.yy=[],this.$i=0,this.Aa()},n.prototype.Aa=function(){this.ba=wt()},n.prototype.Ea=function(){return wt()-this.ba},n.prototype.onStart=function(){var t=this;this.Vi.subscribe(n.gr,(function(n){return t.pr(n)}))},n.prototype.onStop=function(){this.Vi.unsubscribe(n.gr)},n.prototype.onIframeApiError=function(t){this.pr(t)},n.prototype.pr=function(t){this.isStarted&&this.$i<n.my&&(t.relativeTime=this.Ea(),csArray.prototype.push.call(this.yy,this.Ji.anonymize(t)),this.ly())},n.prototype.py=function(){this.wy.removeQueryParams(),this.wy.setQueryParams(this.jv.getRequestParameters())},n.prototype.ly=function(){this.wy.send({errors:this.yy}),this.yy=[],this.$i+=1},n.gr="ApiErrorsService",n.my=20,n}(fi),Oo=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.gy=n,e.jv=i,e.Ay=r,e.Yv=s,e.Sy=[],e.Zi=0,e.oy=[],e}return H(n,t),n.prototype.initStates=function(){this.py(),this.ba=wt(),this.Sy=[],this.Zi=0},n.prototype.trackCustomError=function(t,n){if(void 0===n&&(n={}),Dt(t)&&Ut(n)){var i={message:csString.prototype.slice.call(t,0,300),errorType:"customError"};this.Ey(n)&&(i.attributes=n),this.vy(i)}},n.prototype.Ey=function(t){var n=Object.keys(t).length;if(0===n||n>5)return!1;for(var i in t)if(i.length>30||t[i].length>30)return!1;return!0},n.prototype.onStart=function(){this.hy()},n.prototype.onStop=function(){},n.prototype.hy=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.oy,(function(n){return t.vy(n)})),this.oy=[])},n.prototype.vy=function(t){if(this.isStarted){var n=this.by(t);this.pr(n),this.Yv.emitCustomErrorEvent(n)}else csArray.prototype.push.call(this.oy,t)},n.prototype.pr=function(t){this.isStarted&&this.Zi<20&&(csArray.prototype.push.call(this.Sy,t),this.ly())},n.prototype.by=function(t){var n=F(F({},t),{rt:this.Ea()});return n.message=this.Ay.anonymizeEmail(t.message),n},n.prototype.py=function(){this.gy.removeQueryParams(),this.gy.setQueryParams(this.jv.getRequestParameters())},n.prototype.Ea=function(){return wt()-this.ba},n.prototype.ly=function(){this.gy.send({errors:this.Sy}),this.Sy=[],this.Zi+=1},n}(fi);!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(So||(So={}));var ko,Io=["trackError"],Co=["api-errors:maskUrl"],xo=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f){this.Fi=t,this.zi=n,this.Vi=i,this.Ji=r,this.Ay=s,this.M=e,this.jv=u,this.rc=o,this._h=h,this.Lh=c,this.Z=a,this.Dh=f}return t.prototype.init=function(){this.Ny=new No(new bo),this.Ny.init();var t=this.Dh.create("".concat(this.M.getTrackerUri(),"/").concat("errors"),!0);this.Ty=new To(this.Fi,t,this.jv,this.zi,this.Lh,this.Z),this.rc.addListeners(this.Ty);var n=this.Dh.create("".concat(this.M.getTrackerUri(),"/").concat("api-errors"),!0);this.Vi.excludeDomains([So.CONTENTSQUARE,So.CLICKTALE,So.FAKE_TRACKER]),this.Ry=new Ro(this.Vi,n,this.jv,this.Ji),this.Ry.init(),this.rc.addListeners(this.Ry);var i=this.Dh.create("".concat(this.M.getTrackerUri(),"/").concat("custom-errors"),!0);this.Oy=new Oo(i,this.jv,this.Ay,this.Lh),this.jw()},t.prototype.jw=function(){var t=this;this._h.register(Co,(function(n){return t.Ji.addUrlMaskingPattern(n)})),this._h.register(Io,(function(n,i){t.M.customErrorsEnabled?t.Oy.trackCustomError(n,i):t.M.jsCustomErrorsEnabled&&t.Ty.trackCustomError(n)}))},t.prototype.onInitTracking=function(){this.Ny.start()},t.prototype.onStartTracking=function(){this.M.jsErrorsEnabled&&this.Ty.start(),this.M.apiErrors.enabled&&this.Ry.start(),this.M.customErrorsEnabled&&this.Oy.start()},t.prototype.onAfterNaturalPageView=function(){this.Ty.initStates(),this.Ry.initStates(),this.Oy.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Ty.initStates(),this.Ry.initStates(),this.Oy.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.Ty.stop(),this.Ry.stop(),this.Oy.stop()},t.prototype.onOptout=function(){this.Ny.stop(),this.Ty.stop(),this.Ry.stop(),this.Oy.stop()},t}(),_o="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(ko||(ko={}));var Lo=function(){function t(t,n){this.M=t,this.Qt=n,this.ky=Bt.None,this.Iy=!1,this.Cy=[],this.xy=[]}return t.prototype.init=function(){this.ky=this.Qt.isSameSiteSupported()?Bt.None:Bt.NotSet},t.prototype.setStates=function(t,n){this.Yw=t,this._y=n},t.prototype.start=function(t){var n=this;this._y.init(this.Ly(),(function(i,r){var s=[n.Yw.get()];r&&csArray.prototype.push.call(s,i);var e=eo.select(s,n.M.lastTrackingDraw);n.Iy=!0,n.Yw.apply(e),t()})),this.Py=this._y.openIframe()},t.prototype.setCookie=function(t,n,i){if(this.Iy){var r={name:t,value:n,samesite:this.ky,secure:Jt.Yes};i&&(r.expires=zt.toExpireDate(i).getTime()),this.My(r)}},t.prototype.removeCookie=function(t){this.Iy&&this.Dy(t)},t.prototype.Dy=function(t){this.xy=csArray.prototype.filter.call(this.xy,(function(n){return n!==t})),this.Cy=csArray.prototype.filter.call(this.Cy,(function(n){return n.name!==t})),csArray.prototype.push.call(this.xy,t),this.setBatchReadyCall()},t.prototype.My=function(t){this.xy=csArray.prototype.filter.call(this.xy,(function(n){return n!==t.name})),this.Cy=csArray.prototype.filter.call(this.Cy,(function(n){return n.name!==t.name})),csArray.prototype.push.call(this.Cy,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.Uy()},t.prototype.Uy=function(){if(this.Cy.length>0){var t=this.jy(ko.Set,this.Cy);this.qy(t),this.Cy=[]}if(this.xy.length>0){var n=this.jy(ko.Remove,this.xy);this.qy(n),this.xy=[]}},t.prototype.jy=function(t,n){return{command:t,cookies:n,domain:null,pid:this.M.projectId}},t.prototype.qy=function(t){var n="https://".concat(this.Ly());this.Py.contentWindow&&this.Py.contentWindow.postMessage(t,n)},t.prototype.Ly=function(){return this.M.dualCollectionTagDomain&&this.M.dualCollectionTagDomain!==_o?"cdnssl.".concat(this.M.dualCollectionTagDomain):"csxd.".concat(_o)},z([ys(),Wt("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),Po=function(){function t(t,n){this.M=t,this.wn=n}return t.prototype.init=function(t,n){this.Hy="https://".concat(t),this.mn=n},t.prototype.openIframe=function(){var t=this;this.wn.onMessage((function(n){t.Sn(n)})),this.wn.onTimeout((function(){t.En()})),this.wn.start();var n=this.Fy(this.Hy);return this.wn.open(n)},t.prototype.Sn=function(t){if(this.bn(t)){var n=t.data,i=!0;if(this.zy(t))return void Gt.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!En.isRawDomainState(n))return void Gt.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));En.isValid(n)||(Gt.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),i=!1),this.wn.stop(),this.mn(i?An.fromRaw(n):{},i)}},t.prototype.En=function(){Gt.warn("xdframe single domain: all messages not received")},t.prototype.bn=function(t){return t.origin===this.Hy&&Ut(t.data)},t.prototype.zy=function(t){return!!t.data.error},t.prototype.Fy=function(t){var n=this.M.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.1.1",".html?pid=").concat(n)},t}(),Mo=function(){function t(t,n,i){this.M=t,this.W=n,this.K=i}return t.prototype.getRequestParameters=function(){var t=this.K.getSession();if(!t)return{};var n=this.W.getVisitor();return n?F(F(F({},dt()),this.M.getRequestParameters()),{uu:n.id,sn:"".concat(n.visitsCount),pn:"".concat(t.pageNumber)}):{}},t}(),Do=function(t){function n(){var n=t.call(this)||this;return n.Vy=!1,n.ja={boundElement:window,type:"error",listener:function(t){return n.errorListener(t)}},n}return H(n,t),n.prototype.onStartTracking=function(){Dn(this.ja,this.Vy)},n.prototype.onStopTracking=function(){Un(this.ja,this.Vy)},n.prototype.errorListener=function(t){var n=this.By(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.Jy=function(t){return(t=null!=t?t:"[NO ERROR MESSAGE]").length<=n.Gy?t:csString.prototype.slice.call(t,0,n.Gy-n.truncatedErrorMessageMarker.length)+n.truncatedErrorMessageMarker},n.prototype.By=function(t){return{errorType:"jsError",message:this.Jy(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.truncatedErrorMessageMarker="",n.Gy=1024,z([Wt("Event handler type: error")],n.prototype,"errorListener",null),n}(_u),Uo=function(){function t(t,n){this._h=t,this.C=n}return t.prototype.init=function(){var t=this;this._h.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.C.updateDynamicFields("emitDebugEvents",n)}))},t}();function jo(t,n,i){if(!jt(n)&&!jt(i))return t.href;var r=jt(n)?function(t){return K(t,"/")?t:"/".concat(t)}(n):t.pathname,s=jt(i)?function(t){return K(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(s)}var qo=function(){function t(t,n){this.yn=t,this.Uf=n}return t.prototype.overridePath=function(t){jt(t)&&Dt(t)&&(this.Wy=""===t?void 0:t)},t.prototype.overrideQuery=function(t){jt(t)&&Dt(t)&&(this.Ky=t)},t.prototype.computeOverriddenUrl=function(t){return this.Yy(t)?this.getAnonymizedUrl():t},t.prototype.Yy=function(t){var n=this.Xy(this.yn.href);return this.Xy(t)===n},t.prototype.Xy=function(t){return Y(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.getAnonymizedUrl=function(){var t=jo(this.yn,this.Wy,this.Ky);return this.Uf.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.yn.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),Ho=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onEventTriggerRecording&&s.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(Wu),Fo=function(t){function n(n,i){var r=t.call(this)||this;return r.$y=n,r.Zy=i,r.Qy=[],r}return H(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,n,i)},n.prototype.init=function(){var t=this;this.$y.onEvent((function(n){return t.tp(n)})),this.Zy.onEvent((function(n){return t.tp(n)}))},n.prototype.onStartTracking=function(){this.$y.start(),this.Zy.start()},n.prototype.onStopTracking=function(){this.$y.stop(),this.Zy.stop()},n.prototype.tp=function(t){if(t.url&&t.statusCode){if(this.np(t.url))return;if(t.statusCode>=400)for(var n in this.subscriptions){var i=this.subscriptions[n];if(i.hasOwnProperty("detailedEvent"))i(this.ip(t));else i(this.rp(t))}}},n.prototype.rp=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}},n.prototype.ip=function(t){var n=this.rp(t);return Object.keys(t.standardRequestHeaders).length>0&&(n.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(n.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(n.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(n.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(n.queryParameters=t.queryParameters),t.requestBody&&(n.requestBody=t.requestBody),t.responseBody&&(n.responseBody=t.responseBody),n},n.prototype.np=function(t){return csArray.prototype.some.call(this.Qy,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n.prototype.excludeDomains=function(t){var n;(n=csArray.prototype.push).call.apply(n,J([this.Qy],t,!1))},n.truncatedErrorMessageMarker="",n}(_u),zo=function(){function t(){this.sp=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.isValidBodyType=function(t){var n=t["content-type"];if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return csArray.prototype.some.call(this.sp,(function(t){return K(i,t)}))},t}(),Vo=function(t){function n(n,i,r){var s=t.call(this)||this;return s.Yr=n,s.ep=i,s.M=r,s.Ue=!1,s.up=null,s.op=null,s.hp=null,s.Re=[],s.cp=function(t){var n=t.context,i=t.args,r=t.callerName;return s.interceptOpen(n,i,r)},s.ap=function(t){var n=t.context,i=t.args;return s.interceptSetRequestHeader(n,i)},s.fp=function(t){var n=t.context,i=t.args;return s.interceptSend(n,i)},s}return H(n,t),n.prototype.onEvent=function(t){csArray.prototype.push.call(this.Re,t)},n.prototype.start=function(){this.Ue||(this.vp(),this.up&&this.up.activate(),this.op&&this.op.activate(),this.hp&&this.hp.activate(),this.Ue=!0)},n.prototype.stop=function(){this.Ue&&(this.up&&this.up.deactivate(),this.op&&this.op.deactivate(),this.Ue=!1)},n.prototype.vp=function(){this.up||(this.up=this.Yr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"open",hook:this.cp,options:{withCallerName:!0}})),this.op||(this.op=this.Yr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.ap})),this.hp||(this.hp=this.Yr.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"send",hook:this.fp}))},n.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&Dt(n[1])){var s=csString.prototype.split.call(n[1],"?"),e=s[0],u=s[1],o=Nt(e);t.apiCall={url:o,method:n[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:wt(),responseTime:0,statusCode:0,library:i},u&&this.isValidUrl(o,this.M.apiErrors.validUrls)&&this.M.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=u),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},n.prototype.readyStateChangeListener=function(t){var n=this;t.apiCall&&t.readyState===XMLHttpRequest.DONE&&t.status>=400&&(t.apiCall.responseTime=wt(),t.apiCall.statusCode=t.status,this.lp()&&csArray.prototype.forEach.call(null==t.getAllResponseHeaders()?void 0:csString.prototype.split.call(t.getAllResponseHeaders(),/[\r\n]+/),(function(i){var r=csString.prototype.split.call(i,/:(.*)/),s=r[0],e=r[1];n.M.apiErrors.collectStandardHeaders&&n.ep.isValidStandardHeader(s)?t.apiCall.standardResponseHeaders[s]=csString.prototype.trim.call(e):n.ep.isValidCustomHeader(s)&&(t.apiCall.customResponseHeaders[s]=csString.prototype.trim.call(e))})),this.isValidUrl(t.apiCall.url,this.M.apiErrors.validUrls)&&this.M.apiErrors.collectResponseBody&&this.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.Re,(function(n){return n(t.apiCall)})))},n.prototype.interceptSetRequestHeader=function(t,n){if(t.apiCall&&this.lp()){var i=n[0],r=n[1];this.M.apiErrors.collectStandardHeaders&&this.ep.isValidStandardHeader(i)&&r?t.apiCall.standardRequestHeaders[i]=r.trim():this.ep.isValidCustomHeader(i)&&r&&(t.apiCall.customRequestHeaders[i]=r.trim())}},n.prototype.interceptSend=function(t,n){var i=n[0];t.apiCall&&this.isValidUrl(t.apiCall.url,this.M.apiErrors.validUrls)&&this.M.apiErrors.collectRequestBody&&this.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof i&&(t.apiCall.requestBody=i)},n.prototype.lp=function(){return this.M.apiErrors.collectStandardHeaders||this.M.apiErrors.validCustomHeaders&&0!==this.M.apiErrors.validCustomHeaders.length},z([Wt("XhrRequestTracker.interceptOpen")],n.prototype,"interceptOpen",null),z([Wt("XhrRequestTracker.readyStateChangeListener")],n.prototype,"readyStateChangeListener",null),z([Wt("XhrRequestTracker.interceptSetRequestHeader")],n.prototype,"interceptSetRequestHeader",null),z([Wt("XhrRequestTracker.interceptSend")],n.prototype,"interceptSend",null),n}(zo),Bo=function(t){function n(n,i,r){var s=t.call(this)||this;return s.Yr=n,s.ep=i,s.M=r,s.Ue=!1,s.dp=null,s.Re=[],s.wp=function(t){var n=t.result,i=t.args,r=t.callerName;s.interceptFetch(n,i,r)},s}return H(n,t),n.prototype.onEvent=function(t){csArray.prototype.push.call(this.Re,t)},n.prototype.start=function(){this.Ue||this.yp()&&(this.pp(),this.dp&&this.dp.activate(),this.Ue=!0)},n.prototype.stop=function(){this.Ue&&(this.dp&&this.dp.deactivate(),this.Ue=!1)},n.prototype.yp=function(){return!!window.fetch&&"function"==typeof window.fetch},n.prototype.mp=function(t,n){var i=J([],n,!0);return i[0]&&"function"==typeof i[0].clone&&(i[0]=n[0].clone()),{context:t,args:i}},n.prototype.pp=function(){this.dp||(this.dp=this.Yr.createAsyncFunctionInterceptor({target:window,methodName:"fetch",hook:this.wp,hookPrepareArgs:this.mp,options:{withCallerName:!0}}))},n.prototype.gp=function(t,n,i){return V(this,void 0,void 0,(function(){var r,s,e,u,o,h,c;return B(this,(function(a){switch(a.label){case 0:return r=csString.prototype.split.call(n.url,"?"),s=r[0],e=r[1],u=Nt(s),o=F(F({},t),{url:u,method:n.method,responseTime:wt(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{}}),this.M.apiErrors.collectStandardHeaders&&(o.standardRequestHeaders=this.Ap(n.headers),o.standardResponseHeaders=this.Ap(i.headers)),this.M.apiErrors.validCustomHeaders&&0!==this.M.apiErrors.validCustomHeaders.length&&(o.customRequestHeaders=this.Sp(n.headers),o.customResponseHeaders=this.Sp(i.headers)),this.isValidUrl(s,this.M.apiErrors.validUrls)?(this.M.apiErrors.collectQueryParam&&e&&(o.queryParameters=e),this.M.apiErrors.collectResponseBody&&this.isValidBodyType(o.standardResponseHeaders)?i.bodyUsed?[3,2]:(h=o,[4,i.clone().text()]):[3,2]):[3,4];case 1:h.responseBody=a.sent(),a.label=2;case 2:return this.M.apiErrors.collectRequestBody&&this.isValidBodyType(o.standardRequestHeaders)?(c=o,[4,n.text()]):[3,4];case 3:c.requestBody=a.sent(),a.label=4;case 4:return csArray.prototype.forEach.call(this.Re,(function(t){return t(o)})),[2]}}))}))},n.prototype.interceptFetch=function(t,n,i){return V(this,void 0,void 0,(function(){var r,s,e,u,o,h,c;return B(this,(function(a){switch(a.label){case 0:if(r=n[0],s=n[1],!Dt((e=new Request(r,s)).url))return[2];u=wt(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t];case 2:return o=a.sent(),[3,4];case 3:if(h=a.sent(),this.Ep(h)||this.bp(h)||this.Np(h))return[2];throw h;case 4:return c=-1,-1===o.type.indexOf("opaque")&&(c=o.status),c>=400?[4,this.gp({statusCode:c,library:i,requestTime:u},e,o)]:[3,6];case 5:a.sent(),a.label=6;case 6:return[2]}}))}))},n.prototype.Ap=function(t){var n=this,i={};return t.forEach((function(t,r){n.ep.isValidStandardHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.Sp=function(t){var n=this,i={};return t.forEach((function(t,r){n.ep.isValidCustomHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.Ep=function(t){return t instanceof TypeError},n.prototype.bp=function(t){return t instanceof DOMException&&"AbortError"===t.name},n.prototype.Np=function(t){return t instanceof DOMException&&csArray.prototype.some.call(n.Tp,(function(n){return n===t.name}))},n.Tp=["NoModificationAllowedError","InvalidStateError","OperationError"],z([Wt("FetchRequestTracker.interceptFetch")],n.prototype,"interceptFetch",null),n}(zo),Jo="|iframe|",Go=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.Rp=n,e.Op=i,e.kp=r,e.Ip=s,e}return H(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.Cp(n)&&null===t)Gt.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case It.ChildLogMessage:this.xp(i);break;case It.AnalysisEvent:var r=this.Rp.transformEvent(t,i);this._p(r);break;case It.RecordingEvent:var s=i,e=this.Ip.transformEvents(t,s);if(0===e.events.length)return;e.containsUserEvent?this.Lp(e.events):this.Pp(e.events);break;case It.JavascriptError:this.Mp(i);break;case It.ApiError:this.Dp(i);break;case It.DetailedApiError:this.jp(i);break;case It.EmerchandisingMessage:var u=this.kp.transformEvent(t,i);this.qp(u);break;case It.Commands:var o=this.Op.transformEvent(t,i);this.Hp(o);break;case It.IntegrationCallback:this.Fp(i);break;default:Gt.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.Cp=function(t){var n=[It.AnalysisEvent,It.RecordingEvent,It.EmerchandisingMessage,It.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.xp=function(t){var n=t.message,i=t.errorCode;switch(t.level){case Q.debug:Gt.debug(n,i);break;case Q.warn:Gt.warn(n,i);break;case Q.error:Gt.error(n,i);break;case Q.critical:Gt.critical(n,i)}},n.prototype._p=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.Lp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.Pp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.Mp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.Dp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.jp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.qp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.Hp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.Fp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n}(Wu);function Wo(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,s=15,e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var a=new Array(60);t(a);var f=new Array(512);t(f);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,s){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var A=function(t){return t<256?f[t]:f[256+(t>>>7)]},S=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},E=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){E(t,i[2*n],i[2*n+1])},N=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},T=function(t,n,i){var r,e,u=new Array(16),o=0;for(r=1;r<=s;r++)u[r]=o=o+i[r-1]<<1;for(e=0;e<=n;e++){var h=t[2*e+1];0!==h&&(t[2*e]=N(u[h]++,h))}},R=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?S(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=function(t,n,i,r){var s=2*n,e=2*i;return t[s]<t[e]||t[s]===t[e]&&r[n]<=r[i]},I=function(t,n,i){for(var r=t.heap[i],s=i<<1;s<=t.heap_len&&(s<t.heap_len&&k(n,t.heap[s+1],t.heap[s],t.depth)&&s++,!k(n,r,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=r},C=function(t,i,r){var s,o,h,c,a=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===s?b(t,o,i):(h=v[o],b(t,h+n+1,i),0!==(c=e[h])&&(o-=l[h],E(t,o,c)),s--,h=A(s),b(t,h,r),0!==(c=u[h])&&(s-=p[h],E(t,s,c)))}while(a<t.last_lit);b(t,256,i)},x=function(t,n){var i,r,e,u=n.dyn_tree,o=n.stat_desc.static_tree,h=n.stat_desc.has_stree,c=n.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==u[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(e=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[e]=0,t.opt_len--,h&&(t.static_len-=o[2*e+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)I(t,u,i);e=c;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*e]=u[2*i]+u[2*r],t.depth[e]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=e,t.heap[1]=e++,I(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,e,u,o,h,c=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=s;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>a||(t.bl_count[u]++,o=0,r>=d&&(o=l[r-d]),h=c[2*r],t.opt_len+=h*(u+o),v&&(t.static_len+=h*(f[2*r+1]+o)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(e=t.heap[--i])>a||(c[2*e+1]!==u&&(t.opt_len+=(u-c[2*e+1])*c[2*e],c[2*e+1]=u),r--)}}(t,n),T(u,a,t.bl_count)},_=function(t,n,i){var r,s,e=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)s=u,u=n[2*(r+1)+1],++o<h&&s===u||(o<c?t.bl_tree[2*s]+=o:0!==s?(s!==e&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,e=s,0===u?(h=138,c=3):s===u?(h=6,c=3):(h=7,c=4))},L=function(t,n,i){var r,s,e=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),r=0;r<=i;r++)if(s=u,u=n[2*(r+1)+1],!(++o<h&&s===u)){if(o<c)do{b(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==e&&(b(t,s,t.bl_tree),o--),b(t,16,t.bl_tree),E(t,o-3,2)):o<=10?(b(t,17,t.bl_tree),E(t,o-3,3)):(b(t,18,t.bl_tree),E(t,o-11,7));o=0,e=s,0===u?(h=138,c=3):s===u?(h=6,c=3):(h=7,c=4)}},P=!1,M=function(t,n,i,r){E(t,0+(r?1:0),3),function(t,n,i,r){O(t),r&&(S(t,i),S(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},D=function(t){P||(!function(){var t,n,h,g,A,S=new Array(16);for(h=0,g=0;g<28;g++)for(l[g]=h,t=0;t<1<<e[g];t++)v[h++]=g;for(v[h-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)f[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)f[256+A++]=g;for(n=0;n<=s;n++)S[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,S[8]++;for(;t<=255;)c[2*t+1]=9,t++,S[9]++;for(;t<=279;)c[2*t+1]=7,t++,S[7]++;for(;t<=287;)c[2*t+1]=8,t++,S[8]++;for(T(c,287,S),t=0;t<r;t++)a[2*t+1]=5,a[2*t]=N(t,5);d=new m(c,e,257,i,s),w=new m(a,u,0,r,s),y=new m(new Array(0),o,0,19,7)}(),P=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,R(t)},U=function(t,i,r,s){var e,u,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),x(t,t.l_desc),x(t,t.d_desc),o=function(t){var n;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),x(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*h[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),e=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=e&&(e=u)):e=u=r+5,r+4<=e&&-1!==i?M(t,i,r,s):4===t.strategy||u===e?(E(t,2+(s?1:0),3),C(t,c,a)):(E(t,4+(s?1:0),3),function(t,n,i,r){var s;for(E(t,n-257,5),E(t,i-1,5),E(t,r-4,4),s=0;s<r;s++)E(t,t.bl_tree[2*h[s]+1],3);L(t,t.dyn_ltree,n-1),L(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),C(t,t.dyn_ltree,t.dyn_dtree)),R(t),s&&O(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*A(i)]++),t.last_lit===t.lit_bufsize-1},q=function(t){E(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},H={_tr_init:D,_tr_stored_block:M,_tr_flush_block:U,_tr_tally:j,_tr_align:q},F=function(t,n,i,r){for(var s=65535&t|0,e=t>>>16&65535|0,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{e=e+(s=s+n[r++]|0)|0}while(--u);s%=65521,e%=65521}return s|e<<16|0},z=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),V=function(t,n,i,r){var s=z,e=r+i;t^=-1;for(var u=r;u<e;u++)t=t>>>8^s[255&(t^n[u])];return-1^t},B={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},J=0,G=2,W=3,K=4,Y=0,X=1,$=-1,Z=0,Q=8,tt=H._tr_init,nt=H._tr_stored_block,it=H._tr_flush_block,rt=H._tr_tally,st=H._tr_align,et=J,ut=1,ot=W,ht=K,ct=5,at=Y,ft=X,vt=-2,lt=-3,dt=-5,wt=$,yt=1,pt=2,mt=3,gt=4,At=Z,St=2,Et=Q,bt=258,Nt=262,Tt=103,Rt=113,Ot=666,kt=function(t,n){return t.msg=B[n],n},It=function(t){return(t<<1)-(t>4?9:0)},Ct=function(t){for(var n=t.length;--n>=0;)t[n]=0},xt=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},_t=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},Lt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,_t(t.strm)},Pt=function(t,n){t.pending_buf[t.pending++]=n},Mt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Dt=function(t,n){var i,r,s=t.max_chain_length,e=t.strstart,u=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-Nt?t.strstart-(t.w_size-Nt):0,c=t.window,a=t.w_mask,f=t.prev,v=t.strstart+bt,l=c[e+u-1],d=c[e+u];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(i=n)+u]===d&&c[i+u-1]===l&&c[i]===c[e]&&c[++i]===c[e+1]){e+=2,i++;do{}while(c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&e<v);if(r=bt-(v-e),e=v-bt,r>u){if(t.match_start=n,u=r,r>=o)break;l=c[e+u-1],d=c[e+u]}}}while((n=f[n&a])>h&&0!=--s);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,s,e,u,o,h,c,a,f=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Nt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=f,t.block_start-=f,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=f?r-f:0}while(--i);n=i=f;do{r=t.prev[--n],t.prev[n]=r>=f?r-f:0}while(--i);s+=f}if(0===t.strm.avail_in)break;if(u=t.strm,o=t.window,h=t.strstart+t.lookahead,c=s,a=void 0,(a=u.avail_in)>c&&(a=c),i=0===a?0:(u.avail_in-=a,o.set(u.input.subarray(u.next_in,u.next_in+a),h),1===u.state.wrap?u.adler=F(u.adler,o,a,h):2===u.state.wrap&&(u.adler=V(u.adler,o,a,h)),u.next_in+=a,u.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=xt(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=xt(t,t.ins_h,t.window[e+3-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Nt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Nt&&(t.match_length=Dt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=xt(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2},qt=function(t,n){for(var i,r,s;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Nt&&(t.match_length=Dt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Lt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&Lt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2};function Ht(t,n,i,r,s){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=s}var Ft=[new Ht(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Lt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Nt&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Lt(t,!1),t.strm.avail_out),1)})),new Ht(4,4,8,4,jt),new Ht(4,5,16,8,jt),new Ht(4,6,32,32,jt),new Ht(4,4,16,16,qt),new Ht(8,16,32,32,qt),new Ht(8,16,128,128,qt),new Ht(8,32,128,256,qt),new Ht(32,128,258,1024,qt),new Ht(32,258,258,4096,qt)];function zt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Et,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ct(this.dyn_ltree),Ct(this.dyn_dtree),Ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ct(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Vt=function(t){if(!t||!t.state)return kt(t,vt);t.total_in=t.total_out=0,t.data_type=St;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Rt,t.adler=2===n.wrap?0:1,n.last_flush=et,tt(n),at},Bt=function(t){var n=Vt(t);return n===at&&function(t){t.window_size=2*t.w_size,Ct(t.head),t.max_lazy_match=Ft[t.level].max_lazy,t.good_match=Ft[t.level].good_length,t.nice_match=Ft[t.level].nice_length,t.max_chain_length=Ft[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Jt=function(t,n,i,r,s,e){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),s<1||s>9||i!==Et||r<8||r>15||n<0||n>9||e<0||e>gt)return kt(t,vt);8===r&&(r=9);var o=new zt;return t.state=o,o.strm=t,o.wrap=u,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=n,o.strategy=e,o.method=i,Bt(t)},Gt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?kt(t,vt):vt;var s=t.state;if(!t.output||!t.input&&0!==t.avail_in||s.status===Ot&&n!==ht)return kt(t,0===t.avail_out?dt:vt);s.strm=t;var e=s.last_flush;if(s.last_flush=n,42===s.status)if(2===s.wrap)t.adler=0,Pt(s,31),Pt(s,139),Pt(s,8),s.gzhead?(Pt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Pt(s,255&s.gzhead.time),Pt(s,s.gzhead.time>>8&255),Pt(s,s.gzhead.time>>16&255),Pt(s,s.gzhead.time>>24&255),Pt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Pt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Pt(s,255&s.gzhead.extra.length),Pt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=V(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Pt(s,0),Pt(s,0),Pt(s,0),Pt(s,0),Pt(s,0),Pt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Pt(s,3),s.status=Rt);else{var u=Et+(s.w_bits-8<<4)<<8;u|=(s.strategy>=pt||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=Rt,Mt(s,u),0!==s.strstart&&(Mt(s,t.adler>>>16),Mt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(i=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),_t(t),i=s.pending,s.pending!==s.pending_buf_size));)Pt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),_t(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Pt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),_t(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Pt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=V(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.status=Tt)}else s.status=Tt;if(s.status===Tt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&_t(t),s.pending+2<=s.pending_buf_size&&(Pt(s,255&t.adler),Pt(s,t.adler>>8&255),t.adler=0,s.status=Rt)):s.status=Rt),0!==s.pending){if(_t(t),0===t.avail_out)return s.last_flush=-1,at}else if(0===t.avail_in&&It(n)<=It(e)&&n!==ht)return kt(t,dt);if(s.status===Ot&&0!==t.avail_in)return kt(t,dt);if(0!==t.avail_in||0!==s.lookahead||n!==et&&s.status!==Ot){var o=s.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===et)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2}(s,n):s.strategy===mt?function(t,n){for(var i,r,s,e,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[s=t.strstart-1])===u[++s]&&r===u[++s]&&r===u[++s]){e=t.strstart+bt;do{}while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<e);t.match_length=bt-(e-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2}(s,n):Ft[s.level].func(s,n);if(3!==o&&4!==o||(s.status=Ot),1===o||3===o)return 0===t.avail_out&&(s.last_flush=-1),at;if(2===o&&(n===ut?st(s):n!==ct&&(nt(s,0,0,!1),n===ot&&(Ct(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),_t(t),0===t.avail_out))return s.last_flush=-1,at}return n!==ht?at:s.wrap<=0?ft:(2===s.wrap?(Pt(s,255&t.adler),Pt(s,t.adler>>8&255),Pt(s,t.adler>>16&255),Pt(s,t.adler>>24&255),Pt(s,255&t.total_in),Pt(s,t.total_in>>8&255),Pt(s,t.total_in>>16&255),Pt(s,t.total_in>>24&255)):(Mt(s,t.adler>>>16),Mt(s,65535&t.adler)),_t(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?at:ft)},Wt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,s=r.wrap;if(2===s||1===s&&42!==r.status||r.lookahead)return vt;if(1===s&&(t.adler=F(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===s&&(Ct(r.head),r.strstart=0,r.block_start=0,r.insert=0);var e=new Uint8Array(r.w_size);e.set(n.subarray(i-r.w_size,i),0),n=e,i=r.w_size}var u=t.avail_in,o=t.next_in,h=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,a=r.lookahead-2;do{r.ins_h=xt(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--a);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=u,r.wrap=s,at},Kt={deflateInit:function(t,n){return Jt(t,n,Et,15,8,At)},deflateInit2:Jt,deflateReset:Bt,deflateResetKeep:Vt,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,at):vt},deflate:Gt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Tt&&n!==Rt&&n!==Ot?kt(t,vt):(t.state=null,n===Rt?kt(t,lt):at)},deflateSetDictionary:Wt,deflateInfo:"pako deflate (from Nodeca project)"},Yt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Xt=function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Yt(i,r)&&(t[r]=i[r])}}return t},$t=function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var s=new Uint8Array(n),e=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];s.set(u,e),e+=u.length}return s},Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}for(var Qt=new Uint8Array(256),tn=0;tn<256;tn++)Qt[tn]=tn>=252?6:tn>=248?5:tn>=240?4:tn>=224?3:tn>=192?2:1;Qt[254]=Qt[254]=1;var nn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},rn=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,s,e,u=t.length,o=0;for(s=0;s<u;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),e=0,s=0;e<o;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?n[e++]=i:i<2048?(n[e++]=192|i>>>6,n[e++]=128|63&i):i<65536?(n[e++]=224|i>>>12,n[e++]=128|i>>>6&63,n[e++]=128|63&i):(n[e++]=240|i>>>18,n[e++]=128|i>>>12&63,n[e++]=128|i>>>6&63,n[e++]=128|63&i);return n};var sn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,un=J,on=G,hn=W,cn=K,an=Y,fn=X,vn=$,ln=Z,dn=Q;function wn(t){this.options=Xt({level:vn,method:dn,chunkSize:16384,windowBits:15,memLevel:8,strategy:ln},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sn,this.strm.avail_out=0;var i=Kt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==an)throw new Error(B[i]);if(n.header&&Kt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?rn(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Kt.deflateSetDictionary(this.strm,r))!==an)throw new Error(B[i]);this._dict_set=!0}}function yn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new wn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||B[i.err];return i.result}(t,n)}return wn.prototype.push=function(t,n){var i,r,s=this.strm,e=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?cn:un,"string"==typeof t?s.input=rn(t):"[object ArrayBuffer]"===en.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(e),s.next_out=0,s.avail_out=e),(r===on||r===hn)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((i=Kt.deflate(s,r))===fn)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),i=Kt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===an;if(0!==s.avail_out){if(r>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},wn.prototype.onData=function(t){this.chunks.push(t)},wn.prototype.onEnd=function(t){t===an&&(this.result=$t(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=yn(t);return"base64"===n&&(r=btoa(nn(r))),i&&i(r),r}}var Ko=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=Qt.GZIP,i.zp=Wo(),i.Vp=function(t,n,r){r(i.zp(t,n))},i.compress=Yo(),"undefined"!=typeof CompressionStream||(i.compress=i.Vp,i.getCompressorSourceCode=function(){return Wo.toString()}),i}return H(n,t),n.prototype.compressSync=function(t,n){return this.zp(t,n)},n.prototype.getCompressorSourceCode=function(){return Yo.toString()},n}(hn);function Yo(){return function(t,n,i){var r=new Response(t).body.pipeThrough(new CompressionStream("gzip")),s=new Response(r).arrayBuffer();"base64"!==n?s.then((function(t){return i(t)})):s.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})).then((function(t){return i(t)}))}}var Xo,$o,Zo=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=Qt.UNCOMPRESSED,n}return H(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(hn),Qo=function(){function t(){}return t.create=function(t){return this.instance?this.instance:$i.isCompressionEnabled()?this.instance=new Ko(t):new Zo(t)},t}(),th=function(){function t(t){this.Uf=t,this.jf=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.Uf.getUrlMaskingPattern(t);csArray.prototype.push.call(this.jf,n)},t.prototype.anonymize=function(t){var n=this.Uf.removeQueryString(t.url);return F(F({},t),{url:this.Uf.anonymizeUrl(n,this.jf),library:t.library?this.Uf.anonymizeUrl(t.library,this.jf):void 0})},t}(),nh=function(){function t(t,n){this.D=t,this.Z=n}return t.prototype.anonymize=function(t){return Dt(t.message)&&(t.message=this.Bp(t.message),t.message=this.D.anonymizeEmail(t.message)),Dt(t.filename)&&(t.filename=this.Z.computeOverriddenUrl(t.filename)),t},t.prototype.Bp=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),ih=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),rh=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),sh=["visit",2],eh=["page",3],uh=["nextPageOnly",4],oh=function(){function t(t,n){this.D=t,this.Qd=n,this.Jp={},this.Gp={}}return t.prototype.set=function(t,n,i,r){var s,e;if(t>0&&qt(n)&&qt(i)&&!Ht(n)&&!Ht(i)){var u=this.D.anonymizeEmail(csString(n)),o=this.D.anonymizeEmail(csString(i));if(s=[u.slice(0,512),o.slice(0,255)],e=""!==i,!jt(r)||csArray.prototype.indexOf.call(sh,r)>=0){var h=this.getCustomVariablesSession();e?h[t]=s:delete h[t],this.setCustomVariableSession(h)}(!jt(r)||csArray.prototype.indexOf.call(eh,r)>=0)&&(e?this.Jp[t]=s:delete this.Jp[t]),jt(r)&&csArray.prototype.indexOf.call(uh,r)>=0&&(e?this.Gp[t]=s:delete this.Gp[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.Qd.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&Ut(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.Qd.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.Qd.remove()},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.Gp)this.Gp.hasOwnProperty(n)&&(this.Jp[n]=this.Gp[n]);for(var n in this.Jp)this.Jp.hasOwnProperty(n)&&(t[n]=this.Jp[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.Wp(t)};return this.Jp&&window.csJSON.stringify(this.Jp).length>2&&(i.cvarp=this.Wp(this.Jp)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.Gp).length>0)for(var t in this.Gp)this.Gp[t]===this.Jp[t]&&(delete this.Jp[t],delete this.Gp[t])},t.prototype.Wp=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],s=r[0],e=r[1];o=1,h=20,(!(Mt(u=i)&&u>=o&&u<=h)||s.length>512||e.length>255)&&delete t[n]}var u,o,h,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),hh=["setCustomVariable"],ch=function(){function t(t,n){this._h=t,this.Zt=n}return t.prototype.init=function(){var t=this;this._h.register(hh,(function(n,i,r,s){t.Zt.set(n,i,r,s)}))},t.prototype.onAfterArtificialPageView=function(){this.Zt.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.Zt.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.Zt.removeCustomVariablesSession()},t}(),ah=function(){function t(t){this.M=t,this.Kp=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this.Kp,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){if(!this.M.apiErrors.validCustomHeaders)return!1;var n=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(this.M.apiErrors.validCustomHeaders,(function(t){return csString.prototype.toLowerCase.call(t)===n}))},t}(),fh=function(){function t(t){this.D=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,s=csString.prototype.split.call(n,"/");r<s.length;r++){var e=s[r];K(e,t.Yp)?csArray.prototype.push.call(i,{key:e,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(e,1)))}):csArray.prototype.push.call(i,{key:e,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.D.anonymizeEmail(t);return i=this.D.anonymizeJwt(i),n.length>0?this.Xp(i,n):i},t.prototype.removeQueryString=function(t){var n=this.$p(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.$p=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.Xp=function(t,n){for(var i=this.$p(t),r=i.path,s=i.queryString,e=csString.prototype.split.call(r,"/"),u=0,o=n;u<o.length;u++){var h=o[u],c=this.Zp(e,h);if(null!==c)return"".concat(c).concat(s)}return t},t.prototype.Zp=function(n,i){if(n.length<i.length)return null;for(var r="",s=0;s<n.length;s+=1)if(s>=i.length)r+="".concat(n[s],"/");else if(K(i[s].key,t.Yp))r+="".concat(i[s].value,"/");else{if(n[s]!==i[s].key)return null;r+="".concat(n[s],"/")}return csString.prototype.slice.call(r,0,-1)},t.Yp=":",t}(),vh=function(){function t(t,n){this.Tc=t,this.M=n}return t.prototype.getEventTargetPath=function(t){var n=Kn(t);return this.Tc.getElementPath(n,F({dynamicIdRegex:this.M.dynamicIdRegex},this.M.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=Kn(t),i=this.Tc.getElementPathAndFirstAnchorParent(n,F({dynamicIdRegex:this.M.dynamicIdRegex},this.M.pathComputationRules)),r=i.path,s=i.firstAnchorParent;return{path:r,targetLink:this.Qp(s)?s.href:""}},t.prototype.hasValidEventTarget=function(t){var n=Kn(t);return this.Tc.isValidElement(n)},t.prototype.getElementPath=function(t){return this.Tc.getElementPath(t,F({dynamicIdRegex:this.M.dynamicIdRegex},this.M.pathComputationRules))},t.prototype.Qp=function(t){var n;return null!==t&&t.hasAttribute("href")&&!K(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),lh=function(){function t(t){this.ca=t}return t.prototype.transformEvent=function(t,n){var i=this.tm(t,n),r=this.ca.getElementPath(t);return this.nm(r,i)},t.prototype.tm=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+ri.windowOffsetX()),n.y=Math.round(i.top+n.y+ri.windowOffsetY())}return n},t.prototype.nm=function(t,n){return Ls(n)&&(n.tgt="".concat(t).concat(Jo).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(Jo).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(Jo).concat(n.tgtLk)),n},t}(),dh=function(){function t(t){this.ca=t}return t.prototype.transformEvent=function(t,n){var i=this.ca.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(Jo).concat(n.iframePath):i,commands:n.commands}},t}(),wh=function(){function t(t){this.ca=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.ca.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return F(F({},t),{targetPath:"".concat(i).concat(Jo).concat(t.targetPath)})}));return F(F({},n),{products:r})},t}(),yh=function(){function t(t){this.xn=t,this.im={clientX:2,clientY:3},this.rm={clientX:1,clientY:2},this.sm=[In.POINTER_DOWN,In.POINTER_MOVE,In.POINTER_UP],this.um=[In.TOUCH_START,In.TOUCH_MOVE,In.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!ei.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==In.VISIBILITY_CHANGE})),0===n.events.length||(Gt.warn("IframeRecordingEventsTransformer received event ".concat(It.RecordingEvent," \n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.xn.getId(t);if(void 0===r)return Gt.error("IframeRecordingEventsTransformer received event ".concat(It.RecordingEvent," \n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var s=null;csArray.prototype.some.call(n.events,(function(t){return i.om(t)||i.hm(t)}))&&(s=t.getBoundingClientRect());for(var e=0,u=n.events;e<u.length;e++){var o=u[e];this.om(o)?this.am(s,o):this.hm(o)&&this.fm(s,o),o.context=o.context&&o.context.length>0?"".concat(r,"/").concat(o.context):"".concat(r)}return n},t.prototype.fm=function(t,n){this.vm(this.rm,t,n)},t.prototype.am=function(t,n){this.vm(this.im,t,n)},t.prototype.vm=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.om=function(t){return-1!==csArray.prototype.indexOf.call(this.sm,t.type)},t.prototype.hm=function(t){return-1!==csArray.prototype.indexOf.call(this.um,t.type)},t}(),ph=function(){function t(t,n,i,r){this.M=t,this.tt=n,this.U=i,this.Zs=r}return t.prototype.init=function(){var t=this,n=new Ku,i=new ft,r=new fh(i),s=new qo(window.location,r),e=new Kt(this.M,s,this.tt);e.init();var u=new ih,o=new rh,h=new ao(window.location,e),c=new Lo(this.M,e);c.init();var a,f=Qo.create(Gt.warn),v=new an(f);if(this.M.useMalkaPipeline){var l=v.create("".concat(this.M.getQuotaServiceUri(),"/quota"),!0);(a=new Vu(this.M,l,n,h,s)).init()}else a=new zu(this.M,h,s);var d=new Sn(this.M,e,c,u),w=new Bu(d,a),y=new dn(this.M,e,c,u),p=new Hu(this.M,y,w);this.U.setContext(p,w),a.setVisitorService(p);var m=new Gu(p,w),g=new Rn(this.M,e,c,u),A=new ro(window.location,g),S=new so(A),E=new Ju(this.M,p,A),b=new Si,N=new vh(D,this.M),T=new lh(N),R=new dh(N),O=new wh(N),k=new yh(b),I=new Go(T,R,O,k),C=new Eo,x=new Ao(C,I),_=new uo(s),L=new ho(_,C),P=new kn(this.M,e,c,u),M=new oh(i,P),U=new ch(C,M),j=new fn(p,w,A,M,this.M),q=new Ln,H=new _n(q,window.location),F=new go(this.M,j,H),z=new Po(this.M,q);c.setStates(j,z),new ju(this.M,p,A,E,m,F,c,h).compute((function(u){x.init();var h=new Ho,c=new $u(t.M,e,o),a=new no(t.M,c,n),l=new to(C,a),d=new vo(t.M,e,o),y=new lo(n,window.location,d),m=new po(C,y),g=new Uo(C,t.M),A=new Mo(t.M,p,w),E=new Do,b=new Xi,T=new ah(t.M),R=new Vo(b,T,t.M),O=new Bo(b,T,t.M),k=new Fo(R,O),P=new th(r),D=new nh(i,s),j=new xo(E,D,k,P,i,t.M,A,I,C,h,s,v);(j.init(),n.addListeners(j),u)?(n.emitInitTracking(),new Uu(A,f,p,w,n,C,x,t.M,m,y,l,a,i,N,r,s,g,h,E,D,k,P,I,M,U,_,L,t.Zs,v).start()):new io(n,C,x,m,y,S,l).start()}))},t}();!function(t){var n,i="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var o=t.source,h=t.data;if(e(h)){var f=function(){var n,i,r,e=s("{domain}/tag/tag.bundle.js?v={version}",h);n=e,i=function(){return o.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=h.token,a(r.loadBundle),u(t.origin)?f():function(t,n){var r=s(i,t),e=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),u=function(t){t.source===e.contentWindow&&"TOKEN_VALID"===t.data&&(a(u),e.remove(),n())};c(u),document.head.appendChild(e)}(h,f)}}};function s(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function e(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&h(t.version)&&o(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function o(t){return/^[a-zA-Z0-9]+$/.test(t)}function h(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function a(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=e,t.isAuthorizedDomain=u,t.isAuthorizedToken=o,t.isAuthorizedTagVersion=h,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=a}(Xo||(Xo={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],s={ping:function(t){"ping"===t.data&&e(t.origin)&&(n=t.origin,h(s.ping),o(s.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(h(s.insertMessageScript),u(n))}))};function e(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var s=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(s,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function o(t){window.addEventListener("message",t,!1)}function h(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Xo.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=e,t.waitForConnection=function(){o(s.ping),Xo.waitForBundleInjection()},t.listen=o,t.removeListener=h,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}($o||($o={}));var mh,gh=window.CSFrameCommunication||$o,Ah=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.emitAfterPageViewCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},n.prototype.emitIntegrationSessionKeyCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},n.prototype.emitParentRecordingStatusChange=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},n}(Wu),Sh=function(){function t(t){this.lm=t}return t.prototype.init=function(){this.lm.register(As),this.lm.register(hh),this.lm.register(ze),this.lm.register(Ve),this.lm.register(Fe),this.lm.register(Os),this.lm.register(ks),this.lm.register(Is),this.lm.register(Cs),this.lm.register(Xe),this.lm.register($e),this.lm.register(wo),this.lm.register(yo),this.lm.register(pu),this.lm.register(mu),this.lm.register(Zu),this.lm.register(Qu),this.lm.register(Co),this.lm.register(Io)},t.prototype.onStartTracking=function(){this.lm.start()},t.prototype.onOptout=function(){this.lm.stop()},t}(),Eh=function(t){function n(n,i){var r=t.call(this)||this;return r._h=n,r.dm=i,r.hc=[],r}return H(n,t),n.prototype.onStart=function(){this.commandsBatchReady()},n.prototype.onStop=function(){this.hc=[]},n.prototype.register=function(t){for(var n=this,i=function(t){r._h.register([t],(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n.send(t,i)}))},r=this,s=0,e=t;s<e.length;s++){i(e[s])}},n.prototype.send=function(t,n){csArray.prototype.push.call(this.hc,{name:t,params:n}),this.isStarted&&this.commandsBatchReady()},n.prototype.commandsBatchReady=function(){if(0!==this.hc.length){var t={commands:this.hc};this.dm.sendToParent(It.Commands,t),this.hc=[]}},z([Wt("Commands.iframe.commandsBatch.send")],n.prototype,"send",null),z([ys(),Wt("send iframe commands batch")],n.prototype,"commandsBatchReady",null),n}(fi),bh=function(){function t(t){void 0===t&&(t=25),this.wm=t,this.ym=[]}return t.prototype.reset=function(){this.ym=[]},t.prototype.getMessages=function(){return this.ym},t.prototype.addMessage=function(t){this.ym.length<this.wm?csArray.prototype.push.call(this.ym,t):this.ym.length===this.wm&&(this.pm(t),csArray.prototype.push.call(this.ym,t))},t.prototype.pm=function(t){t.type=It.ChildLogMessage,t.content={message:"Buffer is full, events might be missing.",errorCode:"",level:Q.warn}},t}(),Nh=function(t){function n(n){var i=t.call(this)||this;return i.buffer=new bh(n),i}return H(n,t),n}(fi),Th=function(t){function n(n,i,r,s){var e=t.call(this,25)||this;return e.M=n,e.li=i,e.gm=r,e.Am=s,e.Sm=null,e.Em={boundElement:window,type:"message",listener:function(t){return e._l(t)}},e}return H(n,t),n.prototype.onStart=function(){Dn(this.Em,!1),this.bm()},n.prototype.onStop=function(){Un(this.Em,!1),this.Sm&&(Ct.closeChannelPort(this.Sm),this.Sm=null)},n.prototype.sendToParent=function(t,n){var i=this.buildChildBaseMessage(t,n);this.qy(i)},n.prototype.bm=function(){var t=this.buildChildBaseMessage(It.Discovery);Ct.sendPostMessage(window.parent,"*",t)},n.prototype.buildChildBaseMessage=function(t,n){var i=Ct.buildBaseMessage(t,kt.Child,this.M.projectId);return n&&(i.content=n),i},n.prototype.qy=function(t){null!==this.Sm?Ct.sendChannelMessage(this.Sm,t):this.buffer.addMessage(t)},n.prototype.Nm=function(t,n){var i=this,r=new MessageChannel;this.Sm=r.port1,this.Sm.onmessage=function(t){i.Yl(t)};var s=this.buildChildBaseMessage(It.Discovery);s.id=n,Ct.sendPostMessage(window.parent,t,s,[r.port2]),this.sendAllMessagesFromBuffer()},n.prototype.Yl=function(t){switch(t.data.type){case It.IntegrationCallback:var n=t.data.content;n.initiator===Ot.AfterPageView?this.Am.emitAfterPageViewCallback(n):n.initiator===Ot.GetSessionKey?this.Am.emitIntegrationSessionKeyCallback(n):Gt.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case It.Stop:this.li.emitOptout();break;case It.RecordingStatus:var i=t.data.content;this.gm.setRecordingStatus(i),this.Am.emitParentRecordingStatusChange(i);break;default:Gt.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},n.prototype._l=function(t){if(null===this.Sm&&Ct.isMessageValid(t,kt.Parent,this.M.projectId,this.M.hostnames))switch(t.data.type){case It.Stop:this.li.emitOptout();break;case It.Discovery:if(!Mt(t.data.id)||t.data.id<0)return void Gt.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.Nm(t.origin,t.data.id);break;default:Gt.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.sendAllMessagesFromBuffer=function(){if(null!==this.Sm){for(var t=0,n=this.buffer.getMessages();t<n.length;t++){var i=n[t];Ct.sendChannelMessage(this.Sm,i)}this.Tm(),this.buffer.reset()}},n.prototype.Tm=function(){var t=Ct.buildBaseMessage(It.EndOfBufferedMessages,kt.Child,this.M.projectId);Ct.sendChannelMessage(this.Sm,t)},n}(Nh),Rh=function(t){function n(n,i){var r=t.call(this)||this;return r.Vi=n,r.dm=i,r}return H(n,t),n.prototype.onStart=function(){var t=this;this.Vi.subscribe(n.gr,(function(n){return t.pr(n)}))},n.prototype.onStop=function(){this.Vi.unsubscribe(n.gr)},n.prototype.pr=function(t){this.isStarted&&this.dm.sendToParent(It.ApiError,t)},n.gr="ChildApiErrorsService",n}(fi),Oh=function(t){function n(n,i){var r=t.call(this)||this;return r.Vi=n,r.dm=i,r}return H(n,t),n.prototype.onStart=function(){var t=this;this.Vi.subscribe(n.gr,(function(n){return t.pr(n)}),{detailedEvent:!0})},n.prototype.onStop=function(){this.Vi.unsubscribe(n.gr)},n.prototype.pr=function(t){this.isStarted&&this.dm.sendToParent(It.DetailedApiError,t)},n.gr="ChildDetailedApiErrorsService",n}(fi),kh=function(t){function n(n,i){var r=t.call(this)||this;return r.Fi=n,r.dm=i,r}return H(n,t),n.prototype.onStart=function(){var t=this;this.Fi.subscribe(n.gr,(function(n){return t.pr(n)}))},n.prototype.onStop=function(){this.Fi.unsubscribe(n.gr)},n.prototype.pr=function(t){this.isStarted&&this.dm.sendToParent(It.JavascriptError,t)},n.gr="ChildJavaScriptErrorsService",n}(fi),Ih=function(){function t(t,n,i,r){this.Fi=t,this.Vi=n,this.M=i,this.dm=r}return t.prototype.init=function(){this.Rm=new kh(this.Fi,this.dm),this.Vi.excludeDomains([So.CONTENTSQUARE,So.CLICKTALE,So.FAKE_TRACKER]),this.Om=new Rh(this.Vi,this.dm),this.km=new Oh(this.Vi,this.dm),this.Vi.init()},t.prototype.onStartTracking=function(){this.M.jsErrorsEnabled&&this.Rm.start(),this.M.apiErrors.enabled&&this.Om.start()},t.prototype.onParentRecordingStatusChange=function(t){this.M.apiErrors.enabled&&(t.isRecording?this.km.start():this.km.stop())},t.prototype.onOptout=function(){this.Rm.stop(),this.Om.stop(),this.km.stop()},t}(),Ch=function(){function t(t){this.dm=t}return t.prototype.onStartTracking=function(){this.dm.start()},t.prototype.onOptout=function(){this.dm.stop()},t}(),xh=function(){function t(t,n,i,r){this.ic=t,this.rc=n,this.dm=i,this.gm=r}return t.prototype.init=function(){var t=this;this.ic.onChildMessage((function(n,i,r){return t.rc.emitIframeEvent(n,i,r)})),this.ic.setRecordingStatusCallback((function(){return t.gm.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.ic.start()},t.prototype.onOptout=function(){this.ic.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var n={events:t,containsUserEvent:!0};this.dm.sendToParent(It.RecordingEvent,n)},t.prototype.onIframeRecordingBrowserEvent=function(t){var n={events:t,containsUserEvent:!1};this.dm.sendToParent(It.RecordingEvent,n)},t.prototype.onIframeAnalysisEvent=function(t){this.dm.sendToParent(It.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.dm.sendToParent(It.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.dm.sendToParent(It.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.dm.sendToParent(It.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.dm.sendToParent(It.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.dm.sendToParent(It.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.dm.sendToParent(It.IntegrationCallback,t)},t.prototype.onAfterPageViewCallback=function(t){this.ic.sendToChildren(It.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.ic.sendToChildren(It.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.ic.sendToChildren(It.RecordingStatus,t)},t}(),_h=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.ra=n,u.Vu=i,u.dm=r,u.da=s,u.ya=e,u}return H(n,t),n.prototype.init=function(){var t,n,i=this;this.ra.onEvent((function(t){return i.pr(t)})),this.Vu.onEvent((function(t){return i.pr(t)})),null===(t=this.da)||void 0===t||t.onEvent((function(t){return i.pr(t)})),null===(n=this.ya)||void 0===n||n.onEvent((function(t){return i.pr(t)}))},n.prototype.onStart=function(){var t,n;this.ra.start(),this.Vu.start(),null===(t=this.da)||void 0===t||t.start(),null===(n=this.ya)||void 0===n||n.start()},n.prototype.onStop=function(){var t,n;this.ra.stop(),this.Vu.stop(),null===(t=this.da)||void 0===t||t.stop(),null===(n=this.ya)||void 0===n||n.stop()},n.prototype.pr=function(t){this.isStarted&&t.type!==ps.RESIZE&&this.dm.sendToParent(It.AnalysisEvent,t)},n}(fi),Lh=function(){function t(t,n,i,r){this.M=t,this.ca=n,this.Cn=i,this.dm=r}return t.prototype.init=function(){var t,n;this.M.accessibilityEnabled&&(t=new Ie,n=new Ce);var i=new Xs(this.M,this.ca,this.Cn),r=new qs(this.M,this.ca,new Lu(Gt));this.Im=new _h(i,r,this.dm,t,n),this.Im.init()},t.prototype.onStartTracking=function(){this.Im.start()},t.prototype.onOptout=function(){this.Im.stop()},t}(),Ph=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n}(nu),Mh=function(){function t(t,n,i){this.Z=t,this.Cm=n,this.dm=i,this.Sv=[]}return t.prototype.collect=function(){var t=this.Cm.collectProductsAndAnchors().products;this.Sv=t,this.xm=this.Z.getAnonymizedUrl(),this._m()},t.prototype.clearProducts=function(){this.Sv=[]},t.prototype._m=function(){var t={targetUrl:this.xm,windowWidth:ri.windowWidth(),windowHeight:ri.windowHeight(),products:this.Sv};this.dm.sendToParent(It.EmerchandisingMessage,t)},t}(),Dh=function(){function t(t,n,i,r){this.M=t,this.ca=n,this.Z=i,this.dm=r}return t.prototype.init=function(){var t=new Ph(this.M,this.ca);this.Lm=new Mh(this.Z,t,this.dm)},t.prototype.onStartTracking=function(){this.Lm.clearProducts(),this.Lm.collect()},t.prototype.onAfterPageViewCallback=function(){this.Lm.clearProducts(),this.Lm.collect()},t}(),Uh=function(t){function n(n,i,r,s,e,u,o,h,c,a,f,v){var l=t.call(this)||this;return l.M=n,l.Pi=i,l.Mi=r,l.Di=s,l.Ui=e,l.ji=u,l.vi=o,l.Hi=h,l.Bi=c,l.Ln=a,l.Gi=f,l.dm=v,l.Qi=new ai,l.tr=!1,l.xi=[],l.Pm=!1,l.rr=function(t){return l.pa(t)},l.er=function(t){return l.ur(t)},l}return H(n,t),n.prototype.init=function(){this.vr()},n.prototype.vr=function(){this.Pi.onEvent(this.rr),this.Mi.onEvent(this.rr),this.Ui.onEvent(this.rr),this.Di.onEvent(this.er),this.vi.onEvent(this.rr),this.Hi.onEvent(this.rr),this.Bi.onEvent(this.rr),this.ji.onEvent(this.er),this.Ln.onTextNodeToEncrypt(this.rr),this.Gi.onEvent(this.rr)},n.prototype.blockSendingEventsFromSerialization=function(){this.tr=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.tr=!0},n.prototype.pa=function(t){this.Mm(t),this.Dm()},n.prototype.ur=function(t){this.Um(t),this.Dm()},n.prototype.Um=function(t){csArray.prototype.push.call(this.xi,t),this.Pm=!0},n.prototype.Mm=function(t){csArray.prototype.push.call(this.xi,t)},n.prototype.Dm=function(){if(this.tr){var t={containsUserEvent:this.Pm,events:this.xi};this.dm.sendToParent(It.RecordingEvent,t),this.xi=[],this.Pm=!1}},n.prototype.onStart=function(){this.Gi.start(),this.Hi.start(),this.Mi.start(),this.Pi.start(),this.Bi.start(),this.Ui.start(),this.ji.start(),this.M.emitDebugEvents&&this.Qi.emit("replayRecordingStarted")},n.prototype.onStop=function(){this.Pi.stop(),this.Mi.stop(),this.Ui.stop(),this.Di.stop(),this.Bi.stop(),this.ji.stop(),this.Gi.stop()},n.prototype.addInitialDom=function(t){for(var n=0;n<this.xi.length;n+=1){if(this.xi[n].date>t.date)return csArray.prototype.splice.call(this.xi,n,0,t),this.Pm=!0,void this.Dm()}this.Um(t),this.Dm()},n}(fi),jh=function(){function t(t){this.M=t}return t.prototype.isAllowedByConsent=function(){return!this.M.consentRequired},t}(),qh=function(){function t(){this.jm=null}return t.prototype.getRecordingStatus=function(){return null===this.jm?{isRecording:!1}:this.jm},t.prototype.setRecordingStatus=function(t){this.jm=t},t}(),Hh=function(){function t(t,n,i,r,s){this.M=t,this.D=n,this._n=i,this.jh=r,this.Am=s}return t.prototype.init=function(){var t=new fh(this.D),n=new qo(window.location,t),i=new jh(this.M);this.Hh=new Br(i,this.M,n),this.qm=new qh,this.qm.setRecordingStatus({isRecording:!0,isMutationTrackerStarted:!0,PIISelectors:this._n.getPIISelectors(),capturedElementSelector:this.jh.getWhitelistedElementsSelector(),useAnonymization:this.Hh.shouldUseAnonymization()})},t.prototype.onStartTracking=function(){this.Am.emitParentRecordingStatusChange(this.qm.getRecordingStatus())},t}(),Fh=function(){function t(t,n,i,r,s,e,u,o,h,c,a,f,v,l){this.M=t,this.su=n,this.Cn=i,this.D=r,this.xn=s,this._n=e,this.Vu=u,this.li=o,this.dm=h,this.gm=c,this._h=a,this.Am=f,this.lt=v,this.Zs=l}return t.prototype.init=function(){var t=this,n=new Xi,i=new bi(this._n);this.jh=new Ii(this.D,this.M),this.jh.init();var r=new Vi,s=new Gi(n,this.Zs,this.xn),e=new Ar(window.crypto),u=new Er(window.crypto);u.init(),e.init();var o=new lr,h=new lr,c=new lr,a=new lr,f=new lr;this.Ln=new fr(this.xn,this.M,u,e,o,h,c,f,a,this.su),this.Ln.init();var v=new vr(this.Ln),l=[i,this.jh,v,r],d=new hr(this._n,1e3);this.M.textVisibilityEnabled&&csArray.prototype.push.call(l,d);var w,y=new Hr;if(y.isSupported()&&csArray.prototype.push.call(l,y.getProcessor()),this.qh()){var p=new Pr(this.xn);w=new jr(l,this.xn,p)}else w=new qr(l);if(this.ai=new gi(w,this.xn,this.jh,this.Ln),this.Di=new Zn(this.Cn,this.xn,this._n,this.Ln),this.Di.init(),this.Mi=new ui(this.ai,s,r,this.li,this.xn,this._n),this.Hm=new Uh(this.M,new Ai(n,this.xn,this._n,r),this.Mi,this.Di,new Pi(window.location,this.D),new br(this.Vu,this.xn,this._n),r,new Bi(window),d,this.Ln,y,this.dm),this._h.register(ss,(function(){return t.gm.getRecordingStatus().isRecording})),this._h.register(ns,(function(n){t.jh.setWhitelistedElementsSelector(n)})),this._h.register(is,(function(n){t._n.setPIISelectors(n)})),this._h.register(rs,(function(n){t.Ln.setEncryptionSelectors(n)})),s.init(),this.Hm.init(),this.lt.isInWebViewContext()){var m=new Hh(this.M,this.D,this._n,this.jh,this.Am);this.li.addListeners(m),m.init()}},t.prototype.onParentRecordingStatusChange=function(t){t.PIISelectors&&this._n.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&this.jh.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.ai.setAnonymization(t.useAnonymization),t.encryptionSelectors&&this.Ln.setEncryptionSelectors(t.encryptionSelectors),t.isRecording?this.Hm.start():this.Hm.stop(),t.isMutationTrackerStarted?this.Mi.start():this.Mi.stop()},t.prototype.onInitialDomStart=function(){this.Hm.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){this.Di.start(),this.Hm.allowSendingEventsFromSerialization(),this.Hm.addInitialDom(t)},t.prototype.qh=function(){return Jr.isAsyncSerializationSupported()&&this.M.asyncSerializerEnabled},t}(),zh=function(){function t(t){this.dm=t,this.Yh={}}return t.prototype.handleCommand=function(t){Ht(t)&&this.Xh(t)},t.prototype.executeRegisteredCallbacks=function(t){var n=t.trackingContext;if(n)if(t.callbackId){var i=this.Yh[t.callbackId];i&&this.$h(i,n)}else for(var r in this.Yh)this.$h(this.Yh[r],n)},t.prototype.Xh=function(t){var n=$.integer(),i={callbackId:n,initiator:Ot.AfterPageView};this.Yh[n]=t,this.dm.sendToParent(It.IntegrationCallback,i)},t.prototype.$h=function(t,n){setTimeout((function(){t(n)}))},t}(),Vh=function(){function t(t){this.dm=t,this.Zh={}}return t.prototype.handleCommand=function(t){Ut(t)&&Ht(t.callback)&&this.tc(t.callback)},t.prototype.executePendingCallbacks=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n){var r=this.Zh[i];r&&(delete this.Zh[i],this.$h(r,n.sessionKey))}},t.prototype.tc=function(t){var n=$.integer(),i={callbackId:n,initiator:Ot.GetSessionKey};this.Zh[n]=t,this.dm.sendToParent(It.IntegrationCallback,i)},t.prototype.$h=function(t,n){setTimeout((function(){t(n)}))},t}(),Bh=function(){function t(){this.Fr=new _r([])}return t.prototype.handleCommand=function(){return csJSON.stringify(this.Fr.serialize(document))},t}(),Jh=["serializeWebView"],Gh=function(){function t(t,n){this._h=t,this.dm=n}return t.prototype.init=function(){var t=this;this.Fm=new zh(this.dm),this.zm=new Vh(this.dm),this.Vm=new Bh,this._h.register(as,(function(n){t.Fm.handleCommand(n)})),this._h.register(fs,(function(n){return t.zm.handleCommand(n)})),this._h.register(Jh,(function(){return t.Vm.handleCommand()}))},t.prototype.onAfterPageViewCallback=function(t){this.Fm.executeRegisteredCallbacks(t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.zm.executePendingCallbacks(t)},t}(),Wh=function(){function t(t,n,i,r,s,e,u,o){var h=this;this.Bm=t,this.li=n,this.M=i,this.dm=r,this.gm=s,this._h=e,this.lt=u,this.Zs=o,this.Vd=function(){h._h.start(),h.Jd.start()}}return t.prototype.start=function(){var t=this,n=new vh(D,this.M),i=new Ke(n),r=new ft,s=Qo.create(Gt.warn),e=new Lh(this.M,n,i,this.dm),u=new Ch(this.dm);if(this.M.eMerchandisingEnabled){var o=new ft,h=new fh(o),c=new qo(window.location,h),a=new Dh(this.M,n,c,this.dm);this.Bm.addListeners(a),this.li.addListeners(a),a.init()}var f=new Gh(this._h,this.dm);this.Bm.addListeners(f),f.init();var v=new Si,l=new Ru(this.M);if(Jr.isRecordingSupported()){var d=new Lu(Gt),w=new Fh(this.M,s,i,r,v,l,d,this.li,this.dm,this.gm,this._h,this.Bm,this.lt,this.Zs);this.li.addListeners(w),this.Bm.addListeners(w),w.init()}var y=new Iu(this.M,l),p=new lh(n),m=new dh(n),g=new wh(n),A=new yh(v),S=new Go(p,m,g,A),E=new xh(y,S,this.dm,this.gm);S.addListeners(E),this.Bm.addListeners(E),this.li.addListeners(u,E,e),E.init(),e.init(),this.Jd=new Ye,this.Jd.onLoad((function(){t.li.emitStartTracking()})),this.Vd()},t}();!function(t){t[t.PAGE_VIEW=4]="PAGE_VIEW",t[t.TAP=6]="TAP",t[t.LONG_PRESS=8]="LONG_PRESS",t[t.DRAG=9]="DRAG",t[t.FLICK=10]="FLICK"}(mh||(mh={}));var Kh,Yh,Xh=new ft;!function(t){function n(t){if(1===t.params.length){var n=t.params[0];if(ls.isValid(n.key,n.value)){var i=Xh.anonymizeEmail(n.key),r=Xh.anonymizeEmail(n.value);window.CSJavascriptBridge.sendDynamicVar(i,r)}}}function i(t){if(1===t.params.length){var n=t.params[0];if(Dt(n)){var i={type:mh.PAGE_VIEW,version:1,data:{url:n}};window.CSJavascriptBridge.sendEvent(csJSON.stringify(i))}}}function r(t){if(1===t.params.length){var n=t.params[0];n.id&&(n.id=Xh.anonymizeEmail(n.id)),Kh=Es.from(n)}}function s(){Es.isValid(Kh)&&(window.CSJavascriptBridge.sendTransaction(Kh.id?Kh.id:null,Kh.revenue,Kh.currency?Kh.currency:""),Kh=Es.from({revenue:NaN}))}t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction&&"function"==typeof window.CSJavascriptBridge.sendSREvent&&"function"==typeof window.CSJavascriptBridge.sendSRAssets&&"function"==typeof window.CSJavascriptBridge.sendLog},t.sendMessage=function(t,e){switch(t){case It.AnalysisEvent:break;case It.RecordingEvent:!function(t){for(var n=0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}}(e);break;case It.ChildLogMessage:u=e,window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(u));break;case It.Commands:!function(t){for(var e=t.commands,u=0,o=e;u<o.length;u++){var h=o[u];switch(!0){case 0===csArray.prototype.indexOf.call(yo,h.name):window.CSJavascriptBridge.optIn();break;case 0===csArray.prototype.indexOf.call(wo,h.name):window.CSJavascriptBridge.optOut();break;case 0===csArray.prototype.indexOf.call(As,h.name):n(h);break;case 0===csArray.prototype.indexOf.call(Fe,h.name):i(h);break;case 0===csArray.prototype.indexOf.call(ks,h.name):r(h);break;case 0===csArray.prototype.indexOf.call(Cs,h.name):s()}}}(e)}var u}}(Yh||(Yh={}));var $h,Zh=function(t){function n(n){void 0===n&&(n=500);var i=t.call(this,2500)||this;return i.Jm=n,i.Gm=!1,i}return H(n,t),n.prototype.onStart=function(){this.Wm()},n.prototype.onStop=function(){this.buffer.reset(),this.Km&&window.clearInterval(this.Km)},n.prototype.sendToParent=function(t,n){if(this.Gm)Yh.sendMessage(t,n);else{var i=this.buildChildBaseMessage(t,n);this.buffer.addMessage(i)}},n.prototype.sendAllMessagesFromBuffer=function(){for(var t=0,n=this.buffer.getMessages();t<n.length;t++){var i=n[t];Yh.sendMessage(i.type,i.content)}this.buffer.reset()},n.prototype.buildChildBaseMessage=function(t,n){return{type:t,content:n}},n.prototype.Wm=function(){var t=this;this.Gm=Yh.isCSJavascriptBridgeDefined(),this.Gm||(this.Km=window.setInterval((function(){t.Gm=Yh.isCSJavascriptBridgeDefined(),t.Gm&&(t.sendAllMessagesFromBuffer(),window.clearInterval(t.Km))}),this.Jm))},n}(Nh),Qh=function(){function t(t,n,i){this.M=t,this.lt=n,this.Zs=i}return t.prototype.init=function(){var t,n=new Ku,i=new Ah,r=new qh;t=this.lt.isInWebViewContext()?new Zh:new Th(this.M,n,r,i);var s=new Eo,e=new Eh(s,t),u=new Sh(e);u.init();var o=new Do,h=new ah(this.M),c=new Xi,a=new Vo(c,h,this.M),f=new Bo(c,h,this.M),v=new Fo(a,f),l=new Ih(o,v,this.M,t);l.init(),i.addListeners(l),n.addListeners(u,l),n.emitInitTracking(),new Wh(i,n,this.M,t,r,s,this.lt,this.Zs).start()},t}(),tc=function(){function t(t,n,i){void 0===n&&(n=40),void 0===i&&(i=0);var r=this;this.Ym=t,this.Xm=n,this.$m=i,this.Zm=[],this.X=!1,this.Qm=0,this.tg=function(){for(r.Qm=0;r.Zm.length;){if(r.Qm>=r.Xm)return void setTimeout(r.tg,r.$m);var t=window.performance.now(),n=csArray.prototype.shift.call(r.Zm);if(!n)break;r.runTask(n);var i=window.performance.now()-t;r.Qm+=i}r.X=!1}}return t.prototype.schedule=function(t,n){void 0===n&&(n=!1),this.Ym&&!n?(csArray.prototype.push.call(this.Zm,t),this.ng()):t()},t.prototype.ng=function(){var t=this;this.X||(this.X=!0,setTimeout((function(){t.tg()})))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.Zm,(function(n){t.runTask(n)})),this.Zm=[]},t.prototype.clearQueue=function(){this.Zm=[]},t.prototype.isEmpty=function(){return 0===this.Zm.length},z([Wt("TaskScheduler"),Wn("runTask")],t.prototype,"runTask",null),z([Wn("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),nc=function(){function t(t,n,i){this.M=t,this.lt=n,this.U=i}return t.prototype.start=function(){var t,n,i,r,s;if(!window.UXAnalytics){var e=new tc(!!(null===(t=this.M.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.M.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.M.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),u=new Xt(this.lt,this.M);u.init();var o=new tn(this.M,u);if(this.lt.isTopWindowTracker()&&o.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&Gt.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(s=window.CSProtectnativeFunctionsLogs)||void 0===s?void 0:s.Critical)return void Gt.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new ph(this.M,u,this.U,e).init()}else if(!this.lt.isTopWindowTracker()&&o.canTrackInChild()){new Qh(this.M,this.lt,e).init()}window.UXAnalytics={},!window.CSFrameCommunication&&gh.isActivable()&&(window.CSFrameCommunication=gh,gh.waitForConnection())}},z([Wn("main.start"),Wt("main.start")],t.prototype,"start",null),t}(),ic=function(){function t(){}return t.prototype.send=function(t,n,i){void 0===i&&(i=Q.warn);var r={message:t,errorCode:n,level:i};Yh.sendMessage(It.ChildLogMessage,r)},t}();try{var rc=new it(window.CS_CONF);window._uxa=window._uxa||[],rc.processOptionOverrides(window._uxa);var sc=new rt(window,rc);sc.init();var ec=new Lt;if(Gt.computeIsActive(rc.validationRate),sc.isTopWindowTracker()){var uc=new Et(rc,ec);Gt.setStrategy(uc)}else if(sc.isInIframeContext()){var oc=new _t(rc);Gt.setStrategy(oc)}else if(sc.isInWebViewContext()){var hc=new ic;Gt.setStrategy(hc)}void 0===$h&&($h=50),Hn=Gt.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),Hn&&(qn=$h),new nc(rc,sc,ec).start()}catch(si){}}();